{"version":3,"sources":["webpack:///webpack/bootstrap bdd0943850ded339cfb4","webpack:///./src/utils.js","webpack:///./src/adapters/bidderFactory.js","webpack:///./src/url.js","webpack:///./src/Renderer.js","webpack:///./node_modules/core-js/library/fn/array/find.js","webpack:///./src/hook.js","webpack:///./node_modules/core-js/library/modules/es6.array.find-index.js","webpack:///./src/secureCreatives.js","webpack:///./src/debugging.js","webpack:///./node_modules/core-js/library/fn/set.js","webpack:///./node_modules/core-js/library/modules/_string-at.js","webpack:///./node_modules/core-js/library/modules/_redefine.js","webpack:///./node_modules/core-js/library/modules/_iter-create.js","webpack:///./node_modules/core-js/library/modules/_wks.js","webpack:///./node_modules/core-js/library/modules/_object-dps.js","webpack:///./node_modules/core-js/library/modules/_object-keys.js","webpack:///./node_modules/core-js/library/modules/_object-keys-internal.js","webpack:///./node_modules/core-js/library/modules/_html.js","webpack:///./node_modules/core-js/library/modules/_object-gpo.js","webpack:///./node_modules/core-js/library/modules/web.dom.iterable.js","webpack:///./node_modules/core-js/library/modules/es6.array.iterator.js","webpack:///./node_modules/core-js/library/modules/es6.set.js","webpack:///./node_modules/core-js/library/modules/_collection-strong.js","webpack:///./node_modules/core-js/library/modules/_set-species.js","webpack:///./node_modules/core-js/library/modules/_export.js","webpack:///./node_modules/core-js/library/modules/_collection.js","webpack:///./node_modules/core-js/library/modules/es7.set.to-json.js","webpack:///./node_modules/core-js/library/modules/_collection-to-json.js","webpack:///./node_modules/core-js/library/modules/_array-from-iterable.js","webpack:///./node_modules/core-js/library/modules/es7.set.of.js","webpack:///./node_modules/core-js/library/modules/_set-collection-of.js","webpack:///./node_modules/core-js/library/modules/es7.set.from.js","webpack:///./node_modules/core-js/library/modules/_set-collection-from.js","webpack:///./node_modules/core-js/library/fn/array/from.js","webpack:///./node_modules/core-js/library/modules/es6.array.from.js","webpack:///./node_modules/core-js/library/modules/_core.js","webpack:///./node_modules/core-js/library/modules/_create-property.js","webpack:///./node_modules/core-js/library/modules/_iter-detect.js","webpack:///./node_modules/core-js/library/modules/_is-object.js","webpack:///./node_modules/core-js/library/modules/_global.js","webpack:///./src/mediaTypes.js","webpack:///./node_modules/core-js/library/modules/_object-dp.js","webpack:///./node_modules/core-js/library/modules/_hide.js","webpack:///./node_modules/core-js/library/modules/_descriptors.js","webpack:///./src/bidfactory.js","webpack:///./node_modules/core-js/library/modules/_ctx.js","webpack:///./src/native.js","webpack:///./node_modules/core-js/library/fn/string/includes.js","webpack:///./node_modules/core-js/library/modules/es6.string.includes.js","webpack:///./node_modules/core-js/library/modules/_string-context.js","webpack:///./node_modules/core-js/library/modules/_is-regexp.js","webpack:///./node_modules/core-js/library/modules/_fails-is-regexp.js","webpack:///./src/userSync.js","webpack:///./src/prebidGlobal.js","webpack:///./src/auctionManager.js","webpack:///./node_modules/core-js/library/modules/_an-object.js","webpack:///./src/config.js","webpack:///./node_modules/core-js/library/modules/_has.js","webpack:///./src/video.js","webpack:///./node_modules/core-js/library/modules/_iterators.js","webpack:///./node_modules/core-js/library/modules/_fails.js","webpack:///./node_modules/core-js/library/modules/_cof.js","webpack:///./node_modules/core-js/library/modules/_defined.js","webpack:///./node_modules/core-js/library/modules/_to-length.js","webpack:///./node_modules/core-js/library/fn/number/is-integer.js","webpack:///./node_modules/core-js/library/modules/es6.number.is-integer.js","webpack:///./node_modules/core-js/library/modules/_is-integer.js","webpack:///./node_modules/core-js/library/modules/_add-to-unscopables.js","webpack:///./node_modules/core-js/library/fn/array/find-index.js","webpack:///./src/auction.js","webpack:///./src/constants.json","webpack:///./node_modules/core-js/library/modules/_for-of.js","webpack:///./src/adapter.js","webpack:///./src/cpmBucketManager.js","webpack:///./node_modules/core-js/library/modules/_property-desc.js","webpack:///./node_modules/core-js/library/modules/_array-methods.js","webpack:///./node_modules/core-js/library/modules/_to-object.js","webpack:///./node_modules/core-js/library/modules/_to-integer.js","webpack:///./node_modules/core-js/library/modules/_uid.js","webpack:///./node_modules/core-js/library/modules/_to-iobject.js","webpack:///./src/refererDetection.js","webpack:///./src/ajax.js","webpack:///./src/adloader.js","webpack:///./node_modules/core-js/library/modules/_iter-define.js","webpack:///./node_modules/core-js/library/modules/_shared-key.js","webpack:///./node_modules/core-js/library/modules/_set-to-string-tag.js","webpack:///./node_modules/core-js/library/modules/_a-function.js","webpack:///./node_modules/core-js/library/modules/_dom-create.js","webpack:///./node_modules/core-js/library/modules/_iobject.js","webpack:///./node_modules/core-js/library/modules/_shared.js","webpack:///./node_modules/core-js/library/modules/_library.js","webpack:///./node_modules/core-js/library/modules/_array-includes.js","webpack:///./src/sizeMapping.js","webpack:///./src/adUnits.js","webpack:///./src/videoCache.js","webpack:///./src/prebid.js","webpack:///./src/targeting.js","webpack:///./node_modules/core-js/library/modules/es6.string.iterator.js","webpack:///./node_modules/core-js/library/modules/_object-create.js","webpack:///./node_modules/core-js/library/modules/_enum-bug-keys.js","webpack:///./node_modules/core-js/library/modules/_iter-step.js","webpack:///./node_modules/core-js/library/modules/_redefine-all.js","webpack:///./src/adapterManager.js","webpack:///./node_modules/core-js/library/modules/_an-instance.js","webpack:///./node_modules/core-js/library/modules/_iter-call.js","webpack:///./node_modules/core-js/library/modules/_is-array-iter.js","webpack:///./node_modules/core-js/library/modules/core.get-iterator-method.js","webpack:///./node_modules/core-js/library/modules/_classof.js","webpack:///./node_modules/core-js/library/modules/_meta.js","webpack:///./node_modules/core-js/library/modules/_validate-collection.js","webpack:///./src/adServerManager.js","webpack:///./src/events.js","webpack:///./node_modules/core-js/library/modules/es6.array.find.js","webpack:///./node_modules/core-js/library/modules/_ie8-dom-define.js","webpack:///./node_modules/core-js/library/modules/_to-primitive.js","webpack:///./node_modules/core-js/library/modules/_array-species-create.js","webpack:///./node_modules/core-js/library/modules/_array-species-constructor.js","webpack:///./node_modules/core-js/library/modules/_is-array.js","webpack:///./node_modules/core-js/library/modules/es7.array.includes.js","webpack:///./node_modules/core-js/library/modules/_to-absolute-index.js","webpack:///./node_modules/just-clone/index.js","webpack:///./node_modules/dlv/index.js","webpack:///./node_modules/core-js/library/fn/array/includes.js","webpack:///./node_modules/dset/dist/dset.es.js","webpack:///./node_modules/fun-hooks/no-eval/index.js"],"names":["CONSTANTS","require","tArr","tStr","tFn","tNumb","tObject","tBoolean","toString","Object","prototype","consoleExists","Boolean","window","console","consoleLogExists","log","consoleInfoExists","info","consoleWarnExists","warn","consoleErrorExists","error","internal","checkCookieSupport","createTrackPixelIframeHtml","getWindowSelf","getWindowTop","getAncestorOrigins","getTopFrameReferrer","getWindowLocation","getTopWindowLocation","insertUserSyncIframe","insertElement","isFn","triggerPixel","logError","logWarn","logMessage","logInfo","uniqueRef","bind","a","b","Function","self","args","Array","slice","call","arguments","apply","concat","replaceTokenInString","str","map","token","_each","value","key","undefined","keyString","toUpperCase","re","RegExp","replace","getIncrementalInteger","count","getUniqueIdentifierStr","Math","random","substr","generateUUID","placeholder","_getRandomData","crypto","getRandomValues","Uint8Array","getBidIdParameter","paramsObj","tryAppendQueryString","existingUrl","encodeURIComponent","parseQueryStringParameters","queryObj","result","k","hasOwnProperty","transformAdServerTargetingObj","targeting","getOwnPropertyNames","length","getKeys","getValue","join","getAdUnitSizes","adUnit","sizes","mediaTypes","banner","isArray","bannerSizes","push","parseSizesInput","sizeObj","parsedSizes","split","sizeRegex","curSizePos","hasOwn","match","sizeArrayLength","parseGPTSingleSizeArray","i","singleSize","isValidGPTSingleSize","parseGPTSingleSizeArrayToRtbSize","w","h","isNaN","inIframe","loc","e","parse","top","location","referrerLoc","currentWindow","parent","document","referrer","ancestorOrigins","getTopWindowUrl","href","getTopWindowReferrer","debugTurnedOn","decorateLog","prefix","unshift","hasConsoleLogger","config","getConfig","createInvisibleIframe","f","createElement","id","height","width","border","hspace","vspace","marginWidth","marginHeight","style","scrolling","frameBorder","src","display","getParameterByName","name","regexS","regex","results","exec","search","decodeURIComponent","hasValidBidRequest","paramObj","requiredParamsArr","adapter","found","findParam","addEventHandler","element","event","func","addEventListener","attachEvent","isA","object","_t","isStr","isNumber","isPlainObject","isBoolean","isEmpty","isEmptyStr","fn","forEach","l","contains","obj","indexOf","_map","callback","output","objectToCheck","propertyToCheckFor","constructor","elm","doc","target","asLastChildChild","parentEl","getElementsByTagName","insertBeforeEl","firstChild","insertBefore","url","done","img","Image","callBurl","source","burl","S2S","SRC","insertHtmlIntoIframe","htmlCode","iframe","allowtransparency","contentWindow","open","write","close","iframeHtml","div","innerHTML","createTrackPixelHtml","escapedUrl","encodeURI","encodeUri","sandbox","getIframeDocument","contentDocument","getValueString","param","val","defaultValue","uniques","index","arry","flatten","getBidRequest","bidderRequests","bidRequest","some","bidderRequest","find","bids","bid","type","keys","getKeyByValue","prop","getBidderCodes","adUnits","unit","bidder","reduce","filter","isGptPubadsDefined","googletag","pubads","getSlots","getHighestCpm","getHighestCpmCallback","previous","current","getOldestHighestCpmBid","getLatestHighestCpmBid","useTieBreakerProperty","tieBreakerCallback","cpm","shuffle","array","counter","floor","temp","adUnitsFilter","includes","adUnitCode","isSrcdocSupported","defaultView","frameElement","test","navigator","userAgent","deepClone","clone","isSafariBrowser","replaceAuctionPrice","timestamp","Date","getTime","cookieEnabled","cookie","cookiesAreEnabled","getCookie","m","setCookie","expires","localStorageIsEnabled","localStorage","setItem","getItem","delayExecution","numRequiredCalls","Error","numCalls","groupBy","xs","rv","x","createContentToExecuteExtScriptInFriendlyFrame","getDefinedParams","params","isValidMediaTypes","SUPPORTED_MEDIA_TYPES","SUPPORTED_STREAM_TYPES","types","every","video","context","getBidderRequest","bidRequests","request","start","auctionId","getUserConfiguredParams","code","bidderData","getOrigin","origin","protocol","hostname","port","getDNT","doNotTrack","msDoNotTrack","compareCodeAndSlot","slot","getAdUnitPath","getSlotElementId","isAdUnitCodeMatchingSlot","isSlotMatchingAdUnitCode","unsupportedBidderMessage","mediaType","deletePropertyFromObject","isInteger","Number","isFinite","convertCamelToUnderscore","y","toLowerCase","cleanObj","newObj","pick","properties","newProp","transformBidderParamKeywords","keywords","paramName","arrs","v","values","tryConvertType","typeToConvert","convertTypes","setDataInLocalStorage","hasLocalStorage","getDataFromLocalStorage","isArrayOfNums","size","fill","newArray","valueToPush","chunk","ceil","end","getMinValueFromArray","min","getMaxValueFromArray","max","compareOn","property","compare","COMMON_BID_RESPONSE_KEYS","DEFAULT_REFRESHIN_DAYS","registerBidder","spec","supportedMediaTypes","putBidder","newBidder","adapterManager","registerBidAdapter","aliases","alias","aliasRegistry","Adapter","getSpec","freeze","registerSyncs","callBids","addBidResponse","ajax","onTimelyResponse","adUnitCodesHandled","addBidWithCode","isValid","responses","afterAllResponses","events","emit","EVENTS","BIDDER_DONE","gdprConsent","validBidRequests","filterAndWarn","bidRequestMap","bidId","placementCode","requests","buildRequests","onResponse","processRequest","formatGetParameters","data","method","success","onSuccess","onFailure","withCredentials","options","JSON","stringify","contentType","response","responseObj","body","headers","headerParser","interpretResponse","err","addBidUsingRequestMap","requestId","prebidBid","createBid","STATUS","GOOD","xmlHttpResponse","get","getResponseHeader","getUserSyncs","filterConfig","syncs","iframeEnabled","all","pixelEnabled","image","sync","userSync","registerSync","isBidRequestValid","preloadBidderMappingFile","adPodBidders","deepAccess","ADPOD","bidderSpec","getBidAdapter","getMappingFileInfo","refreshInDays","localStorageKey","mappingData","lastUpdated","mapping","getHook","before","getIabSubCategory","bidderCode","category","getBidderCode","validBidSize","parseInt","hasValidKeys","bidKeys","errorMessage","msg","nativeBidIsValid","isValidVideoBid","parseQS","query","acc","criteria","formatQS","parsed","noDecodeWholeURL","qsAsString","decodeSearchAsString","pathname","hash","host","format","Renderer","loaded","handlers","cmd","utils","process","isRendererDefinedOnAdUnit","loadScript","install","setRender","render","setEventHandlers","handleVideoEvent","eventName","shift","isRendererRequired","renderer","executeRenderer","hook","funHooks","ready","SYNC","ASYNC","QUEUE","setupBeforeHookFnOnce","baseFn","hookFn","priority","getHooks","module","submodules","submodule","next","modules","BID_WON","listenMessagesFromCreative","receiveMessage","ev","message","adId","adObject","auctionManager","getBidsReceived","_sendAdToCreative","adServerDomain","addWinningBid","action","getAssetMessage","postMessage","trackerType","fireNativeTrackers","remoteDomain","ad","adUrl","resizeRemoteCreative","elmType","getElementByAdUnit","elementStyle","getElementIdBasedOnAdServer","parentDivEle","getElementById","querySelector","getDfpElementId","apntag","getAstElementId","astTag","getTag","targetId","OVERRIDE_KEY","boundHook","utilsLogMessage","utilsLogWarn","removeHook","remove","enableOverrides","overrides","fromSession","setConfig","addBidResponseHook","disableOverrides","bidders","overrideBid","debugging","enabled","sessionStorage","removeItem","sessionLoader","storage","NATIVE","VIDEO","BANNER","Bid","statusCode","_bidSrc","_statusCode","statusMessage","_getStatus","getStatusCode","getSize","nativeAdapters","NATIVE_TARGETING_KEYS","NATIVE_KEYS","IMAGE","required","title","sponsoredBy","clickUrl","icon","SUPPORTED_TYPES","processNativeAdUnitParams","typeIsSupported","nativeAdUnit","nativeBidder","hasNonNativeBidder","requestedAssets","nativeParams","requiredAssets","returnedAssets","asset","trackers","clickTrackers","impressionTrackers","javascriptTrackers","getNativeTargeting","bidReq","keyValues","getAssetValue","sendPlaceholder","assets","native","setDefaults","syncEnabled","syncsPerBidder","syncDelay","newUserSync","userSyncDependencies","publicApi","queue","getDefaultQueue","hasFiredBidder","Set","numAdapterBids","permittedPixels","usConfig","conf","fireSyncs","browserSupportsCookies","fireImagePixels","loadIframes","forEachFire","add","bidderName","trackingPixelUrl","iframeUrl","incrementAdapterBids","has","canBidderRegisterSync","shouldBidderBeBlocked","filterSettings","isFilterConfigValid","activeConfig","biddersToFilter","filterType","checkForFiltering","activeConfigName","filterField","biddersField","bidderInList","syncUsers","timeout","setTimeout","triggerUserSyncs","enableOverride","enabledBidders","que","getGlobal","newAuctionManager","_auctions","auction","getAuctionId","getAllWinningBids","getWinningBids","getBidsRequested","getBidRequests","getNoBids","getAuctionStatus","AUCTION_COMPLETED","getAdUnits","getAdUnitCodes","createAuction","adUnitCodes","cbTimeout","labels","newAuction","_addAuction","findBidByAdId","getStandardBidderAdServerTargeting","getStandardBidderSettings","JSON_MAPPING","ADSERVER_TARGETING","setStatusForBids","status","BID_STATUS","BID_TARGETING_SET","setBidTargeting","getLastAuctionId","DEFAULT_DEBUG","DEBUG_MODE","DEFAULT_BIDDER_TIMEOUT","DEFAULT_PUBLISHER_DOMAIN","DEFAULT_ENABLE_SEND_ALL_BIDS","DEFAULT_DISABLE_AJAX_TIMEOUT","DEFAULT_BID_CACHE","DEFAULT_TIMEOUTBUFFER","RANDOM","FIXED","VALID_ORDERS","DEFAULT_BIDDER_SEQUENCE","GRANULARITY_OPTIONS","LOW","MEDIUM","HIGH","AUTO","DENSE","CUSTOM","ALL_TOPICS","newConfig","listeners","defaults","resetConfig","_debug","debug","_bidderTimeout","bidderTimeout","_publisherDomain","publisherDomain","_priceGranularity","priceGranularity","validatePriceGranularity","hasGranularity","_customPriceBucket","customPriceBucket","_mediaTypePriceGranularity","mediaTypePriceGranularity","aggregate","item","_sendAllBids","enableSendAllBids","_useBidCache","useBidCache","_bidderSequence","bidderSequence","_timeoutBuffer","timeoutBuffer","_disableAjaxTimeout","disableAjaxTimeout","callSubscribers","memo","topic","option","isValidPriceConfig","subscribe","topics","topicalConfig","listener","unsubscribe","splice","TOPICS","VIDEO_MEDIA_TYPE","OUTSTREAM","INSTREAM","videoAdUnit","videoBidder","videoAdapters","hasNonVideoBidder","videoMediaType","checkVideoBidSetup","vastXml","vastUrl","default","AUCTION_STARTED","AUCTION_IN_PROGRESS","on","BID_ADJUSTMENT","adjustBids","MAX_REQUESTS_PER_ORIGIN","outstandingRequests","sourceInfo","queuedCalls","_adUnits","_labels","_adUnitCodes","_bidderRequests","_bidsReceived","_noBids","_auctionStart","_auctionEnd","_auctionId","_auctionStatus","_callback","_timer","_timeout","_winningBids","_timelyBidders","addBidRequests","addBidReceived","bidsReceived","addNoBid","noBid","getProperties","auctionEnd","auctionStatus","noBids","winningBids","startAuctionTimer","timedOut","timeoutCallback","executeCallback","timer","cleartimer","clearTimeout","timedOutBidders","getTimedOutBids","BID_TIMEOUT","now","AUCTION_END","groupByPlacement","callTimedOutBidders","userSyncConfig","auctionDone","makeBidRequests","run","AUCTION_INIT","callbacks","auctionCallbacks","dispatch","adapterDone","increment","SRA","runIfOriginHasCapacity","hasCapacity","maxRequests","winningBid","callBidWonBidder","callSetTargetingBidder","getTimeout","auctionInstance","outstandingBidsAdded","allAdapterCalledDone","bidderRequestsDone","bidResponseMap","afterBidAdded","bidResponse","getPreparedBidForAuction","tryAddVideoBid","addBidToAuction","NO_BID","doCallbacksIfTimedout","timeToRespond","setupBidTargeting","BID_RESPONSE","addBid","videoCacheKey","callPrebidCache","store","cacheIds","uuid","getCacheUrl","bidObject","responseTimestamp","requestTimestamp","parseFloat","adUnitRenderer","mediaTypeGranularity","priceStringsObj","getPriceBucketString","pbLg","low","pbMg","med","pbHg","high","pbAg","auto","pbDg","dense","pbCg","custom","dealId","getKeyValueTargetingPairs","adserverTargeting","getPriceGranularity","granularity","getPriceByGranularity","createKeyVal","TARGETING_KEYS","bidderSettings","BD_SETTING_STANDARD","BIDDER","AD_ID","PRICE_BUCKET","SIZE","DEAL","SOURCE","FORMAT","UUID","CACHE_ID","targetingKeyVal","kvPair","urlInfo","parseURL","CACHE_HOST","custBidObj","standardSettings","setKeys","sendStandardTargeting","suppressEmptyKeys","bidPriceAdjusted","bidCpmAdjustment","bidsByPlacement","timelyBidders","timedOutBids","setBidderCode","_defaultPrecision","_lgPriceConfig","_mgPriceConfig","_hgPriceConfig","_densePriceConfig","_autoPriceConfig","customConfig","granularityMultiplier","cpmFloat","getCpmStringValue","cpmStr","cap","buckets","prev","curr","bucket","precision","toFixed","getCpmTarget","bucketMin","pow","cpmToFloor","cpmTarget","detectReferer","win","getLevels","levels","walkUpWindows","ancestors","ancestor","getPubUrlStack","stack","defUrl","frameLocation","prevFrame","prevRef","detectedRefererUrl","getCanonicalUrl","isTop","refData","canonicalUrl","refererInfo","numIframes","reachedTop","stackInfo","referer","getRefererInfo","XHR_DONE","ajaxBuilder","parser","XMLHttpRequest","onreadystatechange","readyState","responseText","statusText","ontimeout","formatURL","customHeaders","header","setRequestHeader","preflight","send","_requestCache","_vendorWhitelist","loadExternalScript","moduleCode","script","async","tagSrc","cacheRequest","requestResource","jptScript","onload","elToAppend","sizeConfig","setSizeConfig","getLabels","bidOrAdUnit","activeLabels","labelAll","labelAny","sizeSupported","configs","maps","evaluateSizeConfig","shouldFilter","sizesSupported","resolveStatus","oldSizes","allMediaTypes","active","label","filterResults","after","mediaQuery","ruleMatch","matchMedia","matches","thing","incrementCounter","adunit","getCounter","adunitCounter","wrapURI","uri","impUrl","vastImp","toStorageRequest","vastValue","vastImpUrl","payload","ttlseconds","ttl","customCacheKey","shimStorageCallback","responseBody","ids","requestData","puts","ADD_AD_UNITS","REQUEST_BIDS","SET_TARGETING","AD_RENDER_FAILED","AD_RENDER_FAILED_REASON","PREVENT_WRITING_ON_MAIN_DOCUMENT","NO_AD","EXCEPTION","CANNOT_FIND_AD","MISSING_DOC_OR_ADID","eventValidators","bidWon","checkDefinedPlacement","libLoaded","version","bidSet","setRenderSize","checkAdUnitSetup","normalizedSize","playerSize","plySize","newPlayerSize","nativeObj","aspect_ratios","getAdserverTargetingForAdUnitCodeStr","adunitCode","res","getAdserverTargetingForAdUnitCode","getAdserverTargeting","getAllTargeting","getBids","currentAuctionId","getBidResponses","getBidResponsesForAdUnitCode","setTargetingForGPTAsync","customSlotMatching","targetingSet","resetPresetTargeting","setTargetingForGPT","targetingKey","setTargetingForAst","isApntagDefined","emitAdRenderFail","reason","renderAd","RENDERED","creativeComment","createComment","creativeId","firefoxVerRegx","firefoxVer","overflow","removeAdUnit","requestBids","bidsBackHandler","adUnitMediaTypes","allBidders","bidderRegistry","s2sConfig","s2sBidders","transactionId","bidderMediaTypes","bidderEligible","adUnitsLen","setLatestAuctionForAdUnit","addAdUnits","adUnitArr","onEvent","handler","offEvent","off","bidderAdaptor","registerAnalyticsAdapter","useCache","enableAnalytics","aliasBidder","aliasBidAdapter","getAllPrebidWinningBids","getHighestCpmBids","getHighestCpmBidsFromBidPool","markWinningBidAsUsed","markBidRequest","command","processQueue","called","pbTargetingKeys","MAX_DFP_KEYLENGTH","TTL_BUFFER","isBidNotExpired","isUnusedBid","filters","highestCpmCallback","bucketKey","bidsByBidder","sortByDealAndPriceBucket","adUnitTargeting","hb_deal","hb_pb","newTargeting","latestAuctionForAdUnit","setTargeting","resetPresetTargetingAST","currentKeywords","newKeywords","modifyTag","bidShouldBeAddedToTargeting","getDealBids","standardKeys","getTargetingMap","getWinningBidTargeting","getCustomBidTargeting","getBidLandscapeTargeting","targetKey","flattenTargeting","auctionKeysThreshold","filterTargetingKeys","convertKeysToQueryForm","keyMap","queryString","encodedKeyPair","targetingCopy","targetingMap","sort","accMap","currMap","arr","adUnitQueryString","querySize","targetingObj","p","c","accumulator","targetingConfig","valueArr","astTargeting","keywordsObj","setKeywords","overrideKeyValue","winners","getStandardKeys","winner","targetingValue","substring","bidderCodeTargetingKey","bidderCodeTargeting","mergeAdServerTargeting","concatTargetingValue","currentBidElement","hasSameAdunitCodeAndKey","getCustomKeys","truncateCustomKeys","s2sTestingModule","_bidderRegistry","_aliasRegistry","_s2sConfig","_analyticsRegistry","bidderRequestId","filteredMediaTypes","bid_id","bidRequestsCount","getAdUnitCopyForPrebidServer","adaptersServerSide","adUnitsCopy","doingS2STesting","finalSource","CLIENT","getAdUnitCopyForClientAdapters","adUnitsClientCopy","SERVER","gdprDataHandler","consentData","setConsentData","consentInfo","getConsentData","auctionStart","bidderCodes","clientBidderCodes","clientTestAdapters","bidderMap","getSourceBidderMap","adUnitsContainServerRequests","bidSource","bidderControl","isTestingServerOnly","adUnitsS2SCopy","tid","adUnitCopy","validBids","adUnitBid","reqBid","doneCb","requestCallbacks","requestBidsTimeout","partitions","clientBidRequests","serverBidRequests","s2sAjax","s2sAdapter","s2sBidRequest","ad_units","doneCbs","adapters","BID_REQUESTED","testing","testServerOnly","getSupportedMediaTypes","bidAdaptor","existingAlias","newAdapter","adapterConfig","provider","setS2STestingModule","tryCallBidderMethod","timedOutBidder","prebid","registerVideoSupport","videoSupport","adServers","allEvents","idPaths","EVENT_ID_PATHS","eventsFired","exports","_handlers","_public","_dispatch","eventString","eventPayload","idPath","eventKeys","eventType","_checkAvailableEvent","_handler","getEvents","arrayCopy"],"mappings":"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1C,WAAW,mBAAO,CAAC,EAAc;AACjC,iBAAiB,mBAAO,CAAC,GAAgB;AACzC,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,cAAc,mBAAO,CAAC,EAAS;AAC/B,eAAe,mBAAO,CAAC,EAAwB;AAC/C;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,OAAO;AAC9B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,6BAA6B;AAC7B,0BAA0B;AAC1B,0BAA0B;AAC1B,qBAAqB;AACrB;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,8EAA8E,OAAO;AACrF;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,qBAAqB;AACrB,0BAA0B;AAC1B,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;;;;;;;;AC/Ia;AACb,aAAa,mBAAO,CAAC,EAAW;AAChC,WAAW,mBAAO,CAAC,EAAS;AAC5B,SAAS,mBAAO,CAAC,EAAc;AAC/B,kBAAkB,mBAAO,CAAC,EAAgB;AAC1C,cAAc,mBAAO,CAAC,EAAQ;;AAE9B;AACA;AACA;AACA;AACA,sBAAsB,aAAa;AACnC,GAAG;AACH;;;;;;;;ACbA,aAAa,mBAAO,CAAC,EAAW;AAChC,WAAW,mBAAO,CAAC,E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ACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,oBAAoB;;AAEpB;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA,aAAa,yBAAyB;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,+BAA+B;AAC/B,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA","file":"prebid-core.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tvar parentJsonpFunction = window[\"pbjsChunk\"];\n \twindow[\"pbjsChunk\"] = function webpackJsonpCallback(chunkIds, moreModules, executeModules) {\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [], result;\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(chunkIds, moreModules, executeModules);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n \t\tif(executeModules) {\n \t\t\tfor(i=0; i < executeModules.length; i++) {\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = executeModules[i]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t};\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// objects to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t265: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 664);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bdd0943850ded339cfb4","import { config } from './config';\nimport clone from 'just-clone';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { parse } from './url';\nconst CONSTANTS = require('./constants');\n\nexport { default as deepAccess } from 'dlv/index';\nexport { default as deepSetValue } from 'dset';\n\nvar tArr = 'Array';\nvar tStr = 'String';\nvar tFn = 'Function';\nvar tNumb = 'Number';\nvar tObject = 'Object';\nvar tBoolean = 'Boolean';\nvar toString = Object.prototype.toString;\nlet consoleExists = Boolean(window.console);\nlet consoleLogExists = Boolean(consoleExists && window.console.log);\nlet consoleInfoExists = Boolean(consoleExists && window.console.info);\nlet consoleWarnExists = Boolean(consoleExists && window.console.warn);\nlet consoleErrorExists = Boolean(consoleExists && window.console.error);\n\n// this allows stubbing of utility functions that are used internally by other utility functions\nexport const internal = {\n  checkCookieSupport,\n  createTrackPixelIframeHtml,\n  getWindowSelf,\n  getWindowTop,\n  getAncestorOrigins,\n  getTopFrameReferrer,\n  getWindowLocation,\n  getTopWindowLocation,\n  insertUserSyncIframe,\n  insertElement,\n  isFn,\n  triggerPixel,\n  logError,\n  logWarn,\n  logMessage,\n  logInfo\n};\n\nvar uniqueRef = {};\nexport let bind = function(a, b) { return b; }.bind(null, 1, uniqueRef)() === uniqueRef\n  ? Function.prototype.bind\n  : function(bind) {\n    var self = this;\n    var args = Array.prototype.slice.call(arguments, 1);\n    return function() {\n      return self.apply(bind, args.concat(Array.prototype.slice.call(arguments)));\n    };\n  };\n\n/*\n *   Substitutes into a string from a given map using the token\n *   Usage\n *   var str = 'text %%REPLACE%% this text with %%SOMETHING%%';\n *   var map = {};\n *   map['replace'] = 'it was subbed';\n *   map['something'] = 'something else';\n *   console.log(replaceTokenInString(str, map, '%%')); => \"text it was subbed this text with something else\"\n */\nexport function replaceTokenInString(str, map, token) {\n  _each(map, function (value, key) {\n    value = (value === undefined) ? '' : value;\n\n    var keyString = token + key.toUpperCase() + token;\n    var re = new RegExp(keyString, 'g');\n\n    str = str.replace(re, value);\n  });\n\n  return str;\n}\n\n/* utility method to get incremental integer starting from 1 */\nvar getIncrementalInteger = (function () {\n  var count = 0;\n  return function () {\n    count++;\n    return count;\n  };\n})();\n\n// generate a random string (to be used as a dynamic JSONP callback)\nexport function getUniqueIdentifierStr() {\n  return getIncrementalInteger() + Math.random().toString(16).substr(2);\n}\n\n/**\n * Returns a random v4 UUID of the form xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx,\n * where each x is replaced with a random hexadecimal digit from 0 to f,\n * and y is replaced with a random hexadecimal digit from 8 to b.\n * https://gist.github.com/jed/982883 via node-uuid\n */\nexport function generateUUID(placeholder) {\n  return placeholder\n    ? (placeholder ^ _getRandomData() >> placeholder / 4).toString(16)\n    : ([1e7] + -1e3 + -4e3 + -8e3 + -1e11).replace(/[018]/g, generateUUID);\n}\n\n/**\n * Returns random data using the Crypto API if available and Math.random if not\n * Method is from https://gist.github.com/jed/982883 like generateUUID, direct link https://gist.github.com/jed/982883#gistcomment-45104\n */\nfunction _getRandomData() {\n  if (window && window.crypto && window.crypto.getRandomValues) {\n    return crypto.getRandomValues(new Uint8Array(1))[0] % 16;\n  } else {\n    return Math.random() * 16;\n  }\n}\n\nexport function getBidIdParameter(key, paramsObj) {\n  if (paramsObj && paramsObj[key]) {\n    return paramsObj[key];\n  }\n\n  return '';\n}\n\nexport function tryAppendQueryString(existingUrl, key, value) {\n  if (value) {\n    return existingUrl += key + '=' + encodeURIComponent(value) + '&';\n  }\n\n  return existingUrl;\n}\n\n// parse a query string object passed in bid params\n// bid params should be an object such as {key: \"value\", key1 : \"value1\"}\nexport function parseQueryStringParameters(queryObj) {\n  let result = '';\n  for (var k in queryObj) {\n    if (queryObj.hasOwnProperty(k)) { result += k + '=' + encodeURIComponent(queryObj[k]) + '&'; }\n  }\n\n  return result;\n}\n\n// transform an AdServer targeting bids into a query string to send to the adserver\nexport function transformAdServerTargetingObj(targeting) {\n  // we expect to receive targeting for a single slot at a time\n  if (targeting && Object.getOwnPropertyNames(targeting).length > 0) {\n    return getKeys(targeting)\n      .map(key => `${key}=${encodeURIComponent(getValue(targeting, key))}`).join('&');\n  } else {\n    return '';\n  }\n}\n\n/**\n * Read an adUnit object and return the sizes used in an [[728, 90]] format (even if they had [728, 90] defined)\n * Preference is given to the `adUnit.mediaTypes.banner.sizes` object over the `adUnit.sizes`\n * @param {object} adUnit one adUnit object from the normal list of adUnits\n * @returns {Array.<number[]>} array of arrays containing numeric sizes\n */\nexport function getAdUnitSizes(adUnit) {\n  if (!adUnit) {\n    return;\n  }\n\n  let sizes = [];\n  if (adUnit.mediaTypes && adUnit.mediaTypes.banner && Array.isArray(adUnit.mediaTypes.banner.sizes)) {\n    let bannerSizes = adUnit.mediaTypes.banner.sizes;\n    if (Array.isArray(bannerSizes[0])) {\n      sizes = bannerSizes;\n    } else {\n      sizes.push(bannerSizes);\n    }\n  } else if (Array.isArray(adUnit.sizes)) {\n    if (Array.isArray(adUnit.sizes[0])) {\n      sizes = adUnit.sizes;\n    } else {\n      sizes.push(adUnit.sizes);\n    }\n  }\n  return sizes;\n}\n\n/**\n * Parse a GPT-Style general size Array like `[[300, 250]]` or `\"300x250,970x90\"` into an array of sizes `[\"300x250\"]` or '['300x250', '970x90']'\n * @param  {(Array.<number[]>|Array.<number>)} sizeObj Input array or double array [300,250] or [[300,250], [728,90]]\n * @return {Array.<string>}  Array of strings like `[\"300x250\"]` or `[\"300x250\", \"728x90\"]`\n */\nexport function parseSizesInput(sizeObj) {\n  var parsedSizes = [];\n\n  // if a string for now we can assume it is a single size, like \"300x250\"\n  if (typeof sizeObj === 'string') {\n    // multiple sizes will be comma-separated\n    var sizes = sizeObj.split(',');\n\n    // regular expression to match strigns like 300x250\n    // start of line, at least 1 number, an \"x\" , then at least 1 number, and the then end of the line\n    var sizeRegex = /^(\\d)+x(\\d)+$/i;\n    if (sizes) {\n      for (var curSizePos in sizes) {\n        if (hasOwn(sizes, curSizePos) && sizes[curSizePos].match(sizeRegex)) {\n          parsedSizes.push(sizes[curSizePos]);\n        }\n      }\n    }\n  } else if (typeof sizeObj === 'object') {\n    var sizeArrayLength = sizeObj.length;\n\n    // don't process empty array\n    if (sizeArrayLength > 0) {\n      // if we are a 2 item array of 2 numbers, we must be a SingleSize array\n      if (sizeArrayLength === 2 && typeof sizeObj[0] === 'number' && typeof sizeObj[1] === 'number') {\n        parsedSizes.push(parseGPTSingleSizeArray(sizeObj));\n      } else {\n        // otherwise, we must be a MultiSize array\n        for (var i = 0; i < sizeArrayLength; i++) {\n          parsedSizes.push(parseGPTSingleSizeArray(sizeObj[i]));\n        }\n      }\n    }\n  }\n\n  return parsedSizes;\n}\n\n// Parse a GPT style single size array, (i.e [300, 250])\n// into an AppNexus style string, (i.e. 300x250)\nexport function parseGPTSingleSizeArray(singleSize) {\n  if (isValidGPTSingleSize(singleSize)) {\n    return singleSize[0] + 'x' + singleSize[1];\n  }\n}\n\n// Parse a GPT style single size array, (i.e [300, 250])\n// into OpenRTB-compatible (imp.banner.w/h, imp.banner.format.w/h, imp.video.w/h) object(i.e. {w:300, h:250})\nexport function parseGPTSingleSizeArrayToRtbSize(singleSize) {\n  if (isValidGPTSingleSize(singleSize)) {\n    return {w: singleSize[0], h: singleSize[1]};\n  }\n}\n\nfunction isValidGPTSingleSize(singleSize) {\n  // if we aren't exactly 2 items in this array, it is invalid\n  return isArray(singleSize) && singleSize.length === 2 && (!isNaN(singleSize[0]) && !isNaN(singleSize[1]));\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowLocation() {\n  if (inIframe()) {\n    let loc;\n    try {\n      loc = internal.getAncestorOrigins() || internal.getTopFrameReferrer();\n    } catch (e) {\n      logInfo('could not obtain top window location', e);\n    }\n    if (loc) return parse(loc, {'decodeSearchAsString': true});\n  }\n  return internal.getWindowLocation();\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopFrameReferrer() {\n  try {\n    // force an exception in x-domain environments. #1509\n    window.top.location.toString();\n    let referrerLoc = '';\n    let currentWindow;\n    do {\n      currentWindow = currentWindow ? currentWindow.parent : window;\n      if (currentWindow.document && currentWindow.document.referrer) {\n        referrerLoc = currentWindow.document.referrer;\n      }\n    }\n    while (currentWindow !== window.top);\n    return referrerLoc;\n  } catch (e) {\n    return window.document.referrer;\n  }\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getAncestorOrigins() {\n  if (window.document.location && window.document.location.ancestorOrigins &&\n    window.document.location.ancestorOrigins.length >= 1) {\n    return window.document.location.ancestorOrigins[window.document.location.ancestorOrigins.length - 1];\n  }\n}\n\nexport function getWindowTop() {\n  return window.top;\n}\n\nexport function getWindowSelf() {\n  return window.self;\n}\n\nexport function getWindowLocation() {\n  return window.location;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowUrl() {\n  let href;\n  try {\n    href = internal.getTopWindowLocation().href;\n  } catch (e) {\n    href = '';\n  }\n  return href;\n}\n\n/**\n * @deprecated This function will be removed soon. Use http://prebid.org/dev-docs/bidder-adaptor.html#referrers\n */\nexport function getTopWindowReferrer() {\n  try {\n    return window.top.document.referrer;\n  } catch (e) {\n    return document.referrer;\n  }\n}\n\n/**\n * Wrappers to console.(log | info | warn | error). Takes N arguments, the same as the native methods\n */\nexport function logMessage() {\n  if (debugTurnedOn() && consoleLogExists) {\n    console.log.apply(console, decorateLog(arguments, 'MESSAGE:'));\n  }\n}\n\nexport function logInfo() {\n  if (debugTurnedOn() && consoleInfoExists) {\n    console.info.apply(console, decorateLog(arguments, 'INFO:'));\n  }\n}\n\nexport function logWarn() {\n  if (debugTurnedOn() && consoleWarnExists) {\n    console.warn.apply(console, decorateLog(arguments, 'WARNING:'));\n  }\n}\n\nexport function logError() {\n  if (debugTurnedOn() && consoleErrorExists) {\n    console.error.apply(console, decorateLog(arguments, 'ERROR:'));\n  }\n}\n\nfunction decorateLog(args, prefix) {\n  args = [].slice.call(args);\n  prefix && args.unshift(prefix);\n  args.unshift('display: inline-block; color: #fff; background: #3b88c3; padding: 1px 4px; border-radius: 3px;');\n  args.unshift('%cPrebid');\n  return args;\n}\n\nexport function hasConsoleLogger() {\n  return consoleLogExists;\n}\n\nexport function debugTurnedOn() {\n  return !!config.getConfig('debug');\n}\n\nexport function createInvisibleIframe() {\n  var f = document.createElement('iframe');\n  f.id = getUniqueIdentifierStr();\n  f.height = 0;\n  f.width = 0;\n  f.border = '0px';\n  f.hspace = '0';\n  f.vspace = '0';\n  f.marginWidth = '0';\n  f.marginHeight = '0';\n  f.style.border = '0';\n  f.scrolling = 'no';\n  f.frameBorder = '0';\n  f.src = 'about:blank';\n  f.style.display = 'none';\n  return f;\n}\n\n/*\n *   Check if a given parameter name exists in query string\n *   and if it does return the value\n */\nexport function getParameterByName(name) {\n  var regexS = '[\\\\?&]' + name + '=([^&#]*)';\n  var regex = new RegExp(regexS);\n  var results = regex.exec(window.location.search);\n  if (results === null) {\n    return '';\n  }\n\n  return decodeURIComponent(results[1].replace(/\\+/g, ' '));\n}\n\n/**\n * This function validates paramaters.\n * @param  {Object} paramObj          [description]\n * @param  {string[]} requiredParamsArr [description]\n * @return {boolean}                   Bool if paramaters are valid\n */\nexport function hasValidBidRequest(paramObj, requiredParamsArr, adapter) {\n  var found = false;\n\n  function findParam(value, key) {\n    if (key === requiredParamsArr[i]) {\n      found = true;\n    }\n  }\n\n  for (var i = 0; i < requiredParamsArr.length; i++) {\n    found = false;\n\n    _each(paramObj, findParam);\n\n    if (!found) {\n      logError('Params are missing for bid request. One of these required paramaters are missing: ' + requiredParamsArr, adapter);\n      return false;\n    }\n  }\n\n  return true;\n}\n\n// Handle addEventListener gracefully in older browsers\nexport function addEventHandler(element, event, func) {\n  if (element.addEventListener) {\n    element.addEventListener(event, func, true);\n  } else if (element.attachEvent) {\n    element.attachEvent('on' + event, func);\n  }\n}\n/**\n * Return if the object is of the\n * given type.\n * @param {*} object to test\n * @param {String} _t type string (e.g., Array)\n * @return {Boolean} if object is of type _t\n */\nexport function isA(object, _t) {\n  return toString.call(object) === '[object ' + _t + ']';\n}\n\nexport function isFn(object) {\n  return isA(object, tFn);\n}\n\nexport function isStr(object) {\n  return isA(object, tStr);\n}\n\nexport function isArray(object) {\n  return isA(object, tArr);\n}\n\nexport function isNumber(object) {\n  return isA(object, tNumb);\n}\n\nexport function isPlainObject(object) {\n  return isA(object, tObject);\n}\n\nexport function isBoolean(object) {\n  return isA(object, tBoolean);\n}\n\n/**\n * Return if the object is \"empty\";\n * this includes falsey, no keys, or no items at indices\n * @param {*} object object to test\n * @return {Boolean} if object is empty\n */\nexport function isEmpty(object) {\n  if (!object) return true;\n  if (isArray(object) || isStr(object)) {\n    return !(object.length > 0);\n  }\n\n  for (var k in object) {\n    if (hasOwnProperty.call(object, k)) return false;\n  }\n\n  return true;\n}\n\n/**\n * Return if string is empty, null, or undefined\n * @param str string to test\n * @returns {boolean} if string is empty\n */\nexport function isEmptyStr(str) {\n  return isStr(str) && (!str || str.length === 0);\n}\n\n/**\n * Iterate object with the function\n * falls back to es5 `forEach`\n * @param {Array|Object} object\n * @param {Function(value, key, object)} fn\n */\nexport function _each(object, fn) {\n  if (isEmpty(object)) return;\n  if (isFn(object.forEach)) return object.forEach(fn, this);\n\n  var k = 0;\n  var l = object.length;\n\n  if (l > 0) {\n    for (; k < l; k++) fn(object[k], k, object);\n  } else {\n    for (k in object) {\n      if (hasOwnProperty.call(object, k)) fn.call(this, object[k], k);\n    }\n  }\n}\n\nexport function contains(a, obj) {\n  if (isEmpty(a)) {\n    return false;\n  }\n\n  if (isFn(a.indexOf)) {\n    return a.indexOf(obj) !== -1;\n  }\n\n  var i = a.length;\n  while (i--) {\n    if (a[i] === obj) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport let indexOf = (function () {\n  if (Array.prototype.indexOf) {\n    return Array.prototype.indexOf;\n  }\n\n  // ie8 no longer supported\n  // return polyfills.indexOf;\n}());\n\n/**\n * Map an array or object into another array\n * given a function\n * @param {Array|Object} object\n * @param {Function(value, key, object)} callback\n * @return {Array}\n */\nexport function _map(object, callback) {\n  if (isEmpty(object)) return [];\n  if (isFn(object.map)) return object.map(callback);\n  var output = [];\n  _each(object, function (value, key) {\n    output.push(callback(value, key, object));\n  });\n\n  return output;\n}\n\nexport function hasOwn(objectToCheck, propertyToCheckFor) {\n  if (objectToCheck.hasOwnProperty) {\n    return objectToCheck.hasOwnProperty(propertyToCheckFor);\n  } else {\n    return (typeof objectToCheck[propertyToCheckFor] !== 'undefined') && (objectToCheck.constructor.prototype[propertyToCheckFor] !== objectToCheck[propertyToCheckFor]);\n  }\n};\n\n/*\n* Inserts an element(elm) as targets child, by default as first child\n* @param {HTMLElement} elm\n* @param {HTMLElement} [doc]\n* @param {HTMLElement} [target]\n* @param {Boolean} [asLastChildChild]\n* @return {HTMLElement}\n*/\nexport function insertElement(elm, doc, target, asLastChildChild) {\n  doc = doc || document;\n  let parentEl;\n  if (target) {\n    parentEl = doc.getElementsByTagName(target);\n  } else {\n    parentEl = doc.getElementsByTagName('head');\n  }\n  try {\n    parentEl = parentEl.length ? parentEl : doc.getElementsByTagName('body');\n    if (parentEl.length) {\n      parentEl = parentEl[0];\n      let insertBeforeEl = asLastChildChild ? null : parentEl.firstChild;\n      return parentEl.insertBefore(elm, insertBeforeEl);\n    }\n  } catch (e) {}\n}\n\n/**\n * Inserts an image pixel with the specified `url` for cookie sync\n * @param {string} url URL string of the image pixel to load\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function triggerPixel(url, done) {\n  const img = new Image();\n  if (done && internal.isFn(done)) {\n    img.addEventListener('load', done);\n    img.addEventListener('error', done);\n  }\n  img.src = url;\n}\n\nexport function callBurl({ source, burl }) {\n  if (source === CONSTANTS.S2S.SRC && burl) {\n    internal.triggerPixel(burl);\n  }\n}\n\n/**\n * Inserts an empty iframe with the specified `html`, primarily used for tracking purposes\n * (though could be for other purposes)\n * @param {string} htmlCode snippet of HTML code used for tracking purposes\n */\nexport function insertHtmlIntoIframe(htmlCode) {\n  if (!htmlCode) {\n    return;\n  }\n\n  let iframe = document.createElement('iframe');\n  iframe.id = getUniqueIdentifierStr();\n  iframe.width = 0;\n  iframe.height = 0;\n  iframe.hspace = '0';\n  iframe.vspace = '0';\n  iframe.marginWidth = '0';\n  iframe.marginHeight = '0';\n  iframe.style.display = 'none';\n  iframe.style.height = '0px';\n  iframe.style.width = '0px';\n  iframe.scrolling = 'no';\n  iframe.frameBorder = '0';\n  iframe.allowtransparency = 'true';\n\n  internal.insertElement(iframe, document, 'body');\n\n  iframe.contentWindow.document.open();\n  iframe.contentWindow.document.write(htmlCode);\n  iframe.contentWindow.document.close();\n}\n\n/**\n * Inserts empty iframe with the specified `url` for cookie sync\n * @param  {string} url URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {function} [done] an optional exit callback, used when this usersync pixel is added during an async process\n */\nexport function insertUserSyncIframe(url, done) {\n  let iframeHtml = internal.createTrackPixelIframeHtml(url, false, 'allow-scripts allow-same-origin');\n  let div = document.createElement('div');\n  div.innerHTML = iframeHtml;\n  let iframe = div.firstChild;\n  if (done && internal.isFn(done)) {\n    iframe.addEventListener('load', done);\n    iframe.addEventListener('error', done);\n  }\n  internal.insertElement(iframe, document, 'html', true);\n};\n\n/**\n * Creates a snippet of HTML that retrieves the specified `url`\n * @param  {string} url URL to be requested\n * @return {string}     HTML snippet that contains the img src = set to `url`\n */\nexport function createTrackPixelHtml(url) {\n  if (!url) {\n    return '';\n  }\n\n  let escapedUrl = encodeURI(url);\n  let img = '<div style=\"position:absolute;left:0px;top:0px;visibility:hidden;\">';\n  img += '<img src=\"' + escapedUrl + '\"></div>';\n  return img;\n};\n\n/**\n * Creates a snippet of Iframe HTML that retrieves the specified `url`\n * @param  {string} url plain URL to be requested\n * @param  {string} encodeUri boolean if URL should be encoded before inserted. Defaults to true\n * @param  {string} sandbox string if provided the sandbox attribute will be included with the given value\n * @return {string}     HTML snippet that contains the iframe src = set to `url`\n */\nexport function createTrackPixelIframeHtml(url, encodeUri = true, sandbox = '') {\n  if (!url) {\n    return '';\n  }\n  if (encodeUri) {\n    url = encodeURI(url);\n  }\n  if (sandbox) {\n    sandbox = `sandbox=\"${sandbox}\"`;\n  }\n\n  return `<iframe ${sandbox} id=\"${getUniqueIdentifierStr()}\"\n      frameborder=\"0\"\n      allowtransparency=\"true\"\n      marginheight=\"0\" marginwidth=\"0\"\n      width=\"0\" hspace=\"0\" vspace=\"0\" height=\"0\"\n      style=\"height:0px;width:0px;display:none;\"\n      scrolling=\"no\"\n      src=\"${url}\">\n    </iframe>`;\n}\n\n/**\n * Returns iframe document in a browser agnostic way\n * @param  {Object} iframe reference\n * @return {Object}        iframe `document` reference\n */\nexport function getIframeDocument(iframe) {\n  if (!iframe) {\n    return;\n  }\n\n  let doc;\n  try {\n    if (iframe.contentWindow) {\n      doc = iframe.contentWindow.document;\n    } else if (iframe.contentDocument.document) {\n      doc = iframe.contentDocument.document;\n    } else {\n      doc = iframe.contentDocument;\n    }\n  } catch (e) {\n    internal.logError('Cannot get iframe document', e);\n  }\n\n  return doc;\n}\n\nexport function getValueString(param, val, defaultValue) {\n  if (val === undefined || val === null) {\n    return defaultValue;\n  }\n  if (isStr(val)) {\n    return val;\n  }\n  if (isNumber(val)) {\n    return val.toString();\n  }\n  internal.logWarn('Unsuported type for param: ' + param + ' required type: String');\n}\n\nexport function uniques(value, index, arry) {\n  return arry.indexOf(value) === index;\n}\n\nexport function flatten(a, b) {\n  return a.concat(b);\n}\n\nexport function getBidRequest(id, bidderRequests) {\n  if (!id) {\n    return;\n  }\n  let bidRequest;\n  bidderRequests.some(bidderRequest => {\n    let result = find(bidderRequest.bids, bid => ['bidId', 'adId', 'bid_id'].some(type => bid[type] === id));\n    if (result) {\n      bidRequest = result;\n    }\n    return result;\n  });\n  return bidRequest;\n}\n\nexport function getKeys(obj) {\n  return Object.keys(obj);\n}\n\nexport function getValue(obj, key) {\n  return obj[key];\n}\n\n/**\n * Get the key of an object for a given value\n */\nexport function getKeyByValue(obj, value) {\n  for (let prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      if (obj[prop] === value) {\n        return prop;\n      }\n    }\n  }\n}\n\nexport function getBidderCodes(adUnits = $$PREBID_GLOBAL$$.adUnits) {\n  // this could memoize adUnits\n  return adUnits.map(unit => unit.bids.map(bid => bid.bidder)\n    .reduce(flatten, [])).reduce(flatten).filter(uniques);\n}\n\nexport function isGptPubadsDefined() {\n  if (window.googletag && isFn(window.googletag.pubads) && isFn(window.googletag.pubads().getSlots)) {\n    return true;\n  }\n}\n\n// This function will get highest cpm value bid, in case of tie it will return the bid with lowest timeToRespond\nexport const getHighestCpm = getHighestCpmCallback('timeToRespond', (previous, current) => previous > current);\n\n// This function will get the oldest hightest cpm value bid, in case of tie it will return the bid which came in first\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2448\nexport const getOldestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous > current);\n\n// This function will get the latest hightest cpm value bid, in case of tie it will return the bid which came in last\n// Use case for tie: https://github.com/prebid/Prebid.js/issues/2539\nexport const getLatestHighestCpmBid = getHighestCpmCallback('responseTimestamp', (previous, current) => previous < current);\n\nfunction getHighestCpmCallback(useTieBreakerProperty, tieBreakerCallback) {\n  return (previous, current) => {\n    if (previous.cpm === current.cpm) {\n      return tieBreakerCallback(previous[useTieBreakerProperty], current[useTieBreakerProperty]) ? current : previous;\n    }\n    return previous.cpm < current.cpm ? current : previous;\n  }\n}\n\n/**\n * FisherYates shuffle\n * http://stackoverflow.com/a/6274398\n * https://bost.ocks.org/mike/shuffle/\n * istanbul ignore next\n */\nexport function shuffle(array) {\n  let counter = array.length;\n\n  // while there are elements in the array\n  while (counter > 0) {\n    // pick a random index\n    let index = Math.floor(Math.random() * counter);\n\n    // decrease counter by 1\n    counter--;\n\n    // and swap the last element with it\n    let temp = array[counter];\n    array[counter] = array[index];\n    array[index] = temp;\n  }\n\n  return array;\n}\n\nexport function adUnitsFilter(filter, bid) {\n  return includes(filter, bid && bid.adUnitCode);\n}\n\n/**\n * Check if parent iframe of passed document supports content rendering via 'srcdoc' property\n * @param {HTMLDocument} doc document to check support of 'srcdoc'\n */\nexport function isSrcdocSupported(doc) {\n  // Firefox is excluded due to https://bugzilla.mozilla.org/show_bug.cgi?id=1265961\n  return doc.defaultView && doc.defaultView.frameElement &&\n    'srcdoc' in doc.defaultView.frameElement && !/firefox/i.test(navigator.userAgent);\n}\n\nexport function deepClone(obj) {\n  return clone(obj);\n}\n\nexport function inIframe() {\n  try {\n    return internal.getWindowSelf() !== internal.getWindowTop();\n  } catch (e) {\n    return true;\n  }\n}\n\nexport function isSafariBrowser() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n}\n\nexport function replaceAuctionPrice(str, cpm) {\n  if (!str) return;\n  return str.replace(/\\$\\{AUCTION_PRICE\\}/g, cpm);\n}\n\nexport function timestamp() {\n  return new Date().getTime();\n}\n\nexport function checkCookieSupport() {\n  if (window.navigator.cookieEnabled || !!document.cookie.length) {\n    return true;\n  }\n}\nexport function cookiesAreEnabled() {\n  if (internal.checkCookieSupport()) {\n    return true;\n  }\n  window.document.cookie = 'prebid.cookieTest';\n  return window.document.cookie.indexOf('prebid.cookieTest') != -1;\n}\n\nexport function getCookie(name) {\n  let m = window.document.cookie.match('(^|;)\\\\s*' + name + '\\\\s*=\\\\s*([^;]*)\\\\s*(;|$)');\n  return m ? decodeURIComponent(m[2]) : null;\n}\n\nexport function setCookie(key, value, expires) {\n  document.cookie = `${key}=${encodeURIComponent(value)}${(expires !== '') ? `; expires=${expires}` : ''}; path=/`;\n}\n\n/**\n * @returns {boolean}\n */\nexport function localStorageIsEnabled () {\n  try {\n    localStorage.setItem('prebid.cookieTest', '1');\n    return localStorage.getItem('prebid.cookieTest') === '1';\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Given a function, return a function which only executes the original after\n * it's been called numRequiredCalls times.\n *\n * Note that the arguments from the previous calls will *not* be forwarded to the original function.\n * Only the final call's arguments matter.\n *\n * @param {function} func The function which should be executed, once the returned function has been executed\n *   numRequiredCalls times.\n * @param {int} numRequiredCalls The number of times which the returned function needs to be called before\n *   func is.\n */\nexport function delayExecution(func, numRequiredCalls) {\n  if (numRequiredCalls < 1) {\n    throw new Error(`numRequiredCalls must be a positive number. Got ${numRequiredCalls}`);\n  }\n  let numCalls = 0;\n  return function () {\n    numCalls++;\n    if (numCalls === numRequiredCalls) {\n      func.apply(null, arguments);\n    }\n  }\n}\n\n/**\n * https://stackoverflow.com/a/34890276/428704\n * @export\n * @param {array} xs\n * @param {string} key\n * @returns {Object} {${key_value}: ${groupByArray}, key_value: {groupByArray}}\n */\nexport function groupBy(xs, key) {\n  return xs.reduce(function(rv, x) {\n    (rv[x[key]] = rv[x[key]] || []).push(x);\n    return rv;\n  }, {});\n}\n\n/**\n * Returns content for a friendly iframe to execute a URL in script tag\n * @param {string} url URL to be executed in a script tag in a friendly iframe\n * <!--PRE_SCRIPT_TAG_MACRO--> and <!--POST_SCRIPT_TAG_MACRO--> are macros left to be replaced if required\n */\nexport function createContentToExecuteExtScriptInFriendlyFrame(url) {\n  if (!url) {\n    return '';\n  }\n\n  return `<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\"><html><head><base target=\"_top\" /><script>inDapIF=true;</script></head><body><!--PRE_SCRIPT_TAG_MACRO--><script src=\"${url}\"></script><!--POST_SCRIPT_TAG_MACRO--></body></html>`;\n}\n\n/**\n * Build an object consisting of only defined parameters to avoid creating an\n * object with defined keys and undefined values.\n * @param {Object} object The object to pick defined params out of\n * @param {string[]} params An array of strings representing properties to look for in the object\n * @returns {Object} An object containing all the specified values that are defined\n */\nexport function getDefinedParams(object, params) {\n  return params\n    .filter(param => object[param])\n    .reduce((bid, param) => Object.assign(bid, { [param]: object[param] }), {});\n}\n\n/**\n * @typedef {Object} MediaTypes\n * @property {Object} banner banner configuration\n * @property {Object} native native configuration\n * @property {Object} video video configuration\n */\n\n/**\n * Validates an adunit's `mediaTypes` parameter\n * @param {MediaTypes} mediaTypes mediaTypes parameter to validate\n * @return {boolean} If object is valid\n */\nexport function isValidMediaTypes(mediaTypes) {\n  const SUPPORTED_MEDIA_TYPES = ['banner', 'native', 'video'];\n  const SUPPORTED_STREAM_TYPES = ['instream', 'outstream', 'adpod'];\n\n  const types = Object.keys(mediaTypes);\n\n  if (!types.every(type => includes(SUPPORTED_MEDIA_TYPES, type))) {\n    return false;\n  }\n\n  if (mediaTypes.video && mediaTypes.video.context) {\n    return includes(SUPPORTED_STREAM_TYPES, mediaTypes.video.context);\n  }\n\n  return true;\n}\n\nexport function getBidderRequest(bidRequests, bidder, adUnitCode) {\n  return find(bidRequests, request => {\n    return request.bids\n      .filter(bid => bid.bidder === bidder && bid.adUnitCode === adUnitCode).length > 0;\n  }) || { start: null, auctionId: null };\n}\n/**\n * Returns user configured bidder params from adunit\n * @param {Object} adUnits\n * @param {string} adUnitCode code\n * @param {string} bidder code\n * @return {Array} user configured param for the given bidder adunit configuration\n */\nexport function getUserConfiguredParams(adUnits, adUnitCode, bidder) {\n  return adUnits\n    .filter(adUnit => adUnit.code === adUnitCode)\n    .map((adUnit) => adUnit.bids)\n    .reduce(flatten, [])\n    .filter((bidderData) => bidderData.bidder === bidder)\n    .map((bidderData) => bidderData.params || {});\n}\n/**\n * Returns the origin\n */\nexport function getOrigin() {\n  // IE10 does not have this property. https://gist.github.com/hbogs/7908703\n  if (!window.location.origin) {\n    return window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n  } else {\n    return window.location.origin;\n  }\n}\n\n/**\n * Returns Do Not Track state\n */\nexport function getDNT() {\n  return navigator.doNotTrack === '1' || window.doNotTrack === '1' || navigator.msDoNotTrack === '1' || navigator.doNotTrack === 'yes';\n}\n\nconst compareCodeAndSlot = (slot, adUnitCode) => slot.getAdUnitPath() === adUnitCode || slot.getSlotElementId() === adUnitCode;\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {Object} slot GoogleTag slot\n * @return {function} filter function\n */\nexport function isAdUnitCodeMatchingSlot(slot) {\n  return (adUnitCode) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Returns filter function to match adUnitCode in slot\n * @param {string} adUnitCode AdUnit code\n * @return {function} filter function\n */\nexport function isSlotMatchingAdUnitCode(adUnitCode) {\n  return (slot) => compareCodeAndSlot(slot, adUnitCode);\n}\n\n/**\n * Constructs warning message for when unsupported bidders are dropped from an adunit\n * @param {Object} adUnit ad unit from which the bidder is being dropped\n * @param {string} bidder bidder code that is not compatible with the adUnit\n * @return {string} warning message to display when condition is met\n */\nexport function unsupportedBidderMessage(adUnit, bidder) {\n  const mediaType = Object.keys(adUnit.mediaTypes || {'banner': 'banner'}).join(', ');\n\n  return `\n    ${adUnit.code} is a ${mediaType} ad unit\n    containing bidders that don't support ${mediaType}: ${bidder}.\n    This bidder won't fetch demand.\n  `;\n}\n\n/**\n * Delete property from object\n * @param {Object} object\n * @param {string} prop\n * @return {Object} object\n */\nexport function deletePropertyFromObject(object, prop) {\n  let result = Object.assign({}, object);\n  delete result[prop];\n  return result;\n}\n\n/**\n * Checks input is integer or not\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n * @param {*} value\n */\nexport function isInteger(value) {\n  if (Number.isInteger) {\n    return Number.isInteger(value);\n  } else {\n    return typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n  }\n}\n\n/**\n * Converts a string value in camel-case to underscore eg 'placementId' becomes 'placement_id'\n * @param {string} value string value to convert\n */\nexport function convertCamelToUnderscore(value) {\n  return value.replace(/(?:^|\\.?)([A-Z])/g, function (x, y) { return '_' + y.toLowerCase() }).replace(/^_/, '');\n}\n\n/**\n * Returns a new object with undefined properties removed from given object\n * @param obj the object to clean\n */\nexport function cleanObj(obj) {\n  return Object.keys(obj).reduce((newObj, key) => {\n    if (typeof obj[key] !== 'undefined') {\n      newObj[key] = obj[key];\n    }\n    return newObj;\n  }, {})\n}\n\n/**\n * Create a new object with selected properties.  Also allows property renaming and transform functions.\n * @param obj the original object\n * @param properties An array of desired properties\n */\nexport function pick(obj, properties) {\n  if (typeof obj !== 'object') {\n    return {};\n  }\n  return properties.reduce((newObj, prop, i) => {\n    if (typeof prop === 'function') {\n      return newObj;\n    }\n\n    let newProp = prop;\n    let match = prop.match(/^(.+?)\\sas\\s(.+?)$/i);\n\n    if (match) {\n      prop = match[1];\n      newProp = match[2];\n    }\n\n    let value = obj[prop];\n    if (typeof properties[i + 1] === 'function') {\n      value = properties[i + 1](value, newObj);\n    }\n    if (typeof value !== 'undefined') {\n      newObj[newProp] = value;\n    }\n\n    return newObj;\n  }, {});\n}\n\n/**\n * Converts an object of arrays (either strings or numbers) into an array of objects containing key and value properties\n * normally read from bidder params\n * eg { foo: ['bar', 'baz'], fizz: ['buzz'] }\n * becomes [{ key: 'foo', value: ['bar', 'baz']}, {key: 'fizz', value: ['buzz']}]\n * @param {Object} keywords object of arrays representing keyvalue pairs\n * @param {string} paramName name of parent object (eg 'keywords') containing keyword data, used in error handling\n */\nexport function transformBidderParamKeywords(keywords, paramName = 'keywords') {\n  let arrs = [];\n\n  _each(keywords, (v, k) => {\n    if (isArray(v)) {\n      let values = [];\n      _each(v, (val) => {\n        val = getValueString(paramName + '.' + k, val);\n        if (val || val === '') { values.push(val); }\n      });\n      v = values;\n    } else {\n      v = getValueString(paramName + '.' + k, v);\n      if (isStr(v)) {\n        v = [v];\n      } else {\n        return;\n      } // unsuported types - don't send a key\n    }\n    arrs.push({key: k, value: v});\n  });\n\n  return arrs;\n}\n\n/**\n * Try to convert a value to a type.\n * If it can't be done, the value will be returned.\n *\n * @param {string} typeToConvert The target type. e.g. \"string\", \"number\", etc.\n * @param {*} value The value to be converted into typeToConvert.\n */\nfunction tryConvertType(typeToConvert, value) {\n  if (typeToConvert === 'string') {\n    return value && value.toString();\n  } else if (typeToConvert === 'number') {\n    return Number(value);\n  } else {\n    return value;\n  }\n}\n\nexport function convertTypes(types, params) {\n  Object.keys(types).forEach(key => {\n    if (params[key]) {\n      if (isFn(types[key])) {\n        params[key] = types[key](params[key]);\n      } else {\n        params[key] = tryConvertType(types[key], params[key]);\n      }\n\n      // don't send invalid values\n      if (isNaN(params[key])) {\n        delete params.key;\n      }\n    }\n  });\n  return params;\n}\n\nexport function setDataInLocalStorage(key, value) {\n  if (hasLocalStorage()) {\n    window.localStorage.setItem(key, value);\n  }\n}\n\nexport function getDataFromLocalStorage(key) {\n  if (hasLocalStorage()) {\n    return window.localStorage.getItem(key);\n  }\n}\n\nexport function hasLocalStorage() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    logError('Local storage api disabled');\n  }\n}\n\nexport function isArrayOfNums(val, size) {\n  return (isArray(val)) && ((size) ? val.length === size : true) && (val.every(v => isInteger(v)));\n}\n\n/**\n * Creates an array of n length and fills each item with the given value\n */\nexport function fill(value, length) {\n  let newArray = [];\n\n  for (let i = 0; i < length; i++) {\n    let valueToPush = isPlainObject(value) ? deepClone(value) : value;\n    newArray.push(valueToPush);\n  }\n\n  return newArray;\n}\n\n/**\n * http://npm.im/chunk\n * Returns an array with *size* chunks from given array\n *\n * Example:\n * ['a', 'b', 'c', 'd', 'e'] chunked by 2 =>\n * [['a', 'b'], ['c', 'd'], ['e']]\n */\nexport function chunk(array, size) {\n  let newArray = [];\n\n  for (let i = 0; i < Math.ceil(array.length / size); i++) {\n    let start = i * size;\n    let end = start + size;\n    newArray.push(array.slice(start, end));\n  }\n\n  return newArray;\n}\n\nexport function getMinValueFromArray(array) {\n  return Math.min(...array);\n}\n\nexport function getMaxValueFromArray(array) {\n  return Math.max(...array);\n}\n\n/**\n * This function will create compare function to sort on object property\n * @param {string} property\n * @returns {function} compare function to be used in sorting\n */\nexport function compareOn(property) {\n  return function compare(a, b) {\n    if (a[property] < b[property]) {\n      return 1;\n    }\n    if (a[property] > b[property]) {\n      return -1;\n    }\n    return 0;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import Adapter from '../adapter';\nimport adapterManager from '../adapterManager';\nimport { config } from '../config';\nimport { createBid } from '../bidfactory';\nimport { userSync } from '../userSync';\nimport { nativeBidIsValid } from '../native';\nimport { isValidVideoBid } from '../video';\nimport CONSTANTS from '../constants.json';\nimport events from '../events';\nimport includes from 'core-js/library/fn/array/includes';\nimport { ajax } from '../ajax';\nimport { logWarn, logError, parseQueryStringParameters, delayExecution, parseSizesInput, getBidderRequest, flatten, uniques, timestamp, setDataInLocalStorage, getDataFromLocalStorage, deepAccess } from '../utils';\nimport { ADPOD } from '../mediaTypes';\nimport { getHook } from '../hook';\n\n/**\n * This file aims to support Adapters during the Prebid 0.x -> 1.x transition.\n *\n * Prebid 1.x and Prebid 0.x will be in separate branches--perhaps for a long time.\n * This function defines an API for adapter construction which is compatible with both versions.\n * Adapters which use it can maintain their code in master, and only this file will need to change\n * in the 1.x branch.\n *\n * Typical usage looks something like:\n *\n * const adapter = registerBidder({\n *   code: 'myBidderCode',\n *   aliases: ['alias1', 'alias2'],\n *   supportedMediaTypes: ['video', 'native'],\n *   isBidRequestValid: function(paramsObject) { return true/false },\n *   buildRequests: function(bidRequests, bidderRequest) { return some ServerRequest(s) },\n *   interpretResponse: function(oneServerResponse) { return some Bids, or throw an error. }\n * });\n *\n * @see BidderSpec for the full API and more thorough descriptions.\n */\n\n/**\n * @typedef {object} BidderSpec An object containing the adapter-specific functions needed to\n * make a Bidder.\n *\n * @property {string} code A code which will be used to uniquely identify this bidder. This should be the same\n *   one as is used in the call to registerBidAdapter\n * @property {string[]} [aliases] A list of aliases which should also resolve to this bidder.\n * @property {MediaType[]} [supportedMediaTypes]: A list of Media Types which the adapter supports.\n * @property {function(object): boolean} isBidRequestValid Determines whether or not the given bid has all the params\n *   needed to make a valid request.\n * @property {function(BidRequest[], bidderRequest): ServerRequest|ServerRequest[]} buildRequests Build the request to the Server\n *   which requests Bids for the given array of Requests. Each BidRequest in the argument array is guaranteed to have\n *   passed the isBidRequestValid() test.\n * @property {function(ServerResponse, BidRequest): Bid[]} interpretResponse Given a successful response from the Server,\n *   interpret it and return the Bid objects. This function will be run inside a try/catch.\n *   If it throws any errors, your bids will be discarded.\n * @property {function(SyncOptions, ServerResponse[]): UserSync[]} [getUserSyncs] Given an array of all the responses\n *   from the server, determine which user syncs should occur. The argument array will contain every element\n *   which has been sent through to interpretResponse. The order of syncs in this array matters. The most\n *   important ones should come first, since publishers may limit how many are dropped on their page.\n * @property {function(object): object} transformBidParams Updates bid params before creating bid request\n }}\n */\n\n/**\n * @typedef {object} BidRequest\n *\n * @property {string} bidId A string which uniquely identifies this BidRequest in the current Auction.\n * @property {object} params Any bidder-specific params which the publisher used in their bid request.\n */\n\n/**\n * @typedef {object} ServerRequest\n *\n * @property {('GET'|'POST')} method The type of request which this is.\n * @property {string} url The endpoint for the request. For example, \"//bids.example.com\".\n * @property {string|object} data Data to be sent in the request.\n * @property {object} options Content-Type set in the header of the bid request, overrides default 'text/plain'.\n *   If this is a GET request, they'll become query params. If it's a POST request, they'll be added to the body.\n *   Strings will be added as-is. Objects will be unpacked into query params based on key/value mappings, or\n *   JSON-serialized into the Request body.\n */\n\n/**\n * @typedef {object} ServerResponse\n *\n * @property {*} body The response body. If this is legal JSON, then it will be parsed. Otherwise it'll be a\n *   string with the body's content.\n * @property {{get: function(string): string} headers The response headers.\n *   Call this like `ServerResponse.headers.get(\"Content-Type\")`\n */\n\n/**\n * @typedef {object} Bid\n *\n * @property {string} requestId The specific BidRequest which this bid is aimed at.\n *   This should match the BidRequest.bidId which this Bid targets.\n * @property {string} ad A URL which can be used to load this ad, if it's chosen by the publisher.\n * @property {string} currency The currency code for the cpm value\n * @property {number} cpm The bid price, in US cents per thousand impressions.\n * @property {number} ttl Time-to-live - how long (in seconds) Prebid can use this bid.\n * @property {boolean} netRevenue Boolean defining whether the bid is Net or Gross.  The default is true (Net).\n * @property {number} height The height of the ad, in pixels.\n * @property {number} width The width of the ad, in pixels.\n *\n * @property {object} [native] Object for storing native creative assets\n * @property {object} [video] Object for storing video response data\n * @property {object} [meta] Object for storing bid meta data\n * @property {string} [meta.iabSubCatId] The IAB subcategory ID\n * @property [Renderer] renderer A Renderer which can be used as a default for this bid,\n *   if the publisher doesn't override it. This is only relevant for Outstream Video bids.\n */\n\n/**\n * @typedef {Object} SyncOptions\n *\n * An object containing information about usersyncs which the adapter should obey.\n *\n * @property {boolean} iframeEnabled True if iframe usersyncs are allowed, and false otherwise\n * @property {boolean} pixelEnabled True if image usersyncs are allowed, and false otherwise\n */\n\n/**\n * TODO: Move this to the UserSync module after that PR is merged.\n *\n * @typedef {object} UserSync\n *\n * @property {('image'|'iframe')} type The type of user sync to be done.\n * @property {string} url The URL which makes the sync happen.\n */\n\n// common params for all mediaTypes\nconst COMMON_BID_RESPONSE_KEYS = ['requestId', 'cpm', 'ttl', 'creativeId', 'netRevenue', 'currency'];\n\nconst DEFAULT_REFRESHIN_DAYS = 1;\n\n/**\n * Register a bidder with prebid, using the given spec.\n *\n * If possible, Adapter modules should use this function instead of adapterManager.registerBidAdapter().\n *\n * @param {BidderSpec} spec An object containing the bare-bones functions we need to make a Bidder.\n */\nexport function registerBidder(spec) {\n  const mediaTypes = Array.isArray(spec.supportedMediaTypes)\n    ? { supportedMediaTypes: spec.supportedMediaTypes }\n    : undefined;\n  function putBidder(spec) {\n    const bidder = newBidder(spec);\n    adapterManager.registerBidAdapter(bidder, spec.code, mediaTypes);\n  }\n\n  putBidder(spec);\n  if (Array.isArray(spec.aliases)) {\n    spec.aliases.forEach(alias => {\n      adapterManager.aliasRegistry[alias] = spec.code;\n      putBidder(Object.assign({}, spec, { code: alias }));\n    });\n  }\n}\n\n/**\n * Make a new bidder from the given spec. This is exported mainly for testing.\n * Adapters will probably find it more convenient to use registerBidder instead.\n *\n * @param {BidderSpec} spec\n */\nexport function newBidder(spec) {\n  return Object.assign(new Adapter(spec.code), {\n    getSpec: function() {\n      return Object.freeze(spec);\n    },\n    registerSyncs,\n    callBids: function(bidderRequest, addBidResponse, done, ajax, onTimelyResponse) {\n      if (!Array.isArray(bidderRequest.bids)) {\n        return;\n      }\n\n      const adUnitCodesHandled = {};\n      function addBidWithCode(adUnitCode, bid) {\n        adUnitCodesHandled[adUnitCode] = true;\n        if (isValid(adUnitCode, bid, [bidderRequest])) {\n          addBidResponse(adUnitCode, bid);\n        }\n      }\n\n      // After all the responses have come back, call done() and\n      // register any required usersync pixels.\n      const responses = [];\n      function afterAllResponses() {\n        done();\n        events.emit(CONSTANTS.EVENTS.BIDDER_DONE, bidderRequest);\n        registerSyncs(responses, bidderRequest.gdprConsent);\n      }\n\n      const validBidRequests = bidderRequest.bids.filter(filterAndWarn);\n      if (validBidRequests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      const bidRequestMap = {};\n      validBidRequests.forEach(bid => {\n        bidRequestMap[bid.bidId] = bid;\n        // Delete this once we are 1.0\n        if (!bid.adUnitCode) {\n          bid.adUnitCode = bid.placementCode\n        }\n      });\n\n      let requests = spec.buildRequests(validBidRequests, bidderRequest);\n      if (!requests || requests.length === 0) {\n        afterAllResponses();\n        return;\n      }\n      if (!Array.isArray(requests)) {\n        requests = [requests];\n      }\n\n      // Callbacks don't compose as nicely as Promises. We should call done() once _all_ the\n      // Server requests have returned and been processed. Since `ajax` accepts a single callback,\n      // we need to rig up a function which only executes after all the requests have been responded.\n      const onResponse = delayExecution(afterAllResponses, requests.length)\n      requests.forEach(processRequest);\n\n      function formatGetParameters(data) {\n        if (data) {\n          return `?${typeof data === 'object' ? parseQueryStringParameters(data) : data}`;\n        }\n\n        return '';\n      }\n\n      function processRequest(request) {\n        switch (request.method) {\n          case 'GET':\n            ajax(\n              `${request.url}${formatGetParameters(request.data)}`,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              undefined,\n              Object.assign({\n                method: 'GET',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          case 'POST':\n            ajax(\n              request.url,\n              {\n                success: onSuccess,\n                error: onFailure\n              },\n              typeof request.data === 'string' ? request.data : JSON.stringify(request.data),\n              Object.assign({\n                method: 'POST',\n                contentType: 'text/plain',\n                withCredentials: true\n              }, request.options)\n            );\n            break;\n          default:\n            logWarn(`Skipping invalid request from ${spec.code}. Request type ${request.type} must be GET or POST`);\n            onResponse();\n        }\n\n        // If the server responds successfully, use the adapter code to unpack the Bids from it.\n        // If the adapter code fails, no bids should be added. After all the bids have been added, make\n        // sure to call the `onResponse` function so that we're one step closer to calling done().\n        function onSuccess(response, responseObj) {\n          onTimelyResponse(spec.code);\n\n          try {\n            response = JSON.parse(response);\n          } catch (e) { /* response might not be JSON... that's ok. */ }\n\n          // Make response headers available for #1742. These are lazy-loaded because most adapters won't need them.\n          response = {\n            body: response,\n            headers: headerParser(responseObj)\n          };\n          responses.push(response);\n\n          let bids;\n          try {\n            bids = spec.interpretResponse(response, request);\n          } catch (err) {\n            logError(`Bidder ${spec.code} failed to interpret the server's response. Continuing without bids`, null, err);\n            onResponse();\n            return;\n          }\n\n          if (bids) {\n            if (bids.forEach) {\n              bids.forEach(addBidUsingRequestMap);\n            } else {\n              addBidUsingRequestMap(bids);\n            }\n          }\n          onResponse(bids);\n\n          function addBidUsingRequestMap(bid) {\n            const bidRequest = bidRequestMap[bid.requestId];\n            if (bidRequest) {\n              const prebidBid = Object.assign(createBid(CONSTANTS.STATUS.GOOD, bidRequest), bid);\n              addBidWithCode(bidRequest.adUnitCode, prebidBid);\n            } else {\n              logWarn(`Bidder ${spec.code} made bid for unknown request ID: ${bid.requestId}. Ignoring.`);\n            }\n          }\n\n          function headerParser(xmlHttpResponse) {\n            return {\n              get: responseObj.getResponseHeader.bind(responseObj)\n            };\n          }\n        }\n\n        // If the server responds with an error, there's not much we can do. Log it, and make sure to\n        // call onResponse() so that we're one step closer to calling done().\n        function onFailure(err) {\n          onTimelyResponse(spec.code);\n\n          logError(`Server call for ${spec.code} failed: ${err}. Continuing without bids.`);\n          onResponse();\n        }\n      }\n    }\n  });\n\n  function registerSyncs(responses, gdprConsent) {\n    if (spec.getUserSyncs) {\n      let filterConfig = config.getConfig('userSync.filterSettings');\n      let syncs = spec.getUserSyncs({\n        iframeEnabled: !!(config.getConfig('userSync.iframeEnabled') || (filterConfig && (filterConfig.iframe || filterConfig.all))),\n        pixelEnabled: !!(config.getConfig('userSync.pixelEnabled') || (filterConfig && (filterConfig.image || filterConfig.all))),\n      }, responses, gdprConsent);\n      if (syncs) {\n        if (!Array.isArray(syncs)) {\n          syncs = [syncs];\n        }\n        syncs.forEach((sync) => {\n          userSync.registerSync(sync.type, spec.code, sync.url)\n        });\n      }\n    }\n  }\n\n  function filterAndWarn(bid) {\n    if (!spec.isBidRequestValid(bid)) {\n      logWarn(`Invalid bid sent to bidder ${spec.code}: ${JSON.stringify(bid)}`);\n      return false;\n    }\n    return true;\n  }\n}\n\nexport function preloadBidderMappingFile(fn, adUnits) {\n  if (!config.getConfig('adpod.brandCategoryExclusion')) {\n    return fn.call(this, adUnits);\n  }\n  let adPodBidders = adUnits\n    .filter((adUnit) => deepAccess(adUnit, 'mediaTypes.video.context') === ADPOD)\n    .map((adUnit) => adUnit.bids.map((bid) => bid.bidder))\n    .reduce(flatten, [])\n    .filter(uniques);\n\n  adPodBidders.forEach(bidder => {\n    let bidderSpec = adapterManager.getBidAdapter(bidder);\n    if (bidderSpec.getSpec().getMappingFileInfo) {\n      let info = bidderSpec.getSpec().getMappingFileInfo();\n      let refreshInDays = (info.refreshInDays) ? info.refreshInDays : DEFAULT_REFRESHIN_DAYS;\n      let key = (info.localStorageKey) ? info.localStorageKey : bidderSpec.getSpec().code;\n      let mappingData = getDataFromLocalStorage(key);\n      if (!mappingData || timestamp() < mappingData.lastUpdated + refreshInDays * 24 * 60 * 60 * 1000) {\n        ajax(info.url,\n          {\n            success: (response) => {\n              try {\n                response = JSON.parse(response);\n                let mapping = {\n                  lastUpdated: timestamp(),\n                  mapping: response.mapping\n                }\n                setDataInLocalStorage(key, JSON.stringify(mapping));\n              } catch (error) {\n                logError(`Failed to parse ${bidder} bidder translation mapping file`);\n              }\n            },\n            error: () => {\n              logError(`Failed to load ${bidder} bidder translation file`)\n            }\n          },\n        );\n      }\n    }\n  });\n  fn.call(this, adUnits);\n}\n\ngetHook('checkAdUnitSetup').before(preloadBidderMappingFile);\n\n/**\n * Reads the data stored in localstorage and returns iab subcategory\n * @param {string} bidderCode bidderCode\n * @param {string} category bidders category\n */\nexport function getIabSubCategory(bidderCode, category) {\n  let bidderSpec = adapterManager.getBidAdapter(bidderCode);\n  if (bidderSpec.getSpec().getMappingFileInfo) {\n    let info = bidderSpec.getSpec().getMappingFileInfo();\n    let key = (info.localStorageKey) ? info.localStorageKey : bidderSpec.getBidderCode();\n    let data = getDataFromLocalStorage(key);\n    if (data) {\n      try {\n        data = JSON.parse(data);\n      } catch (error) {\n        logError(`Failed to parse ${bidderCode} mapping data stored in local storage`);\n      }\n      return (data.mapping[category]) ? data.mapping[category] : null;\n    }\n  }\n}\n\n// check that the bid has a width and height set\nfunction validBidSize(adUnitCode, bid, bidRequests) {\n  if ((bid.width || parseInt(bid.width, 10) === 0) && (bid.height || parseInt(bid.height, 10) === 0)) {\n    bid.width = parseInt(bid.width, 10);\n    bid.height = parseInt(bid.height, 10);\n    return true;\n  }\n\n  const adUnit = getBidderRequest(bidRequests, bid.bidderCode, adUnitCode);\n\n  const sizes = adUnit && adUnit.bids && adUnit.bids[0] && adUnit.bids[0].sizes;\n  const parsedSizes = parseSizesInput(sizes);\n\n  // if a banner impression has one valid size, we assign that size to any bid\n  // response that does not explicitly set width or height\n  if (parsedSizes.length === 1) {\n    const [ width, height ] = parsedSizes[0].split('x');\n    bid.width = parseInt(width, 10);\n    bid.height = parseInt(height, 10);\n    return true;\n  }\n\n  return false;\n}\n\n// Validate the arguments sent to us by the adapter. If this returns false, the bid should be totally ignored.\nexport function isValid(adUnitCode, bid, bidRequests) {\n  function hasValidKeys() {\n    let bidKeys = Object.keys(bid);\n    return COMMON_BID_RESPONSE_KEYS.every(key => includes(bidKeys, key) && !includes([undefined, null], bid[key]));\n  }\n\n  function errorMessage(msg) {\n    return `Invalid bid from ${bid.bidderCode}. Ignoring bid: ${msg}`;\n  }\n\n  if (!adUnitCode) {\n    logWarn('No adUnitCode was supplied to addBidResponse.');\n    return false;\n  }\n\n  if (!bid) {\n    logWarn(`Some adapter tried to add an undefined bid for ${adUnitCode}.`);\n    return false;\n  }\n\n  if (!hasValidKeys()) {\n    logError(errorMessage(`Bidder ${bid.bidderCode} is missing required params. Check http://prebid.org/dev-docs/bidder-adapter-1.html for list of params.`));\n    return false;\n  }\n\n  if (bid.mediaType === 'native' && !nativeBidIsValid(bid, bidRequests)) {\n    logError(errorMessage('Native bid missing some required properties.'));\n    return false;\n  }\n  if (bid.mediaType === 'video' && !isValidVideoBid(bid, bidRequests)) {\n    logError(errorMessage(`Video bid does not have required vastUrl or renderer property`));\n    return false;\n  }\n  if (bid.mediaType === 'banner' && !validBidSize(adUnitCode, bid, bidRequests)) {\n    logError(errorMessage(`Banner bids require a width and height`));\n    return false;\n  }\n\n  return true;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapters/bidderFactory.js","export function parseQS(query) {\n  return !query ? {} : query\n    .replace(/^\\?/, '')\n    .split('&')\n    .reduce((acc, criteria) => {\n      let [k, v] = criteria.split('=');\n      if (/\\[\\]$/.test(k)) {\n        k = k.replace('[]', '');\n        acc[k] = acc[k] || [];\n        acc[k].push(v);\n      } else {\n        acc[k] = v || '';\n      }\n      return acc;\n    }, {});\n}\n\nexport function formatQS(query) {\n  return Object\n    .keys(query)\n    .map(k => Array.isArray(query[k])\n      ? query[k].map(v => `${k}[]=${v}`).join('&')\n      : `${k}=${query[k]}`)\n    .join('&');\n}\n\nexport function parse(url, options) {\n  let parsed = document.createElement('a');\n  if (options && 'noDecodeWholeURL' in options && options.noDecodeWholeURL) {\n    parsed.href = url;\n  } else {\n    parsed.href = decodeURIComponent(url);\n  }\n  // in window.location 'search' is string, not object\n  let qsAsString = (options && 'decodeSearchAsString' in options && options.decodeSearchAsString);\n  return {\n    href: parsed.href,\n    protocol: (parsed.protocol || '').replace(/:$/, ''),\n    hostname: parsed.hostname,\n    port: +parsed.port,\n    pathname: parsed.pathname.replace(/^(?!\\/)/, '/'),\n    search: (qsAsString) ? parsed.search : parseQS(parsed.search || ''),\n    hash: (parsed.hash || '').replace(/^#/, ''),\n    host: parsed.host || window.location.host\n  };\n}\n\nexport function format(obj) {\n  return (obj.protocol || 'http') + '://' +\n         (obj.host ||\n          obj.hostname + (obj.port ? `:${obj.port}` : '')) +\n         (obj.pathname || '') +\n         (obj.search ? `?${formatQS(obj.search || '')}` : '') +\n         (obj.hash ? `#${obj.hash}` : '');\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/url.js","import { loadScript } from './adloader';\nimport * as utils from './utils';\nimport find from 'core-js/library/fn/array/find';\n\n/**\n * @typedef {object} Renderer\n *\n * A Renderer stores some functions which are used to render a particular Bid.\n * These are used in Outstream Video Bids, returned on the Bid by the adapter, and will\n * be used to render that bid unless the Publisher overrides them.\n */\n\nexport function Renderer(options) {\n  const { url, config, id, callback, loaded, adUnitCode } = options;\n  this.url = url;\n  this.config = config;\n  this.handlers = {};\n  this.id = id;\n\n  // a renderer may push to the command queue to delay rendering until the\n  // render function is loaded by loadScript, at which point the the command\n  // queue will be processed\n  this.loaded = loaded;\n  this.cmd = [];\n  this.push = func => {\n    if (typeof func !== 'function') {\n      utils.logError('Commands given to Renderer.push must be wrapped in a function');\n      return;\n    }\n    this.loaded ? func.call() : this.cmd.push(func);\n  };\n\n  // bidders may override this with the `callback` property given to `install`\n  this.callback = callback || (() => {\n    this.loaded = true;\n    this.process();\n  });\n\n  if (!isRendererDefinedOnAdUnit(adUnitCode)) {\n    // we expect to load a renderer url once only so cache the request to load script\n    loadScript(url, this.callback, true);\n  } else {\n    utils.logWarn(`External Js not loaded by Renderer since renderer url and callback is already defined on adUnit ${adUnitCode}`);\n  }\n}\n\nRenderer.install = function({ url, config, id, callback, loaded, adUnitCode }) {\n  return new Renderer({ url, config, id, callback, loaded, adUnitCode });\n};\n\nRenderer.prototype.getConfig = function() {\n  return this.config;\n};\n\nRenderer.prototype.setRender = function(fn) {\n  this.render = fn;\n};\n\nRenderer.prototype.setEventHandlers = function(handlers) {\n  this.handlers = handlers;\n};\n\nRenderer.prototype.handleVideoEvent = function({ id, eventName }) {\n  if (typeof this.handlers[eventName] === 'function') {\n    this.handlers[eventName]();\n  }\n\n  utils.logMessage(`Prebid Renderer event for id ${id} type ${eventName}`);\n};\n\n/*\n * Calls functions that were pushed to the command queue before the\n * renderer was loaded by `loadScript`\n */\nRenderer.prototype.process = function() {\n  while (this.cmd.length > 0) {\n    try {\n      this.cmd.shift().call();\n    } catch (error) {\n      utils.logError('Error processing Renderer command: ', error);\n    }\n  }\n};\n\n/**\n * Checks whether creative rendering should be done by Renderer or not.\n * @param {Object} renderer Renderer object installed by adapter\n * @returns {Boolean}\n */\nexport function isRendererRequired(renderer) {\n  return !!(renderer && renderer.url);\n}\n\n/**\n * Render the bid returned by the adapter\n * @param {Object} renderer Renderer object installed by adapter\n * @param {Object} bid Bid response\n */\nexport function executeRenderer(renderer, bid) {\n  renderer.render(bid);\n}\n\nfunction isRendererDefinedOnAdUnit(adUnitCode) {\n  const adUnits = $$PREBID_GLOBAL$$.adUnits;\n  const adUnit = find(adUnits, adUnit => {\n    return adUnit.code === adUnitCode;\n  });\n  return !!(adUnit && adUnit.renderer && adUnit.renderer.url && adUnit.renderer.render);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Renderer.js","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find.js\n// module id = 12\n// module chunks = 265","\nimport funHooks from 'fun-hooks/no-eval';\n\nexport let hook = funHooks({\n  ready: funHooks.SYNC | funHooks.ASYNC | funHooks.QUEUE\n});\n\nexport const getHook = hook.get;\n\nexport function setupBeforeHookFnOnce(baseFn, hookFn, priority = 15) {\n  let result = baseFn.getHooks({hook: hookFn});\n  if (result.length === 0) {\n    baseFn.before(hookFn, priority);\n  }\n}\n\nexport function module(name, install) {\n  hook('async', function (submodules) {\n    submodules.forEach(args => install(...args));\n  }, name)([]); // will be queued until hook.ready() called in pbjs.processQueue();\n}\n\nexport function submodule(name, ...args) {\n  getHook(name).before((next, modules) => {\n    modules.push(args);\n    next(modules);\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/hook.js","'use strict';\n// 22.1.3.9 Array.prototype.findIndex(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(6);\nvar KEY = 'findIndex';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find-index.js\n// module id = 130\n// module chunks = 265","/* Secure Creatives\n  Provides support for rendering creatives into cross domain iframes such as SafeFrame to prevent\n   access to a publisher page from creative payloads.\n */\n\nimport events from './events';\nimport { fireNativeTrackers, getAssetMessage } from './native';\nimport { EVENTS } from './constants';\nimport { isSlotMatchingAdUnitCode, logWarn, replaceAuctionPrice } from './utils';\nimport { auctionManager } from './auctionManager';\nimport find from 'core-js/library/fn/array/find';\nimport { isRendererRequired, executeRenderer } from './Renderer';\n\nconst BID_WON = EVENTS.BID_WON;\n\nexport function listenMessagesFromCreative() {\n  addEventListener('message', receiveMessage, false);\n}\n\nfunction receiveMessage(ev) {\n  var key = ev.message ? 'message' : 'data';\n  var data = {};\n  try {\n    data = JSON.parse(ev[key]);\n  } catch (e) {\n    return;\n  }\n\n  if (data && data.adId) {\n    const adObject = find(auctionManager.getBidsReceived(), function (bid) {\n      return bid.adId === data.adId;\n    });\n\n    if (adObject && data.message === 'Prebid Request') {\n      _sendAdToCreative(adObject, data.adServerDomain, ev.source);\n\n      // save winning bids\n      auctionManager.addWinningBid(adObject);\n\n      events.emit(BID_WON, adObject);\n    }\n\n    // handle this script from native template in an ad server\n    // window.parent.postMessage(JSON.stringify({\n    //   message: 'Prebid Native',\n    //   adId: '%%PATTERN:hb_adid%%'\n    // }), '*');\n    if (adObject && data.message === 'Prebid Native') {\n      if (data.action === 'assetRequest') {\n        const message = getAssetMessage(data, adObject);\n        ev.source.postMessage(JSON.stringify(message), ev.origin);\n        return;\n      }\n\n      const trackerType = fireNativeTrackers(data, adObject);\n      if (trackerType === 'click') { return; }\n\n      auctionManager.addWinningBid(adObject);\n      events.emit(BID_WON, adObject);\n    }\n  }\n}\n\nexport function _sendAdToCreative(adObject, remoteDomain, source) {\n  const { adId, ad, adUrl, width, height, renderer, cpm } = adObject;\n  // rendering for outstream safeframe\n  if (isRendererRequired(renderer)) {\n    executeRenderer(renderer, adObject);\n  } else if (adId) {\n    resizeRemoteCreative(adObject);\n    source.postMessage(JSON.stringify({\n      message: 'Prebid Response',\n      ad: replaceAuctionPrice(ad, cpm),\n      adUrl: replaceAuctionPrice(adUrl, cpm),\n      adId,\n      width,\n      height\n    }), remoteDomain);\n  }\n}\n\nfunction resizeRemoteCreative({ adUnitCode, width, height }) {\n  // resize both container div + iframe\n  ['div:last-child', 'div:last-child iframe'].forEach(elmType => {\n    let element = getElementByAdUnit(elmType);\n    if (element) {\n      let elementStyle = element.style;\n      elementStyle.width = width + 'px';\n      elementStyle.height = height + 'px';\n    } else {\n      logWarn(`Unable to locate matching page element for adUnitCode ${adUnitCode}.  Can't resize it to ad's dimensions.  Please review setup.`);\n    }\n  });\n\n  function getElementByAdUnit(elmType) {\n    let id = getElementIdBasedOnAdServer(adUnitCode);\n    let parentDivEle = document.getElementById(id);\n    return parentDivEle && parentDivEle.querySelector(elmType);\n  }\n\n  function getElementIdBasedOnAdServer(adUnitCode) {\n    if (window.googletag) {\n      return getDfpElementId(adUnitCode)\n    } else if (window.apntag) {\n      return getAstElementId(adUnitCode)\n    } else {\n      return adUnitCode;\n    }\n  }\n\n  function getDfpElementId(adUnitCode) {\n    return find(window.googletag.pubads().getSlots().filter(isSlotMatchingAdUnitCode(adUnitCode)), slot => slot).getSlotElementId()\n  }\n\n  function getAstElementId(adUnitCode) {\n    let astTag = window.apntag.getTag(adUnitCode);\n    return astTag && astTag.targetId;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/secureCreatives.js","\nimport { config } from './config';\nimport { logMessage as utilsLogMessage, logWarn as utilsLogWarn } from './utils';\nimport { addBidResponse } from './auction';\n\nconst OVERRIDE_KEY = '$$PREBID_GLOBAL$$:debugging';\n\nexport let boundHook;\n\nfunction logMessage(msg) {\n  utilsLogMessage('DEBUG: ' + msg);\n}\n\nfunction logWarn(msg) {\n  utilsLogWarn('DEBUG: ' + msg);\n}\n\nfunction removeHook() {\n  addBidResponse.getHooks({hook: boundHook}).remove()\n}\n\nfunction enableOverrides(overrides, fromSession = false) {\n  config.setConfig({'debug': true});\n  logMessage(`bidder overrides enabled${fromSession ? ' from session' : ''}`);\n\n  removeHook();\n\n  boundHook = addBidResponseHook.bind(overrides);\n  addBidResponse.before(boundHook, 5);\n}\n\nexport function disableOverrides() {\n  removeHook();\n  logMessage('bidder overrides disabled');\n}\n\nexport function addBidResponseHook(next, adUnitCode, bid) {\n  let overrides = this;\n  if (Array.isArray(overrides.bidders) && overrides.bidders.indexOf(bid.bidderCode) === -1) {\n    logWarn(`bidder '${bid.bidderCode}' excluded from auction by bidder overrides`);\n    return;\n  }\n\n  if (Array.isArray(overrides.bids)) {\n    overrides.bids.forEach(overrideBid => {\n      if (overrideBid.bidder && overrideBid.bidder !== bid.bidderCode) {\n        return;\n      }\n      if (overrideBid.adUnitCode && overrideBid.adUnitCode !== adUnitCode) {\n        return;\n      }\n\n      bid = Object.assign({}, bid);\n\n      Object.keys(overrideBid).filter(key => ['bidder', 'adUnitCode'].indexOf(key) === -1).forEach((key) => {\n        let value = overrideBid[key];\n        logMessage(`bidder overrides changed '${adUnitCode}/${bid.bidderCode}' bid.${key} from '${bid[key]}' to '${value}'`);\n        bid[key] = value;\n      });\n    });\n  }\n\n  next(adUnitCode, bid);\n}\n\nexport function getConfig(debugging) {\n  if (!debugging.enabled) {\n    disableOverrides();\n    try {\n      window.sessionStorage.removeItem(OVERRIDE_KEY);\n    } catch (e) {}\n  } else {\n    try {\n      window.sessionStorage.setItem(OVERRIDE_KEY, JSON.stringify(debugging));\n    } catch (e) {}\n    enableOverrides(debugging);\n  }\n}\nconfig.getConfig('debugging', ({debugging}) => getConfig(debugging));\n\nexport function sessionLoader(storage) {\n  let overrides;\n  try {\n    storage = storage || window.sessionStorage;\n    overrides = JSON.parse(storage.getItem(OVERRIDE_KEY));\n  } catch (e) {\n  }\n  if (overrides) {\n    enableOverrides(overrides, true);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/debugging.js","require('../modules/es6.object.to-string');\nrequire('../modules/es6.string.iterator');\nrequire('../modules/web.dom.iterable');\nrequire('../modules/es6.set');\nrequire('../modules/es7.set.to-json');\nrequire('../modules/es7.set.of');\nrequire('../modules/es7.set.from');\nmodule.exports = require('../modules/_core').Set;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/set.js\n// module id = 135\n// module chunks = 265","var toInteger = require('./_to-integer');\nvar defined = require('./_defined');\n// true  -> String#at\n// false -> String#codePointAt\nmodule.exports = function (TO_STRING) {\n  return function (that, pos) {\n    var s = String(defined(that));\n    var i = toInteger(pos);\n    var l = s.length;\n    var a, b;\n    if (i < 0 || i >= l) return TO_STRING ? '' : undefined;\n    a = s.charCodeAt(i);\n    return a < 0xd800 || a > 0xdbff || i + 1 === l || (b = s.charCodeAt(i + 1)) < 0xdc00 || b > 0xdfff\n      ? TO_STRING ? s.charAt(i) : a\n      : TO_STRING ? s.slice(i, i + 2) : (a - 0xd800 << 10) + (b - 0xdc00) + 0x10000;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-at.js\n// module id = 137\n// module chunks = 265","module.exports = require('./_hide');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine.js\n// module id = 138\n// module chunks = 265","'use strict';\nvar create = require('./_object-create');\nvar descriptor = require('./_property-desc');\nvar setToStringTag = require('./_set-to-string-tag');\nvar IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nrequire('./_hide')(IteratorPrototype, require('./_wks')('iterator'), function () { return this; });\n\nmodule.exports = function (Constructor, NAME, next) {\n  Constructor.prototype = create(IteratorPrototype, { next: descriptor(1, next) });\n  setToStringTag(Constructor, NAME + ' Iterator');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-create.js\n// module id = 139\n// module chunks = 265","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_wks.js\n// module id = 14\n// module chunks = 265","var dP = require('./_object-dp');\nvar anObject = require('./_an-object');\nvar getKeys = require('./_object-keys');\n\nmodule.exports = require('./_descriptors') ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = getKeys(Properties);\n  var length = keys.length;\n  var i = 0;\n  var P;\n  while (length > i) dP.f(O, P = keys[i++], Properties[P]);\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dps.js\n// module id = 140\n// module chunks = 265","// 19.1.2.14 / 15.2.3.14 Object.keys(O)\nvar $keys = require('./_object-keys-internal');\nvar enumBugKeys = require('./_enum-bug-keys');\n\nmodule.exports = Object.keys || function keys(O) {\n  return $keys(O, enumBugKeys);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys.js\n// module id = 141\n// module chunks = 265","var has = require('./_has');\nvar toIObject = require('./_to-iobject');\nvar arrayIndexOf = require('./_array-includes')(false);\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\n\nmodule.exports = function (object, names) {\n  var O = toIObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) if (key != IE_PROTO) has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~arrayIndexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-keys-internal.js\n// module id = 142\n// module chunks = 265","var document = require('./_global').document;\nmodule.exports = document && document.documentElement;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_html.js\n// module id = 143\n// module chunks = 265","// 19.1.2.9 / 15.2.3.2 Object.getPrototypeOf(O)\nvar has = require('./_has');\nvar toObject = require('./_to-object');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar ObjectProto = Object.prototype;\n\nmodule.exports = Object.getPrototypeOf || function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectProto : null;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-gpo.js\n// module id = 144\n// module chunks = 265","require('./es6.array.iterator');\nvar global = require('./_global');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar TO_STRING_TAG = require('./_wks')('toStringTag');\n\nvar DOMIterables = ('CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,' +\n  'DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,' +\n  'MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,' +\n  'SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,' +\n  'TextTrackList,TouchList').split(',');\n\nfor (var i = 0; i < DOMIterables.length; i++) {\n  var NAME = DOMIterables[i];\n  var Collection = global[NAME];\n  var proto = Collection && Collection.prototype;\n  if (proto && !proto[TO_STRING_TAG]) hide(proto, TO_STRING_TAG, NAME);\n  Iterators[NAME] = Iterators.Array;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/web.dom.iterable.js\n// module id = 145\n// module chunks = 265","'use strict';\nvar addToUnscopables = require('./_add-to-unscopables');\nvar step = require('./_iter-step');\nvar Iterators = require('./_iterators');\nvar toIObject = require('./_to-iobject');\n\n// 22.1.3.4 Array.prototype.entries()\n// 22.1.3.13 Array.prototype.keys()\n// 22.1.3.29 Array.prototype.values()\n// 22.1.3.30 Array.prototype[@@iterator]()\nmodule.exports = require('./_iter-define')(Array, 'Array', function (iterated, kind) {\n  this._t = toIObject(iterated); // target\n  this._i = 0;                   // next index\n  this._k = kind;                // kind\n// 22.1.5.2.1 %ArrayIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var kind = this._k;\n  var index = this._i++;\n  if (!O || index >= O.length) {\n    this._t = undefined;\n    return step(1);\n  }\n  if (kind == 'keys') return step(0, index);\n  if (kind == 'values') return step(0, O[index]);\n  return step(0, [index, O[index]]);\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values% (9.4.4.6, 9.4.4.7)\nIterators.Arguments = Iterators.Array;\n\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.iterator.js\n// module id = 146\n// module chunks = 265","'use strict';\nvar strong = require('./_collection-strong');\nvar validate = require('./_validate-collection');\nvar SET = 'Set';\n\n// 23.2 Set Objects\nmodule.exports = require('./_collection')(SET, function (get) {\n  return function Set() { return get(this, arguments.length > 0 ? arguments[0] : undefined); };\n}, {\n  // 23.2.3.1 Set.prototype.add(value)\n  add: function add(value) {\n    return strong.def(validate(this, SET), value = value === 0 ? 0 : value, value);\n  }\n}, strong);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.set.js\n// module id = 147\n// module chunks = 265","'use strict';\nvar dP = require('./_object-dp').f;\nvar create = require('./_object-create');\nvar redefineAll = require('./_redefine-all');\nvar ctx = require('./_ctx');\nvar anInstance = require('./_an-instance');\nvar forOf = require('./_for-of');\nvar $iterDefine = require('./_iter-define');\nvar step = require('./_iter-step');\nvar setSpecies = require('./_set-species');\nvar DESCRIPTORS = require('./_descriptors');\nvar fastKey = require('./_meta').fastKey;\nvar validate = require('./_validate-collection');\nvar SIZE = DESCRIPTORS ? '_s' : 'size';\n\nvar getEntry = function (that, key) {\n  // fast case\n  var index = fastKey(key);\n  var entry;\n  if (index !== 'F') return that._i[index];\n  // frozen object case\n  for (entry = that._f; entry; entry = entry.n) {\n    if (entry.k == key) return entry;\n  }\n};\n\nmodule.exports = {\n  getConstructor: function (wrapper, NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, NAME, '_i');\n      that._t = NAME;         // collection type\n      that._i = create(null); // index\n      that._f = undefined;    // first entry\n      that._l = undefined;    // last entry\n      that[SIZE] = 0;         // size\n      if (iterable != undefined) forOf(iterable, IS_MAP, that[ADDER], that);\n    });\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        for (var that = validate(this, NAME), data = that._i, entry = that._f; entry; entry = entry.n) {\n          entry.r = true;\n          if (entry.p) entry.p = entry.p.n = undefined;\n          delete data[entry.i];\n        }\n        that._f = that._l = undefined;\n        that[SIZE] = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = validate(this, NAME);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.n;\n          var prev = entry.p;\n          delete that._i[entry.i];\n          entry.r = true;\n          if (prev) prev.n = next;\n          if (next) next.p = prev;\n          if (that._f == entry) that._f = next;\n          if (that._l == entry) that._l = prev;\n          that[SIZE]--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        validate(this, NAME);\n        var f = ctx(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.n : this._f) {\n          f(entry.v, entry.k, this);\n          // revert to the last existing entry\n          while (entry && entry.r) entry = entry.p;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(validate(this, NAME), key);\n      }\n    });\n    if (DESCRIPTORS) dP(C.prototype, 'size', {\n      get: function () {\n        return validate(this, NAME)[SIZE];\n      }\n    });\n    return C;\n  },\n  def: function (that, key, value) {\n    var entry = getEntry(that, key);\n    var prev, index;\n    // change existing entry\n    if (entry) {\n      entry.v = value;\n    // create new entry\n    } else {\n      that._l = entry = {\n        i: index = fastKey(key, true), // <- index\n        k: key,                        // <- key\n        v: value,                      // <- value\n        p: prev = that._l,             // <- previous entry\n        n: undefined,                  // <- next entry\n        r: false                       // <- removed\n      };\n      if (!that._f) that._f = entry;\n      if (prev) prev.n = entry;\n      that[SIZE]++;\n      // add to index\n      if (index !== 'F') that._i[index] = entry;\n    } return that;\n  },\n  getEntry: getEntry,\n  setStrong: function (C, NAME, IS_MAP) {\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    $iterDefine(C, NAME, function (iterated, kind) {\n      this._t = validate(iterated, NAME); // target\n      this._k = kind;                     // kind\n      this._l = undefined;                // previous\n    }, function () {\n      var that = this;\n      var kind = that._k;\n      var entry = that._l;\n      // revert to the last existing entry\n      while (entry && entry.r) entry = entry.p;\n      // get next entry\n      if (!that._t || !(that._l = entry = entry ? entry.n : that._t._f)) {\n        // or finish the iteration\n        that._t = undefined;\n        return step(1);\n      }\n      // return step by kind\n      if (kind == 'keys') return step(0, entry.k);\n      if (kind == 'values') return step(0, entry.v);\n      return step(0, [entry.k, entry.v]);\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(NAME);\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_collection-strong.js\n// module id = 148\n// module chunks = 265","'use strict';\nvar global = require('./_global');\nvar core = require('./_core');\nvar dP = require('./_object-dp');\nvar DESCRIPTORS = require('./_descriptors');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (KEY) {\n  var C = typeof core[KEY] == 'function' ? core[KEY] : global[KEY];\n  if (DESCRIPTORS && C && !C[SPECIES]) dP.f(C, SPECIES, {\n    configurable: true,\n    get: function () { return this; }\n  });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-species.js\n// module id = 149\n// module chunks = 265","var global = require('./_global');\nvar core = require('./_core');\nvar ctx = require('./_ctx');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var IS_WRAP = type & $export.W;\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE];\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE];\n  var key, own, out;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    if (own && has(exports, key)) continue;\n    // export native or passed\n    out = own ? target[key] : source[key];\n    // prevent global pollution for namespaces\n    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]\n    // bind timers to global for call from export context\n    : IS_BIND && own ? ctx(out, global)\n    // wrap global constructors for prevent change them in library\n    : IS_WRAP && target[key] == out ? (function (C) {\n      var F = function (a, b, c) {\n        if (this instanceof C) {\n          switch (arguments.length) {\n            case 0: return new C();\n            case 1: return new C(a);\n            case 2: return new C(a, b);\n          } return new C(a, b, c);\n        } return C.apply(this, arguments);\n      };\n      F[PROTOTYPE] = C[PROTOTYPE];\n      return F;\n    // make static versions for prototype methods\n    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // export proto methods to core.%CONSTRUCTOR%.methods.%NAME%\n    if (IS_PROTO) {\n      (exports.virtual || (exports.virtual = {}))[key] = out;\n      // export proto methods to core.%CONSTRUCTOR%.prototype.%NAME%\n      if (type & $export.R && expProto && !expProto[key]) hide(expProto, key, out);\n    }\n  }\n};\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_export.js\n// module id = 15\n// module chunks = 265","'use strict';\nvar global = require('./_global');\nvar $export = require('./_export');\nvar meta = require('./_meta');\nvar fails = require('./_fails');\nvar hide = require('./_hide');\nvar redefineAll = require('./_redefine-all');\nvar forOf = require('./_for-of');\nvar anInstance = require('./_an-instance');\nvar isObject = require('./_is-object');\nvar setToStringTag = require('./_set-to-string-tag');\nvar dP = require('./_object-dp').f;\nvar each = require('./_array-methods')(0);\nvar DESCRIPTORS = require('./_descriptors');\n\nmodule.exports = function (NAME, wrapper, methods, common, IS_MAP, IS_WEAK) {\n  var Base = global[NAME];\n  var C = Base;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var proto = C && C.prototype;\n  var O = {};\n  if (!DESCRIPTORS || typeof C != 'function' || !(IS_WEAK || proto.forEach && !fails(function () {\n    new C().entries().next();\n  }))) {\n    // create collection constructor\n    C = common.getConstructor(wrapper, NAME, IS_MAP, ADDER);\n    redefineAll(C.prototype, methods);\n    meta.NEED = true;\n  } else {\n    C = wrapper(function (target, iterable) {\n      anInstance(target, C, NAME, '_c');\n      target._c = new Base();\n      if (iterable != undefined) forOf(iterable, IS_MAP, target[ADDER], target);\n    });\n    each('add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON'.split(','), function (KEY) {\n      var IS_ADDER = KEY == 'add' || KEY == 'set';\n      if (KEY in proto && !(IS_WEAK && KEY == 'clear')) hide(C.prototype, KEY, function (a, b) {\n        anInstance(this, C, KEY);\n        if (!IS_ADDER && IS_WEAK && !isObject(a)) return KEY == 'get' ? undefined : false;\n        var result = this._c[KEY](a === 0 ? 0 : a, b);\n        return IS_ADDER ? this : result;\n      });\n    });\n    IS_WEAK || dP(C.prototype, 'size', {\n      get: function () {\n        return this._c.size;\n      }\n    });\n  }\n\n  setToStringTag(C, NAME);\n\n  O[NAME] = C;\n  $export($export.G + $export.W + $export.F, O);\n\n  if (!IS_WEAK) common.setStrong(C, NAME, IS_MAP);\n\n  return C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_collection.js\n// module id = 150\n// module chunks = 265","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar $export = require('./_export');\n\n$export($export.P + $export.R, 'Set', { toJSON: require('./_collection-to-json')('Set') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.set.to-json.js\n// module id = 151\n// module chunks = 265","// https://github.com/DavidBruant/Map-Set.prototype.toJSON\nvar classof = require('./_classof');\nvar from = require('./_array-from-iterable');\nmodule.exports = function (NAME) {\n  return function toJSON() {\n    if (classof(this) != NAME) throw TypeError(NAME + \"#toJSON isn't generic\");\n    return from(this);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_collection-to-json.js\n// module id = 152\n// module chunks = 265","var forOf = require('./_for-of');\n\nmodule.exports = function (iter, ITERATOR) {\n  var result = [];\n  forOf(iter, false, result.push, result, ITERATOR);\n  return result;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-from-iterable.js\n// module id = 153\n// module chunks = 265","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.of\nrequire('./_set-collection-of')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.set.of.js\n// module id = 154\n// module chunks = 265","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { of: function of() {\n    var length = arguments.length;\n    var A = new Array(length);\n    while (length--) A[length] = arguments[length];\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-collection-of.js\n// module id = 155\n// module chunks = 265","// https://tc39.github.io/proposal-setmap-offrom/#sec-set.from\nrequire('./_set-collection-from')('Set');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.set.from.js\n// module id = 156\n// module chunks = 265","'use strict';\n// https://tc39.github.io/proposal-setmap-offrom/\nvar $export = require('./_export');\nvar aFunction = require('./_a-function');\nvar ctx = require('./_ctx');\nvar forOf = require('./_for-of');\n\nmodule.exports = function (COLLECTION) {\n  $export($export.S, COLLECTION, { from: function from(source /* , mapFn, thisArg */) {\n    var mapFn = arguments[1];\n    var mapping, A, n, cb;\n    aFunction(this);\n    mapping = mapFn !== undefined;\n    if (mapping) aFunction(mapFn);\n    if (source == undefined) return new this();\n    A = [];\n    if (mapping) {\n      n = 0;\n      cb = ctx(mapFn, arguments[2], 2);\n      forOf(source, false, function (nextItem) {\n        A.push(cb(nextItem, n++));\n      });\n    } else {\n      forOf(source, false, A.push, A);\n    }\n    return new this(A);\n  } });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-collection-from.js\n// module id = 157\n// module chunks = 265","require('../../modules/es6.string.iterator');\nrequire('../../modules/es6.array.from');\nmodule.exports = require('../../modules/_core').Array.from;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/from.js\n// module id = 158\n// module chunks = 265","'use strict';\nvar ctx = require('./_ctx');\nvar $export = require('./_export');\nvar toObject = require('./_to-object');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar toLength = require('./_to-length');\nvar createProperty = require('./_create-property');\nvar getIterFn = require('./core.get-iterator-method');\n\n$export($export.S + $export.F * !require('./_iter-detect')(function (iter) { Array.from(iter); }), 'Array', {\n  // 22.1.2.1 Array.from(arrayLike, mapfn = undefined, thisArg = undefined)\n  from: function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n    var O = toObject(arrayLike);\n    var C = typeof this == 'function' ? this : Array;\n    var aLen = arguments.length;\n    var mapfn = aLen > 1 ? arguments[1] : undefined;\n    var mapping = mapfn !== undefined;\n    var index = 0;\n    var iterFn = getIterFn(O);\n    var length, result, step, iterator;\n    if (mapping) mapfn = ctx(mapfn, aLen > 2 ? arguments[2] : undefined, 2);\n    // if object isn't iterable or it's array with default iterator - use simple case\n    if (iterFn != undefined && !(C == Array && isArrayIter(iterFn))) {\n      for (iterator = iterFn.call(O), result = new C(); !(step = iterator.next()).done; index++) {\n        createProperty(result, index, mapping ? call(iterator, mapfn, [step.value, index], true) : step.value);\n      }\n    } else {\n      length = toLength(O.length);\n      for (result = new C(length); length > index; index++) {\n        createProperty(result, index, mapping ? mapfn(O[index], index) : O[index]);\n      }\n    }\n    result.length = index;\n    return result;\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.from.js\n// module id = 159\n// module chunks = 265","var core = module.exports = { version: '2.6.9' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_core.js\n// module id = 16\n// module chunks = 265","'use strict';\nvar $defineProperty = require('./_object-dp');\nvar createDesc = require('./_property-desc');\n\nmodule.exports = function (object, index, value) {\n  if (index in object) $defineProperty.f(object, index, createDesc(0, value));\n  else object[index] = value;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_create-property.js\n// module id = 160\n// module chunks = 265","var ITERATOR = require('./_wks')('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var riter = [7][ITERATOR]();\n  riter['return'] = function () { SAFE_CLOSING = true; };\n  // eslint-disable-next-line no-throw-literal\n  Array.from(riter, function () { throw 2; });\n} catch (e) { /* empty */ }\n\nmodule.exports = function (exec, skipClosing) {\n  if (!skipClosing && !SAFE_CLOSING) return false;\n  var safe = false;\n  try {\n    var arr = [7];\n    var iter = arr[ITERATOR]();\n    iter.next = function () { return { done: safe = true }; };\n    arr[ITERATOR] = function () { return iter; };\n    exec(arr);\n  } catch (e) { /* empty */ }\n  return safe;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-detect.js\n// module id = 161\n// module chunks = 265","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-object.js\n// module id = 18\n// module chunks = 265","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_global.js\n// module id = 19\n// module chunks = 265","/**\n * This file contains the valid Media Types in Prebid.\n *\n * All adapters are assumed to support banner ads. Other media types are specified by Adapters when they\n * register themselves with prebid-core.\n */\n\n/**\n * @typedef {('native'|'video'|'banner')} MediaType\n * @typedef {('adpod')} VideoContext\n */\n\n/** @type MediaType */\nexport const NATIVE = 'native';\n/** @type MediaType */\nexport const VIDEO = 'video';\n/** @type MediaType */\nexport const BANNER = 'banner';\n/** @type VideoContext */\nexport const ADPOD = 'adpod';\n\n\n\n// WEBPACK FOOTER //\n// ./src/mediaTypes.js","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-dp.js\n// module id = 20\n// module chunks = 265","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_hide.js\n// module id = 21\n// module chunks = 265","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_descriptors.js\n// module id = 22\n// module chunks = 265","var utils = require('./utils.js');\n\n/**\n Required paramaters\n bidderCode,\n height,\n width,\n statusCode\n Optional paramaters\n adId,\n cpm,\n ad,\n adUrl,\n dealId,\n priceKeyString;\n */\nfunction Bid(statusCode, bidRequest) {\n  var _bidSrc = (bidRequest && bidRequest.src) || 'client';\n  var _statusCode = statusCode || 0;\n\n  this.bidderCode = (bidRequest && bidRequest.bidder) || '';\n  this.width = 0;\n  this.height = 0;\n  this.statusMessage = _getStatus();\n  this.adId = utils.getUniqueIdentifierStr();\n  this.requestId = bidRequest && bidRequest.bidId;\n  this.mediaType = 'banner';\n  this.source = _bidSrc;\n\n  function _getStatus() {\n    switch (_statusCode) {\n      case 0:\n        return 'Pending';\n      case 1:\n        return 'Bid available';\n      case 2:\n        return 'Bid returned empty or error response';\n      case 3:\n        return 'Bid timed out';\n    }\n  }\n\n  this.getStatusCode = function () {\n    return _statusCode;\n  };\n\n  // returns the size of the bid creative. Concatenation of width and height by x.\n  this.getSize = function () {\n    return this.width + 'x' + this.height;\n  };\n}\n\n// Bid factory function.\nexport function createBid(statusCode, bidRequest) {\n  return new Bid(statusCode, bidRequest);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/bidfactory.js","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ctx.js\n// module id = 24\n// module chunks = 265","import { deepAccess, getBidRequest, getKeyByValue, insertHtmlIntoIframe, logError, triggerPixel } from './utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst CONSTANTS = require('./constants.json');\n\nexport const nativeAdapters = [];\n\nexport const NATIVE_TARGETING_KEYS = Object.keys(CONSTANTS.NATIVE_KEYS).map(\n  key => CONSTANTS.NATIVE_KEYS[key]\n);\n\nconst IMAGE = {\n  image: { required: true },\n  title: { required: true },\n  sponsoredBy: { required: true },\n  clickUrl: { required: true },\n  body: { required: false },\n  icon: { required: false },\n};\n\nconst SUPPORTED_TYPES = {\n  image: IMAGE\n};\n\n/**\n * Recieves nativeParams from an adUnit. If the params were not of type 'type',\n * passes them on directly. If they were of type 'type', translate\n * them into the predefined specific asset requests for that type of native ad.\n */\nexport function processNativeAdUnitParams(params) {\n  if (params && params.type && typeIsSupported(params.type)) {\n    return SUPPORTED_TYPES[params.type];\n  }\n\n  return params;\n}\n\n/**\n * Check if the native type specified in the adUnit is supported by Prebid.\n */\nfunction typeIsSupported(type) {\n  if (!(type && includes(Object.keys(SUPPORTED_TYPES), type))) {\n    logError(`${type} nativeParam is not supported`);\n    return false;\n  }\n\n  return true;\n}\n\n/**\n * Helper functions for working with native-enabled adUnits\n * TODO: abstract this and the video helper functions into general\n * adunit validation helper functions\n */\nexport const nativeAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === 'native';\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.native');\n  return mediaType || mediaTypes;\n}\nexport const nativeBidder = bid => includes(nativeAdapters, bid.bidder);\nexport const hasNonNativeBidder = adUnit =>\n  adUnit.bids.filter(bid => !nativeBidder(bid)).length;\n\n/**\n * Validate that the native assets on this bid contain all assets that were\n * marked as required in the adUnit configuration.\n * @param {Bid} bid Native bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function nativeBidIsValid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.requestId, bidRequests);\n  if (!bidRequest) { return false; }\n\n  // all native bid responses must define a landing page url\n  if (!deepAccess(bid, 'native.clickUrl')) {\n    return false;\n  }\n\n  if (deepAccess(bid, 'native.image')) {\n    if (!deepAccess(bid, 'native.image.height') || !deepAccess(bid, 'native.image.width')) {\n      return false;\n    }\n  }\n\n  if (deepAccess(bid, 'native.icon')) {\n    if (!deepAccess(bid, 'native.icon.height') || !deepAccess(bid, 'native.icon.width')) {\n      return false;\n    }\n  }\n\n  const requestedAssets = bidRequest.nativeParams;\n  if (!requestedAssets) {\n    return true;\n  }\n\n  const requiredAssets = Object.keys(requestedAssets).filter(\n    key => requestedAssets[key].required\n  );\n  const returnedAssets = Object.keys(bid['native']).filter(\n    key => bid['native'][key]\n  );\n\n  return requiredAssets.every(asset => includes(returnedAssets, asset));\n}\n\n/*\n * Native responses may have associated impression or click trackers.\n * This retrieves the appropriate tracker urls for the given ad object and\n * fires them. As a native creatives may be in a cross-origin frame, it may be\n * necessary to invoke this function via postMessage. secureCreatives is\n * configured to fire this function when it receives a `message` of 'Prebid Native'\n * and an `adId` with the value of the `bid.adId`. When a message is posted with\n * these parameters, impression trackers are fired. To fire click trackers, the\n * message should contain an `action` set to 'click'.\n *\n * // Native creative template example usage\n * <a href=\"%%CLICK_URL_UNESC%%%%PATTERN:hb_native_linkurl%%\"\n *    target=\"_blank\"\n *    onclick=\"fireTrackers('click')\">\n *    %%PATTERN:hb_native_title%%\n * </a>\n *\n * <script>\n *   function fireTrackers(action) {\n *     var message = {message: 'Prebid Native', adId: '%%PATTERN:hb_adid%%'};\n *     if (action === 'click') {message.action = 'click';} // fires click trackers\n *     window.parent.postMessage(JSON.stringify(message), '*');\n *   }\n *   fireTrackers(); // fires impressions when creative is loaded\n * </script>\n */\nexport function fireNativeTrackers(message, adObject) {\n  let trackers;\n  if (message.action === 'click') {\n    trackers = adObject['native'] && adObject['native'].clickTrackers;\n  } else {\n    trackers = adObject['native'] && adObject['native'].impressionTrackers;\n\n    if (adObject['native'] && adObject['native'].javascriptTrackers) {\n      insertHtmlIntoIframe(adObject['native'].javascriptTrackers);\n    }\n  }\n\n  (trackers || []).forEach(triggerPixel);\n  return message.action;\n}\n\n/**\n * Gets native targeting key-value pairs\n * @param {Object} bid\n * @return {Object} targeting\n */\nexport function getNativeTargeting(bid, bidReq) {\n  let keyValues = {};\n\n  Object.keys(bid['native']).forEach(asset => {\n    const key = CONSTANTS.NATIVE_KEYS[asset];\n    let value = getAssetValue(bid['native'][asset]);\n\n    const sendPlaceholder = deepAccess(\n      bidReq,\n      `mediaTypes.native.${asset}.sendId`\n    );\n\n    if (sendPlaceholder) {\n      const placeholder = `${key}:${bid.adId}`;\n      value = placeholder;\n    }\n\n    if (key && value) {\n      keyValues[key] = value;\n    }\n  });\n\n  return keyValues;\n}\n\n/**\n * Constructs a message object containing asset values for each of the\n * requested data keys.\n */\nexport function getAssetMessage(data, adObject) {\n  const message = {\n    message: 'assetResponse',\n    adId: data.adId,\n    assets: [],\n  };\n\n  data.assets.forEach(asset => {\n    const key = getKeyByValue(CONSTANTS.NATIVE_KEYS, asset);\n    const value = getAssetValue(adObject.native[key]);\n\n    message.assets.push({ key, value });\n  });\n\n  return message;\n}\n\n/**\n * Native assets can be a string or an object with a url prop. Returns the value\n * appropriate for sending in adserver targeting or placeholder replacement.\n */\nfunction getAssetValue(value) {\n  if (typeof value === 'object' && value.url) {\n    return value.url;\n  }\n\n  return value;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/native.js","require('../../modules/es6.string.includes');\nmodule.exports = require('../../modules/_core').String.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/string/includes.js\n// module id = 250\n// module chunks = 265","// 21.1.3.7 String.prototype.includes(searchString, position = 0)\n'use strict';\nvar $export = require('./_export');\nvar context = require('./_string-context');\nvar INCLUDES = 'includes';\n\n$export($export.P + $export.F * require('./_fails-is-regexp')(INCLUDES), 'String', {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~context(this, searchString, INCLUDES)\n      .indexOf(searchString, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.includes.js\n// module id = 251\n// module chunks = 265","// helper for String#{startsWith, endsWith, includes}\nvar isRegExp = require('./_is-regexp');\nvar defined = require('./_defined');\n\nmodule.exports = function (that, searchString, NAME) {\n  if (isRegExp(searchString)) throw TypeError('String#' + NAME + \" doesn't accept regex!\");\n  return String(defined(that));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_string-context.js\n// module id = 252\n// module chunks = 265","// 7.2.8 IsRegExp(argument)\nvar isObject = require('./_is-object');\nvar cof = require('./_cof');\nvar MATCH = require('./_wks')('match');\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : cof(it) == 'RegExp');\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-regexp.js\n// module id = 253\n// module chunks = 265","var MATCH = require('./_wks')('match');\nmodule.exports = function (KEY) {\n  var re = /./;\n  try {\n    '/./'[KEY](re);\n  } catch (e) {\n    try {\n      re[MATCH] = false;\n      return !'/./'[KEY](re);\n    } catch (f) { /* empty */ }\n  } return true;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails-is-regexp.js\n// module id = 254\n// module chunks = 265","import * as utils from './utils';\nimport { config } from './config';\nimport includes from 'core-js/library/fn/array/includes';\n\n// Set userSync default values\nconfig.setDefaults({\n  'userSync': {\n    syncEnabled: true,\n    pixelEnabled: true,\n    syncsPerBidder: 5,\n    syncDelay: 3000\n  }\n});\n\n/**\n * Factory function which creates a new UserSyncPool.\n *\n * @param {UserSyncDependencies} userSyncDependencies Configuration options and dependencies which the\n *   UserSync object needs in order to behave properly.\n */\nexport function newUserSync(userSyncDependencies) {\n  let publicApi = {};\n  // A queue of user syncs for each adapter\n  // Let getDefaultQueue() set the defaults\n  let queue = getDefaultQueue();\n\n  // Whether or not user syncs have been trigger on this page load for a specific bidder\n  let hasFiredBidder = new Set();\n  // How many bids for each adapter\n  let numAdapterBids = {};\n\n  // for now - default both to false in case filterSettings config is absent/misconfigured\n  let permittedPixels = {\n    image: false,\n    iframe: false\n  };\n\n  // Use what is in config by default\n  let usConfig = userSyncDependencies.config;\n  // Update if it's (re)set\n  config.getConfig('userSync', (conf) => {\n    usConfig = Object.assign(usConfig, conf.userSync);\n  });\n\n  /**\n   * @function getDefaultQueue\n   * @summary Returns the default empty queue\n   * @private\n   * @return {object} A queue with no syncs\n   */\n  function getDefaultQueue() {\n    return {\n      image: [],\n      iframe: []\n    };\n  }\n\n  /**\n   * @function fireSyncs\n   * @summary Trigger all user syncs in the queue\n   * @private\n   */\n  function fireSyncs() {\n    if (!usConfig.syncEnabled || !userSyncDependencies.browserSupportsCookies) {\n      return;\n    }\n\n    try {\n      // Image pixels\n      fireImagePixels();\n      // Iframe syncs\n      loadIframes();\n    } catch (e) {\n      return utils.logError('Error firing user syncs', e);\n    }\n    // Reset the user sync queue\n    queue = getDefaultQueue();\n  }\n\n  function forEachFire(queue, fn) {\n    // Randomize the order of the pixels before firing\n    // This is to avoid giving any bidder who has registered multiple syncs\n    // any preferential treatment and balancing them out\n    utils.shuffle(queue).forEach((sync) => {\n      fn(sync);\n      hasFiredBidder.add(sync[0]);\n    });\n  }\n\n  /**\n   * @function fireImagePixels\n   * @summary Loops through user sync pixels and fires each one\n   * @private\n   */\n  function fireImagePixels() {\n    if (!(usConfig.pixelEnabled || permittedPixels.image)) {\n      return;\n    }\n    forEachFire(queue.image, (sync) => {\n      let [bidderName, trackingPixelUrl] = sync;\n      utils.logMessage(`Invoking image pixel user sync for bidder: ${bidderName}`);\n      // Create image object and add the src url\n      utils.triggerPixel(trackingPixelUrl);\n    });\n  }\n\n  /**\n   * @function loadIframes\n   * @summary Loops through iframe syncs and loads an iframe element into the page\n   * @private\n   */\n  function loadIframes() {\n    if (!(usConfig.iframeEnabled || permittedPixels.iframe)) {\n      return;\n    }\n    forEachFire(queue.iframe, (sync) => {\n      let [bidderName, iframeUrl] = sync;\n      utils.logMessage(`Invoking iframe user sync for bidder: ${bidderName}`);\n      // Insert iframe into DOM\n      utils.insertUserSyncIframe(iframeUrl);\n    });\n  }\n\n  /**\n   * @function incrementAdapterBids\n   * @summary Increment the count of user syncs queue for the adapter\n   * @private\n   * @params {object} numAdapterBids The object contain counts for all adapters\n   * @params {string} bidder The name of the bidder adding a sync\n   * @returns {object} The updated version of numAdapterBids\n   */\n  function incrementAdapterBids(numAdapterBids, bidder) {\n    if (!numAdapterBids[bidder]) {\n      numAdapterBids[bidder] = 1;\n    } else {\n      numAdapterBids[bidder] += 1;\n    }\n    return numAdapterBids;\n  }\n\n  /**\n   * @function registerSync\n   * @summary Add sync for this bidder to a queue to be fired later\n   * @public\n   * @params {string} type The type of the sync including image, iframe\n   * @params {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @params {string} url Either the pixel url or iframe url depending on the type\n\n   * @example <caption>Using Image Sync</caption>\n   * // registerSync(type, adapter, pixelUrl)\n   * userSync.registerSync('image', 'rubicon', 'http://example.com/pixel')\n   */\n  publicApi.registerSync = (type, bidder, url) => {\n    if (hasFiredBidder.has(bidder)) {\n      return utils.logMessage(`already fired syncs for \"${bidder}\", ignoring registerSync call`);\n    }\n    if (!usConfig.syncEnabled || !utils.isArray(queue[type])) {\n      return utils.logWarn(`User sync type \"${type}\" not supported`);\n    }\n    if (!bidder) {\n      return utils.logWarn(`Bidder is required for registering sync`);\n    }\n    if (usConfig.syncsPerBidder !== 0 && Number(numAdapterBids[bidder]) >= usConfig.syncsPerBidder) {\n      return utils.logWarn(`Number of user syncs exceeded for \"${bidder}\"`);\n    }\n\n    const canBidderRegisterSync = publicApi.canBidderRegisterSync(type, bidder);\n    if (!canBidderRegisterSync) {\n      return utils.logWarn(`Bidder \"${bidder}\" not permitted to register their \"${type}\" userSync pixels.`);\n    }\n\n    // the bidder's pixel has passed all checks and is allowed to register\n    queue[type].push([bidder, url]);\n    numAdapterBids = incrementAdapterBids(numAdapterBids, bidder);\n  };\n\n  /**\n   * @function shouldBidderBeBlocked\n   * @summary Check filterSettings logic to determine if the bidder should be prevented from registering their userSync tracker\n   * @private\n   * @param {string} type The type of the sync; either image or iframe\n   * @param {string} bidder The name of the adapter. e.g. \"rubicon\"\n   * @returns {boolean} true => bidder is not allowed to register; false => bidder can register\n    */\n  function shouldBidderBeBlocked(type, bidder) {\n    let filterConfig = usConfig.filterSettings;\n\n    // apply the filter check if the config object is there (eg filterSettings.iframe exists) and if the config object is properly setup\n    if (isFilterConfigValid(filterConfig, type)) {\n      permittedPixels[type] = true;\n\n      let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n      let biddersToFilter = (activeConfig.bidders === '*') ? [bidder] : activeConfig.bidders;\n      let filterType = activeConfig.filter || 'include'; // set default if undefined\n\n      // return true if the bidder is either: not part of the include (ie outside the whitelist) or part of the exclude (ie inside the blacklist)\n      const checkForFiltering = {\n        'include': (bidders, bidder) => !includes(bidders, bidder),\n        'exclude': (bidders, bidder) => includes(bidders, bidder)\n      }\n      return checkForFiltering[filterType](biddersToFilter, bidder);\n    }\n    return false;\n  }\n\n  /**\n   * @function isFilterConfigValid\n   * @summary Check if the filterSettings object in the userSync config is setup properly\n   * @private\n   * @param {object} filterConfig sub-config object taken from filterSettings\n   * @param {string} type The type of the sync; either image or iframe\n   * @returns {boolean} true => config is setup correctly, false => setup incorrectly or filterConfig[type] is not present\n   */\n  function isFilterConfigValid(filterConfig, type) {\n    if (filterConfig.all && filterConfig[type]) {\n      utils.logWarn(`Detected presence of the \"filterSettings.all\" and \"filterSettings.${type}\" in userSync config.  You cannot mix \"all\" with \"iframe/image\" configs; they are mutually exclusive.`);\n      return false;\n    }\n\n    let activeConfig = (filterConfig.all) ? filterConfig.all : filterConfig[type];\n    let activeConfigName = (filterConfig.all) ? 'all' : type;\n\n    // if current pixel type isn't part of the config's logic, skip rest of the config checks...\n    // we return false to skip subsequent filter checks in shouldBidderBeBlocked() function\n    if (!activeConfig) {\n      return false;\n    }\n\n    let filterField = activeConfig.filter;\n    let biddersField = activeConfig.bidders;\n\n    if (filterField && filterField !== 'include' && filterField !== 'exclude') {\n      utils.logWarn(`UserSync \"filterSettings.${activeConfigName}.filter\" setting '${filterField}' is not a valid option; use either 'include' or 'exclude'.`);\n      return false;\n    }\n\n    if (biddersField !== '*' && !(Array.isArray(biddersField) && biddersField.length > 0 && biddersField.every(bidderInList => utils.isStr(bidderInList) && bidderInList !== '*'))) {\n      utils.logWarn(`Detected an invalid setup in userSync \"filterSettings.${activeConfigName}.bidders\"; use either '*' (to represent all bidders) or an array of bidders.`);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * @function syncUsers\n   * @summary Trigger all the user syncs based on publisher-defined timeout\n   * @public\n   * @params {int} timeout The delay in ms before syncing data - default 0\n   */\n  publicApi.syncUsers = (timeout = 0) => {\n    if (timeout) {\n      return setTimeout(fireSyncs, Number(timeout));\n    }\n    fireSyncs();\n  };\n\n  /**\n   * @function triggerUserSyncs\n   * @summary A `syncUsers` wrapper for determining if enableOverride has been turned on\n   * @public\n   */\n  publicApi.triggerUserSyncs = () => {\n    if (usConfig.enableOverride) {\n      publicApi.syncUsers();\n    }\n  };\n\n  publicApi.canBidderRegisterSync = (type, bidder) => {\n    if (usConfig.filterSettings) {\n      if (shouldBidderBeBlocked(type, bidder)) {\n        return false;\n      }\n      // TODO remove this else if code that supports deprecated fields (sometime in 2.x); for now - only run if filterSettings config is not present\n    } else if (usConfig.enabledBidders && usConfig.enabledBidders.length && usConfig.enabledBidders.indexOf(bidder) < 0) {\n      return false\n    } else if (type === 'iframe' && !(usConfig.iframeEnabled || permittedPixels.iframe)) {\n      return false;\n    } else if (type === 'image' && !(usConfig.pixelEnabled || permittedPixels.image)) {\n      return false;\n    }\n    return true;\n  }\n  return publicApi;\n}\n\nconst browserSupportsCookies = !utils.isSafariBrowser() && utils.cookiesAreEnabled();\n\nexport const userSync = newUserSync({\n  config: config.getConfig('userSync'),\n  browserSupportsCookies: browserSupportsCookies\n});\n\n/**\n * @typedef {Object} UserSyncDependencies\n *\n * @property {UserSyncConfig} config\n * @property {boolean} browserSupportsCookies True if the current browser supports cookies, and false otherwise.\n */\n\n/**\n * @typedef {Object} UserSyncConfig\n *\n * @property {boolean} enableOverride\n * @property {boolean} syncEnabled\n * @property {boolean} pixelEnabled\n * @property {boolean} iframeEnabled\n * @property {int} syncsPerBidder\n * @property {string[]} enabledBidders\n * @property {Object} filterSettings\n */\n\n\n\n// WEBPACK FOOTER //\n// ./src/userSync.js","// if $$PREBID_GLOBAL$$ already exists in global document scope, use it, if not, create the object\n// global defination should happen BEFORE imports to avoid global undefined errors.\nwindow.$$PREBID_GLOBAL$$ = (window.$$PREBID_GLOBAL$$ || {});\nwindow.$$PREBID_GLOBAL$$.cmd = window.$$PREBID_GLOBAL$$.cmd || [];\nwindow.$$PREBID_GLOBAL$$.que = window.$$PREBID_GLOBAL$$.que || [];\n\nexport function getGlobal() {\n  return window.$$PREBID_GLOBAL$$;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebidGlobal.js","/**\n * AuctionManager modules is responsible for creating auction instances.\n * This module is the gateway for Prebid core to access auctions.\n * It stores all created instances of auction and can be used to get consolidated values from auction.\n */\n\n/**\n * @typedef {Object} AuctionManager\n *\n * @property {function(): Array} getBidsRequested - returns consolidated bid requests\n * @property {function(): Array} getBidsReceived - returns consolidated bid received\n * @property {function(): Array} getAdUnits - returns consolidated adUnits\n * @property {function(): Array} getAdUnitCodes - returns consolidated adUnitCodes\n * @property {function(): Object} createAuction - creates auction instance and stores it for future reference\n * @property {function(): Object} findBidByAdId - find bid received by adId. This function will be called by $$PREBID_GLOBAL$$.renderAd\n * @property {function(): Object} getStandardBidderAdServerTargeting - returns standard bidder targeting for all the adapters. Refer http://prebid.org/dev-docs/publisher-api-reference.html#module_pbjs.bidderSettings for more details\n */\n\nimport { uniques, flatten } from './utils';\nimport { newAuction, getStandardBidderSettings, AUCTION_COMPLETED } from './auction';\nimport find from 'core-js/library/fn/array/find';\n\nconst CONSTANTS = require('./constants.json');\n\n/**\n * Creates new instance of auctionManager. There will only be one instance of auctionManager but\n * a factory is created to assist in testing.\n *\n * @returns {AuctionManager} auctionManagerInstance\n */\nexport function newAuctionManager() {\n  const _auctions = [];\n  const auctionManager = {};\n\n  auctionManager.addWinningBid = function(bid) {\n    const auction = find(_auctions, auction => auction.getAuctionId() === bid.auctionId);\n    if (auction) {\n      auction.addWinningBid(bid);\n    } else {\n      utils.logWarn(`Auction not found when adding winning bid`);\n    }\n  };\n\n  auctionManager.getAllWinningBids = function() {\n    return _auctions.map(auction => auction.getWinningBids())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getBidsRequested = function() {\n    return _auctions.map(auction => auction.getBidRequests())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getNoBids = function() {\n    return _auctions.map(auction => auction.getNoBids())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getBidsReceived = function() {\n    return _auctions.map((auction) => {\n      if (auction.getAuctionStatus() === AUCTION_COMPLETED) {\n        return auction.getBidsReceived();\n      }\n    }).reduce(flatten, [])\n      .filter(bid => bid);\n  };\n\n  auctionManager.getAdUnits = function() {\n    return _auctions.map(auction => auction.getAdUnits())\n      .reduce(flatten, []);\n  };\n\n  auctionManager.getAdUnitCodes = function() {\n    return _auctions.map(auction => auction.getAdUnitCodes())\n      .reduce(flatten, [])\n      .filter(uniques);\n  };\n\n  auctionManager.createAuction = function({ adUnits, adUnitCodes, callback, cbTimeout, labels, auctionId }) {\n    const auction = newAuction({ adUnits, adUnitCodes, callback, cbTimeout, labels, auctionId });\n    _addAuction(auction);\n    return auction;\n  };\n\n  auctionManager.findBidByAdId = function(adId) {\n    return find(_auctions.map(auction => auction.getBidsReceived()).reduce(flatten, []), bid => bid.adId === adId);\n  };\n\n  auctionManager.getStandardBidderAdServerTargeting = function() {\n    return getStandardBidderSettings()[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  };\n\n  auctionManager.setStatusForBids = function(adId, status) {\n    let bid = auctionManager.findBidByAdId(adId);\n    if (bid) bid.status = status;\n\n    if (bid && status === CONSTANTS.BID_STATUS.BID_TARGETING_SET) {\n      const auction = find(_auctions, auction => auction.getAuctionId() === bid.auctionId);\n      if (auction) auction.setBidTargeting(bid);\n    }\n  }\n\n  auctionManager.getLastAuctionId = function() {\n    return _auctions.length && _auctions[_auctions.length - 1].getAuctionId()\n  };\n\n  function _addAuction(auction) {\n    _auctions.push(auction);\n  }\n\n  return auctionManager;\n}\n\nexport const auctionManager = newAuctionManager();\n\n\n\n// WEBPACK FOOTER //\n// ./src/auctionManager.js","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-object.js\n// module id = 29\n// module chunks = 265","/*\n * Module for getting and setting Prebid configuration.\n */\nimport { isValidPriceConfig } from './cpmBucketManager';\nimport find from 'core-js/library/fn/array/find';\nimport includes from 'core-js/library/fn/array/includes';\nimport { parseQS } from './url';\n\nconst utils = require('./utils');\nconst CONSTANTS = require('./constants');\n\nconst DEFAULT_DEBUG = (parseQS(window.location.search)[CONSTANTS.DEBUG_MODE] || '').toUpperCase() === 'TRUE';\nconst DEFAULT_BIDDER_TIMEOUT = 3000;\nconst DEFAULT_PUBLISHER_DOMAIN = window.location.origin;\nconst DEFAULT_ENABLE_SEND_ALL_BIDS = true;\nconst DEFAULT_DISABLE_AJAX_TIMEOUT = false;\nconst DEFAULT_BID_CACHE = false;\n\nconst DEFAULT_TIMEOUTBUFFER = 400;\n\nexport const RANDOM = 'random';\nconst FIXED = 'fixed';\n\nconst VALID_ORDERS = {};\nVALID_ORDERS[RANDOM] = true;\nVALID_ORDERS[FIXED] = true;\n\nconst DEFAULT_BIDDER_SEQUENCE = RANDOM;\n\nconst GRANULARITY_OPTIONS = {\n  LOW: 'low',\n  MEDIUM: 'medium',\n  HIGH: 'high',\n  AUTO: 'auto',\n  DENSE: 'dense',\n  CUSTOM: 'custom'\n};\n\nconst ALL_TOPICS = '*';\n\n/**\n * @typedef {object} PrebidConfig\n *\n * @property {string} cache.url Set a url if we should use prebid-cache to store video bids before adding\n *   bids to the auction. **NOTE** This must be set if you want to use the dfpAdServerVideo module.\n */\n\nexport function newConfig() {\n  let listeners = [];\n  let defaults;\n  let config;\n\n  function resetConfig() {\n    defaults = {};\n    let newConfig = {\n      // `debug` is equivalent to legacy `pbjs.logging` property\n      _debug: DEFAULT_DEBUG,\n      get debug() {\n        return this._debug;\n      },\n      set debug(val) {\n        this._debug = val;\n      },\n\n      // default timeout for all bids\n      _bidderTimeout: DEFAULT_BIDDER_TIMEOUT,\n      get bidderTimeout() {\n        return this._bidderTimeout;\n      },\n      set bidderTimeout(val) {\n        this._bidderTimeout = val;\n      },\n\n      // domain where prebid is running for cross domain iframe communication\n      _publisherDomain: DEFAULT_PUBLISHER_DOMAIN,\n      get publisherDomain() {\n        return this._publisherDomain;\n      },\n      set publisherDomain(val) {\n        this._publisherDomain = val;\n      },\n\n      // calls existing function which may be moved after deprecation\n      _priceGranularity: GRANULARITY_OPTIONS.MEDIUM,\n      set priceGranularity(val) {\n        if (validatePriceGranularity(val)) {\n          if (typeof val === 'string') {\n            this._priceGranularity = (hasGranularity(val)) ? val : GRANULARITY_OPTIONS.MEDIUM;\n          } else if (typeof val === 'object') {\n            this._customPriceBucket = val;\n            this._priceGranularity = GRANULARITY_OPTIONS.CUSTOM;\n            utils.logMessage('Using custom price granularity');\n          }\n        }\n      },\n      get priceGranularity() {\n        return this._priceGranularity;\n      },\n\n      _customPriceBucket: {},\n      get customPriceBucket() {\n        return this._customPriceBucket;\n      },\n\n      _mediaTypePriceGranularity: {},\n      get mediaTypePriceGranularity() {\n        return this._mediaTypePriceGranularity;\n      },\n      set mediaTypePriceGranularity(val) {\n        this._mediaTypePriceGranularity = Object.keys(val).reduce((aggregate, item) => {\n          if (validatePriceGranularity(val[item])) {\n            if (typeof val === 'string') {\n              aggregate[item] = (hasGranularity(val[item])) ? val[item] : this._priceGranularity;\n            } else if (typeof val === 'object') {\n              aggregate[item] = val[item];\n              utils.logMessage(`Using custom price granularity for ${item}`);\n            }\n          } else {\n            utils.logWarn(`Invalid price granularity for media type: ${item}`);\n          }\n          return aggregate;\n        }, {});\n      },\n\n      _sendAllBids: DEFAULT_ENABLE_SEND_ALL_BIDS,\n      get enableSendAllBids() {\n        return this._sendAllBids;\n      },\n      set enableSendAllBids(val) {\n        this._sendAllBids = val;\n      },\n\n      _useBidCache: DEFAULT_BID_CACHE,\n      get useBidCache() {\n        return this._useBidCache;\n      },\n      set useBidCache(val) {\n        this._useBidCache = val;\n      },\n\n      _bidderSequence: DEFAULT_BIDDER_SEQUENCE,\n      get bidderSequence() {\n        return this._bidderSequence;\n      },\n      set bidderSequence(val) {\n        if (VALID_ORDERS[val]) {\n          this._bidderSequence = val;\n        } else {\n          utils.logWarn(`Invalid order: ${val}. Bidder Sequence was not set.`);\n        }\n      },\n\n      // timeout buffer to adjust for bidder CDN latency\n      _timeoutBuffer: DEFAULT_TIMEOUTBUFFER,\n      get timeoutBuffer() {\n        return this._timeoutBuffer;\n      },\n      set timeoutBuffer(val) {\n        this._timeoutBuffer = val;\n      },\n\n      _disableAjaxTimeout: DEFAULT_DISABLE_AJAX_TIMEOUT,\n      get disableAjaxTimeout() {\n        return this._disableAjaxTimeout;\n      },\n      set disableAjaxTimeout(val) {\n        this._disableAjaxTimeout = val;\n      },\n\n    };\n\n    if (config) {\n      callSubscribers(\n        Object.keys(config).reduce((memo, topic) => {\n          if (config[topic] !== newConfig[topic]) {\n            memo[topic] = newConfig[topic] || {};\n          }\n          return memo;\n        },\n        {})\n      );\n    }\n\n    config = newConfig;\n\n    function hasGranularity(val) {\n      return find(Object.keys(GRANULARITY_OPTIONS), option => val === GRANULARITY_OPTIONS[option]);\n    }\n\n    function validatePriceGranularity(val) {\n      if (!val) {\n        utils.logError('Prebid Error: no value passed to `setPriceGranularity()`');\n        return false;\n      }\n      if (typeof val === 'string') {\n        if (!hasGranularity(val)) {\n          utils.logWarn('Prebid Warning: setPriceGranularity was called with invalid setting, using `medium` as default.');\n        }\n      } else if (typeof val === 'object') {\n        if (!isValidPriceConfig(val)) {\n          utils.logError('Invalid custom price value passed to `setPriceGranularity()`');\n          return false;\n        }\n      }\n      return true;\n    }\n  }\n\n  /*\n   * Returns configuration object if called without parameters,\n   * or single configuration property if given a string matching a configuration\n   * property name.  Allows deep access e.g. getConfig('currency.adServerCurrency')\n   *\n   * If called with callback parameter, or a string and a callback parameter,\n   * subscribes to configuration updates. See `subscribe` function for usage.\n   */\n  function getConfig(...args) {\n    if (args.length <= 1 && typeof args[0] !== 'function') {\n      const option = args[0];\n      return option ? utils.deepAccess(config, option) : config;\n    }\n\n    return subscribe(...args);\n  }\n\n  /*\n   * Sets configuration given an object containing key-value pairs and calls\n   * listeners that were added by the `subscribe` function\n   */\n  function setConfig(options) {\n    if (typeof options !== 'object') {\n      utils.logError('setConfig options must be an object');\n      return;\n    }\n\n    let topics = Object.keys(options);\n    let topicalConfig = {};\n\n    topics.forEach(topic => {\n      let option = options[topic];\n\n      if (typeof defaults[topic] === 'object' && typeof option === 'object') {\n        option = Object.assign({}, defaults[topic], option);\n      }\n\n      topicalConfig[topic] = config[topic] = option;\n    });\n\n    callSubscribers(topicalConfig);\n  }\n\n  /**\n   * Sets configuration defaults which setConfig values can be applied on top of\n   * @param {object} options\n   */\n  function setDefaults(options) {\n    if (typeof defaults !== 'object') {\n      utils.logError('defaults must be an object');\n      return;\n    }\n\n    Object.assign(defaults, options);\n    // Add default values to config as well\n    Object.assign(config, options);\n  }\n\n  /*\n   * Adds a function to a set of listeners that are invoked whenever `setConfig`\n   * is called. The subscribed function will be passed the options object that\n   * was used in the `setConfig` call. Topics can be subscribed to to only get\n   * updates when specific properties are updated by passing a topic string as\n   * the first parameter.\n   *\n   * Returns an `unsubscribe` function for removing the subscriber from the\n   * set of listeners\n   *\n   * Example use:\n   * // subscribe to all configuration changes\n   * subscribe((config) => console.log('config set:', config));\n   *\n   * // subscribe to only 'logging' changes\n   * subscribe('logging', (config) => console.log('logging set:', config));\n   *\n   * // unsubscribe\n   * const unsubscribe = subscribe(...);\n   * unsubscribe(); // no longer listening\n   */\n  function subscribe(topic, listener) {\n    let callback = listener;\n\n    if (typeof topic !== 'string') {\n      // first param should be callback function in this case,\n      // meaning it gets called for any config change\n      callback = topic;\n      topic = ALL_TOPICS;\n    }\n\n    if (typeof callback !== 'function') {\n      utils.logError('listener must be a function');\n      return;\n    }\n\n    listeners.push({ topic, callback });\n\n    // save and call this function to remove the listener\n    return function unsubscribe() {\n      listeners.splice(listeners.indexOf(listener), 1);\n    };\n  }\n\n  /*\n   * Calls listeners that were added by the `subscribe` function\n   */\n  function callSubscribers(options) {\n    const TOPICS = Object.keys(options);\n\n    // call subscribers of a specific topic, passing only that configuration\n    listeners\n      .filter(listener => includes(TOPICS, listener.topic))\n      .forEach(listener => {\n        listener.callback({ [listener.topic]: options[listener.topic] });\n      });\n\n    // call subscribers that didn't give a topic, passing everything that was set\n    listeners\n      .filter(listener => listener.topic === ALL_TOPICS)\n      .forEach(listener => listener.callback(options));\n  }\n\n  resetConfig();\n\n  return {\n    getConfig,\n    setConfig,\n    setDefaults,\n    resetConfig\n  };\n}\n\nexport const config = newConfig();\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_has.js\n// module id = 30\n// module chunks = 265","import adapterManager from './adapterManager';\nimport { getBidRequest, deepAccess, logError } from './utils';\nimport { config } from '../src/config';\nimport includes from 'core-js/library/fn/array/includes';\nimport { hook } from './hook';\n\nconst VIDEO_MEDIA_TYPE = 'video';\nexport const OUTSTREAM = 'outstream';\nexport const INSTREAM = 'instream';\n\n/**\n * Helper functions for working with video-enabled adUnits\n */\nexport const videoAdUnit = adUnit => {\n  const mediaType = adUnit.mediaType === VIDEO_MEDIA_TYPE;\n  const mediaTypes = deepAccess(adUnit, 'mediaTypes.video');\n  return mediaType || mediaTypes;\n};\nexport const videoBidder = bid => includes(adapterManager.videoAdapters, bid.bidder);\nexport const hasNonVideoBidder = adUnit =>\n  adUnit.bids.filter(bid => !videoBidder(bid)).length;\n\n/**\n * @typedef {object} VideoBid\n * @property {string} adId id of the bid\n */\n\n/**\n * Validate that the assets required for video context are present on the bid\n * @param {VideoBid} bid Video bid to validate\n * @param {BidRequest[]} bidRequests All bid requests for an auction\n * @return {Boolean} If object is valid\n */\nexport function isValidVideoBid(bid, bidRequests) {\n  const bidRequest = getBidRequest(bid.requestId, bidRequests);\n\n  const videoMediaType =\n    bidRequest && deepAccess(bidRequest, 'mediaTypes.video');\n  const context = videoMediaType && deepAccess(videoMediaType, 'context');\n\n  // if context not defined assume default 'instream' for video bids\n  // instream bids require a vast url or vast xml content\n  return checkVideoBidSetup(bid, bidRequest, videoMediaType, context);\n}\n\nexport const checkVideoBidSetup = hook('sync', function(bid, bidRequest, videoMediaType, context) {\n  if (!bidRequest || (videoMediaType && context !== OUTSTREAM)) {\n    // xml-only video bids require a prebid cache url\n    if (!config.getConfig('cache.url') && bid.vastXml && !bid.vastUrl) {\n      logError(`\n        This bid contains only vastXml and will not work when a prebid cache url is not specified.\n        Try enabling prebid cache with $$PREBID_GLOBAL$$.setConfig({ cache: {url: \"...\"} });\n      `);\n      return false;\n    }\n\n    return !!(bid.vastUrl || bid.vastXml);\n  }\n\n  // outstream bids require a renderer on the bid or pub-defined on adunit\n  if (context === OUTSTREAM) {\n    return !!(bid.renderer || bidRequest.renderer);\n  }\n\n  return true;\n}, 'checkVideoBidSetup');\n\n\n\n// WEBPACK FOOTER //\n// ./src/video.js","module.exports = {};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iterators.js\n// module id = 32\n// module chunks = 265","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_fails.js\n// module id = 33\n// module chunks = 265","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_cof.js\n// module id = 34\n// module chunks = 265","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_defined.js\n// module id = 35\n// module chunks = 265","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-length.js\n// module id = 36\n// module chunks = 265","require('../../modules/es6.number.is-integer');\nmodule.exports = require('../../modules/_core').Number.isInteger;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/number/is-integer.js\n// module id = 366\n// module chunks = 265","// 20.1.2.3 Number.isInteger(number)\nvar $export = require('./_export');\n\n$export($export.S, 'Number', { isInteger: require('./_is-integer') });\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.number.is-integer.js\n// module id = 367\n// module chunks = 265","// 20.1.2.3 Number.isInteger(number)\nvar isObject = require('./_is-object');\nvar floor = Math.floor;\nmodule.exports = function isInteger(it) {\n  return !isObject(it) && isFinite(it) && floor(it) === it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-integer.js\n// module id = 368\n// module chunks = 265","module.exports = function () { /* empty */ };\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_add-to-unscopables.js\n// module id = 37\n// module chunks = 265","require('../../modules/es6.array.find-index');\nmodule.exports = require('../../modules/_core').Array.findIndex;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/find-index.js\n// module id = 38\n// module chunks = 265","/**\n * Module for auction instances.\n *\n * In Prebid 0.x, $$PREBID_GLOBAL$$ had _bidsRequested and _bidsReceived as public properties.\n * Starting 1.0, Prebid will support concurrent auctions. Each auction instance will store private properties, bidsRequested and bidsReceived.\n *\n * AuctionManager will create instance of auction and will store all the auctions.\n *\n */\n\n/**\n  * @typedef {Object} AdUnit An object containing the adUnit configuration.\n  *\n  * @property {string} code A code which will be used to uniquely identify this bidder. This should be the same\n  *   one as is used in the call to registerBidAdapter\n  * @property {Array.<size>} sizes A list of size for adUnit.\n  * @property {object} params Any bidder-specific params which the publisher used in their bid request.\n  *   This is guaranteed to have passed the spec.areParamsValid() test.\n  */\n\n/**\n * @typedef {Array.<number>} size\n */\n\n/**\n * @typedef {Array.<string>} AdUnitCode\n */\n\n/**\n * @typedef {Object} BidRequest\n * //TODO add all properties\n */\n\n/**\n * @typedef {Object} BidReceived\n * //TODO add all properties\n */\n\n/**\n * @typedef {Object} Auction\n *\n * @property {function(): string} getAuctionStatus - returns the auction status which can be any one of 'started', 'in progress' or 'completed'\n * @property {function(): AdUnit[]} getAdUnits - return the adUnits for this auction instance\n * @property {function(): AdUnitCode[]} getAdUnitCodes - return the adUnitCodes for this auction instance\n * @property {function(): BidRequest[]} getBidRequests - get all bid requests for this auction instance\n * @property {function(): BidReceived[]} getBidsReceived - get all bid received for this auction instance\n * @property {function(): void} startAuctionTimer - sets the bidsBackHandler callback and starts the timer for auction\n * @property {function(): void} callBids - sends requests to all adapters for bids\n */\n\nimport { flatten, timestamp, adUnitsFilter, deepAccess, getBidRequest, getValue } from './utils';\nimport { parse as parseURL } from './url';\nimport { getPriceBucketString } from './cpmBucketManager';\nimport { getNativeTargeting } from './native';\nimport { getCacheUrl, store } from './videoCache';\nimport { Renderer } from './Renderer';\nimport { config } from './config';\nimport { userSync } from './userSync';\nimport { hook } from './hook';\nimport find from 'core-js/library/fn/array/find';\nimport { OUTSTREAM } from './video';\n\nconst { syncUsers } = userSync;\nconst utils = require('./utils');\nconst adapterManager = require('./adapterManager').default;\nconst events = require('./events');\nconst CONSTANTS = require('./constants.json');\n\nexport const AUCTION_STARTED = 'started';\nexport const AUCTION_IN_PROGRESS = 'inProgress';\nexport const AUCTION_COMPLETED = 'completed';\n\n// register event for bid adjustment\nevents.on(CONSTANTS.EVENTS.BID_ADJUSTMENT, function (bid) {\n  adjustBids(bid);\n});\n\nconst MAX_REQUESTS_PER_ORIGIN = 4;\nconst outstandingRequests = {};\nconst sourceInfo = {};\nconst queuedCalls = [];\n\n/**\n  * Creates new auction instance\n  *\n  * @param {Object} requestConfig\n  * @param {AdUnit} requestConfig.adUnits\n  * @param {AdUnitCode} requestConfig.adUnitCode\n  *\n  * @returns {Auction} auction instance\n  */\nexport function newAuction({adUnits, adUnitCodes, callback, cbTimeout, labels, auctionId}) {\n  let _adUnits = adUnits;\n  let _labels = labels;\n  let _adUnitCodes = adUnitCodes;\n  let _bidderRequests = [];\n  let _bidsReceived = [];\n  let _noBids = [];\n  let _auctionStart;\n  let _auctionEnd;\n  let _auctionId = auctionId || utils.generateUUID();\n  let _auctionStatus;\n  let _callback = callback;\n  let _timer;\n  let _timeout = cbTimeout;\n  let _winningBids = [];\n  let _timelyBidders = new Set();\n\n  function addBidRequests(bidderRequests) { _bidderRequests = _bidderRequests.concat(bidderRequests) };\n  function addBidReceived(bidsReceived) { _bidsReceived = _bidsReceived.concat(bidsReceived); }\n  function addNoBid(noBid) { _noBids = _noBids.concat(noBid); }\n\n  function getProperties() {\n    return {\n      auctionId: _auctionId,\n      timestamp: _auctionStart,\n      auctionEnd: _auctionEnd,\n      auctionStatus: _auctionStatus,\n      adUnits: _adUnits,\n      adUnitCodes: _adUnitCodes,\n      labels: _labels,\n      bidderRequests: _bidderRequests,\n      noBids: _noBids,\n      bidsReceived: _bidsReceived,\n      winningBids: _winningBids,\n      timeout: _timeout\n    };\n  }\n\n  function startAuctionTimer() {\n    const timedOut = true;\n    const timeoutCallback = executeCallback.bind(null, timedOut);\n    let timer = setTimeout(timeoutCallback, _timeout);\n    _timer = timer;\n  }\n\n  function executeCallback(timedOut, cleartimer) {\n    // clear timer when done calls executeCallback\n    if (cleartimer) {\n      clearTimeout(_timer);\n    }\n\n    if (_auctionEnd === undefined) {\n      let timedOutBidders = [];\n      if (timedOut) {\n        utils.logMessage(`Auction ${_auctionId} timedOut`);\n        timedOutBidders = getTimedOutBids(_bidderRequests, _timelyBidders);\n        if (timedOutBidders.length) {\n          events.emit(CONSTANTS.EVENTS.BID_TIMEOUT, timedOutBidders);\n        }\n      }\n\n      _auctionStatus = AUCTION_COMPLETED;\n      _auctionEnd = Date.now();\n\n      events.emit(CONSTANTS.EVENTS.AUCTION_END, getProperties());\n      try {\n        if (_callback != null) {\n          const adUnitCodes = _adUnitCodes;\n          const bids = _bidsReceived\n            .filter(utils.bind.call(adUnitsFilter, this, adUnitCodes))\n            .reduce(groupByPlacement, {});\n          _callback.apply($$PREBID_GLOBAL$$, [bids, timedOut]);\n          _callback = null;\n        }\n      } catch (e) {\n        utils.logError('Error executing bidsBackHandler', null, e);\n      } finally {\n        // Calling timed out bidders\n        if (timedOutBidders.length) {\n          adapterManager.callTimedOutBidders(adUnits, timedOutBidders, _timeout);\n        }\n        // Only automatically sync if the publisher has not chosen to \"enableOverride\"\n        let userSyncConfig = config.getConfig('userSync') || {};\n        if (!userSyncConfig.enableOverride) {\n          // Delay the auto sync by the config delay\n          syncUsers(userSyncConfig.syncDelay);\n        }\n      }\n    }\n  }\n\n  function auctionDone() {\n    // when all bidders have called done callback atleast once it means auction is complete\n    utils.logInfo(`Bids Received for Auction with id: ${_auctionId}`, _bidsReceived);\n    _auctionStatus = AUCTION_COMPLETED;\n    executeCallback(false, true);\n  }\n\n  function onTimelyResponse(bidderCode) {\n    _timelyBidders.add(bidderCode);\n  }\n\n  function callBids() {\n    _auctionStatus = AUCTION_STARTED;\n    _auctionStart = Date.now();\n\n    let bidRequests = adapterManager.makeBidRequests(_adUnits, _auctionStart, _auctionId, _timeout, _labels);\n    utils.logInfo(`Bids Requested for Auction with id: ${_auctionId}`, bidRequests);\n    bidRequests.forEach(bidRequest => {\n      addBidRequests(bidRequest);\n    });\n\n    let requests = {};\n\n    if (bidRequests.length < 1) {\n      utils.logWarn('No valid bid requests returned for auction');\n      auctionDone();\n    } else {\n      let call = {\n        bidRequests,\n        run: () => {\n          startAuctionTimer();\n\n          _auctionStatus = AUCTION_IN_PROGRESS;\n\n          events.emit(CONSTANTS.EVENTS.AUCTION_INIT, getProperties());\n\n          let callbacks = auctionCallbacks(auctionDone, this);\n          adapterManager.callBids(_adUnits, bidRequests, function(...args) {\n            addBidResponse.apply({\n              dispatch: callbacks.addBidResponse,\n              bidderRequest: this\n            }, args)\n          }, callbacks.adapterDone, {\n            request(source, origin) {\n              increment(outstandingRequests, origin);\n              increment(requests, source);\n\n              if (!sourceInfo[source]) {\n                sourceInfo[source] = {\n                  SRA: true,\n                  origin\n                };\n              }\n              if (requests[source] > 1) {\n                sourceInfo[source].SRA = false;\n              }\n            },\n            done(origin) {\n              outstandingRequests[origin]--;\n              if (queuedCalls[0]) {\n                if (runIfOriginHasCapacity(queuedCalls[0])) {\n                  queuedCalls.shift();\n                }\n              }\n            }\n          }, _timeout, onTimelyResponse);\n        }\n      };\n\n      if (!runIfOriginHasCapacity(call)) {\n        utils.logWarn('queueing auction due to limited endpoint capacity');\n        queuedCalls.push(call);\n      }\n    }\n\n    function runIfOriginHasCapacity(call) {\n      let hasCapacity = true;\n\n      let maxRequests = config.getConfig('maxRequestsPerOrigin') || MAX_REQUESTS_PER_ORIGIN;\n\n      call.bidRequests.some(bidRequest => {\n        let requests = 1;\n        let source = (typeof bidRequest.src !== 'undefined' && bidRequest.src === CONSTANTS.S2S.SRC) ? 's2s'\n          : bidRequest.bidderCode;\n        // if we have no previous info on this source just let them through\n        if (sourceInfo[source]) {\n          if (sourceInfo[source].SRA === false) {\n            // some bidders might use more than the MAX_REQUESTS_PER_ORIGIN in a single auction.  In those cases\n            // set their request count to MAX_REQUESTS_PER_ORIGIN so the auction isn't permanently queued waiting\n            // for capacity for that bidder\n            requests = Math.min(bidRequest.bids.length, maxRequests);\n          }\n          if (outstandingRequests[sourceInfo[source].origin] + requests > maxRequests) {\n            hasCapacity = false;\n          }\n        }\n        // return only used for terminating this .some() iteration early if it is determined we don't have capacity\n        return !hasCapacity;\n      });\n\n      if (hasCapacity) {\n        call.run();\n      }\n\n      return hasCapacity;\n    }\n\n    function increment(obj, prop) {\n      if (typeof obj[prop] === 'undefined') {\n        obj[prop] = 1\n      } else {\n        obj[prop]++;\n      }\n    }\n  }\n\n  function addWinningBid(winningBid) {\n    _winningBids = _winningBids.concat(winningBid);\n    adapterManager.callBidWonBidder(winningBid.bidder, winningBid, adUnits);\n  }\n\n  function setBidTargeting(bid) {\n    adapterManager.callSetTargetingBidder(bid.bidder, bid);\n  }\n\n  return {\n    addBidReceived,\n    addNoBid,\n    executeCallback,\n    callBids,\n    addWinningBid,\n    setBidTargeting,\n    getWinningBids: () => _winningBids,\n    getTimeout: () => _timeout,\n    getAuctionId: () => _auctionId,\n    getAuctionStatus: () => _auctionStatus,\n    getAdUnits: () => _adUnits,\n    getAdUnitCodes: () => _adUnitCodes,\n    getBidRequests: () => _bidderRequests,\n    getBidsReceived: () => _bidsReceived,\n    getNoBids: () => _noBids\n  }\n}\n\nexport const addBidResponse = hook('async', function(adUnitCode, bid) {\n  this.dispatch.call(this.bidderRequest, adUnitCode, bid);\n}, 'addBidResponse');\n\nexport function auctionCallbacks(auctionDone, auctionInstance) {\n  let outstandingBidsAdded = 0;\n  let allAdapterCalledDone = false;\n  let bidderRequestsDone = new Set();\n  let bidResponseMap = {};\n\n  function afterBidAdded() {\n    outstandingBidsAdded--;\n    if (allAdapterCalledDone && outstandingBidsAdded === 0) {\n      auctionDone()\n    }\n  }\n\n  function addBidResponse(adUnitCode, bid) {\n    let bidderRequest = this;\n\n    bidResponseMap[bid.requestId] = true;\n\n    outstandingBidsAdded++;\n    let auctionId = auctionInstance.getAuctionId();\n\n    let bidResponse = getPreparedBidForAuction({adUnitCode, bid, bidderRequest, auctionId});\n\n    if (bidResponse.mediaType === 'video') {\n      tryAddVideoBid(auctionInstance, bidResponse, bidderRequest, afterBidAdded);\n    } else {\n      addBidToAuction(auctionInstance, bidResponse);\n      afterBidAdded();\n    }\n  }\n\n  function adapterDone() {\n    let bidderRequest = this;\n\n    bidderRequestsDone.add(bidderRequest);\n    allAdapterCalledDone = auctionInstance.getBidRequests()\n      .every(bidderRequest => bidderRequestsDone.has(bidderRequest));\n\n    bidderRequest.bids.forEach(bid => {\n      if (!bidResponseMap[bid.bidId]) {\n        auctionInstance.addNoBid(bid);\n        events.emit(CONSTANTS.EVENTS.NO_BID, bid);\n      }\n    });\n\n    if (allAdapterCalledDone && outstandingBidsAdded === 0) {\n      auctionDone();\n    }\n  }\n\n  return {\n    addBidResponse,\n    adapterDone\n  }\n}\n\nexport function doCallbacksIfTimedout(auctionInstance, bidResponse) {\n  if (bidResponse.timeToRespond > auctionInstance.getTimeout() + config.getConfig('timeoutBuffer')) {\n    auctionInstance.executeCallback(true);\n  }\n}\n\n// Add a bid to the auction.\nexport function addBidToAuction(auctionInstance, bidResponse) {\n  let bidderRequests = auctionInstance.getBidRequests();\n  let bidderRequest = find(bidderRequests, bidderRequest => bidderRequest.bidderCode === bidResponse.bidderCode);\n  setupBidTargeting(bidResponse, bidderRequest);\n\n  events.emit(CONSTANTS.EVENTS.BID_RESPONSE, bidResponse);\n  auctionInstance.addBidReceived(bidResponse);\n\n  doCallbacksIfTimedout(auctionInstance, bidResponse);\n}\n\n// Video bids may fail if the cache is down, or there's trouble on the network.\nfunction tryAddVideoBid(auctionInstance, bidResponse, bidRequests, afterBidAdded) {\n  let addBid = true;\n\n  const bidderRequest = getBidRequest(bidResponse.requestId, [bidRequests]);\n  const videoMediaType =\n  bidderRequest && deepAccess(bidderRequest, 'mediaTypes.video');\n  const context = videoMediaType && deepAccess(videoMediaType, 'context');\n\n  if (config.getConfig('cache.url') && context !== OUTSTREAM) {\n    if (!bidResponse.videoCacheKey) {\n      addBid = false;\n      callPrebidCache(auctionInstance, bidResponse, afterBidAdded, bidderRequest);\n    } else if (!bidResponse.vastUrl) {\n      utils.logError('videoCacheKey specified but not required vastUrl for video bid');\n      addBid = false;\n    }\n  }\n  if (addBid) {\n    addBidToAuction(auctionInstance, bidResponse);\n    afterBidAdded();\n  }\n}\n\nexport const callPrebidCache = hook('async', function(auctionInstance, bidResponse, afterBidAdded, bidderRequest) {\n  store([bidResponse], function (error, cacheIds) {\n    if (error) {\n      utils.logWarn(`Failed to save to the video cache: ${error}. Video bid must be discarded.`);\n\n      doCallbacksIfTimedout(auctionInstance, bidResponse);\n    } else {\n      if (cacheIds[0].uuid === '') {\n        utils.logWarn(`Supplied video cache key was already in use by Prebid Cache; caching attempt was rejected. Video bid must be discarded.`);\n\n        doCallbacksIfTimedout(auctionInstance, bidResponse);\n      } else {\n        bidResponse.videoCacheKey = cacheIds[0].uuid;\n\n        if (!bidResponse.vastUrl) {\n          bidResponse.vastUrl = getCacheUrl(bidResponse.videoCacheKey);\n        }\n        addBidToAuction(auctionInstance, bidResponse);\n        afterBidAdded();\n      }\n    }\n  });\n}, 'callPrebidCache');\n\n// Postprocess the bids so that all the universal properties exist, no matter which bidder they came from.\n// This should be called before addBidToAuction().\nfunction getPreparedBidForAuction({adUnitCode, bid, bidderRequest, auctionId}) {\n  const start = bidderRequest.start;\n\n  let bidObject = Object.assign({}, bid, {\n    auctionId,\n    responseTimestamp: timestamp(),\n    requestTimestamp: start,\n    cpm: parseFloat(bid.cpm) || 0,\n    bidder: bid.bidderCode,\n    adUnitCode\n  });\n\n  bidObject.timeToRespond = bidObject.responseTimestamp - bidObject.requestTimestamp;\n\n  // Let listeners know that now is the time to adjust the bid, if they want to.\n  //\n  // CAREFUL: Publishers rely on certain bid properties to be available (like cpm),\n  // but others to not be set yet (like priceStrings). See #1372 and #1389.\n  events.emit(CONSTANTS.EVENTS.BID_ADJUSTMENT, bidObject);\n\n  // a publisher-defined renderer can be used to render bids\n  const bidReq = bidderRequest.bids && find(bidderRequest.bids, bid => bid.adUnitCode == adUnitCode);\n  const adUnitRenderer = bidReq && bidReq.renderer;\n\n  if (adUnitRenderer && adUnitRenderer.url) {\n    bidObject.renderer = Renderer.install({ url: adUnitRenderer.url });\n    bidObject.renderer.setRender(adUnitRenderer.render);\n  }\n\n  // Use the config value 'mediaTypeGranularity' if it has been defined for mediaType, else use 'customPriceBucket'\n  const mediaTypeGranularity = config.getConfig(`mediaTypePriceGranularity.${bid.mediaType}`);\n\n  const priceStringsObj = getPriceBucketString(\n    bidObject.cpm,\n    (typeof mediaTypeGranularity === 'object') ? mediaTypeGranularity : config.getConfig('customPriceBucket'),\n    config.getConfig('currency.granularityMultiplier')\n  );\n  bidObject.pbLg = priceStringsObj.low;\n  bidObject.pbMg = priceStringsObj.med;\n  bidObject.pbHg = priceStringsObj.high;\n  bidObject.pbAg = priceStringsObj.auto;\n  bidObject.pbDg = priceStringsObj.dense;\n  bidObject.pbCg = priceStringsObj.custom;\n\n  return bidObject;\n}\n\nfunction setupBidTargeting(bidObject, bidderRequest) {\n  let keyValues;\n  if (bidObject.bidderCode && (bidObject.cpm > 0 || bidObject.dealId)) {\n    let bidReq = find(bidderRequest.bids, bid => bid.adUnitCode === bidObject.adUnitCode);\n    keyValues = getKeyValueTargetingPairs(bidObject.bidderCode, bidObject, bidReq);\n  }\n\n  // use any targeting provided as defaults, otherwise just set from getKeyValueTargetingPairs\n  bidObject.adserverTargeting = Object.assign(bidObject.adserverTargeting || {}, keyValues);\n}\n\n/**\n * This function returns the price granularity defined. It can be either publisher defined or default value\n * @param {string} mediaType\n * @returns {string} granularity\n */\nexport const getPriceGranularity = (mediaType) => {\n  // Use the config value 'mediaTypeGranularity' if it has been set for mediaType, else use 'priceGranularity'\n  const mediaTypeGranularity = config.getConfig(`mediaTypePriceGranularity.${mediaType}`);\n  const granularity = (typeof mediaType === 'string' && mediaTypeGranularity) ? ((typeof mediaTypeGranularity === 'string') ? mediaTypeGranularity : 'custom') : config.getConfig('priceGranularity');\n  return granularity;\n}\n\n/**\n * This function returns a function to get bid price by price granularity\n * @param {string} granularity\n * @returns {function}\n */\nexport const getPriceByGranularity = (granularity) => {\n  return (bid) => {\n    if (granularity === CONSTANTS.GRANULARITY_OPTIONS.AUTO) {\n      return bid.pbAg;\n    } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.DENSE) {\n      return bid.pbDg;\n    } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.LOW) {\n      return bid.pbLg;\n    } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.MEDIUM) {\n      return bid.pbMg;\n    } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.HIGH) {\n      return bid.pbHg;\n    } else if (granularity === CONSTANTS.GRANULARITY_OPTIONS.CUSTOM) {\n      return bid.pbCg;\n    }\n  }\n}\n\n/**\n * @param {string} mediaType\n * @param {string} bidderCode\n * @returns {*}\n */\nexport function getStandardBidderSettings(mediaType, bidderCode) {\n  // factory for key value objs\n  function createKeyVal(key, value) {\n    return {\n      key,\n      val: (typeof value === 'function')\n        ? function (bidResponse) {\n          return value(bidResponse);\n        }\n        : function (bidResponse) {\n          return getValue(bidResponse, value);\n        }\n    };\n  }\n  const TARGETING_KEYS = CONSTANTS.TARGETING_KEYS;\n  const granularity = getPriceGranularity(mediaType);\n\n  let bidderSettings = $$PREBID_GLOBAL$$.bidderSettings;\n  if (!bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD]) {\n    bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] = {};\n  }\n  if (!bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n    bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING] = [\n      createKeyVal(TARGETING_KEYS.BIDDER, 'bidderCode'),\n      createKeyVal(TARGETING_KEYS.AD_ID, 'adId'),\n      createKeyVal(TARGETING_KEYS.PRICE_BUCKET, getPriceByGranularity(granularity)),\n      createKeyVal(TARGETING_KEYS.SIZE, 'size'),\n      createKeyVal(TARGETING_KEYS.DEAL, 'dealId'),\n      createKeyVal(TARGETING_KEYS.SOURCE, 'source'),\n      createKeyVal(TARGETING_KEYS.FORMAT, 'mediaType'),\n    ]\n  }\n\n  if (mediaType === 'video') {\n    const adserverTargeting = bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n\n    // Adding hb_uuid + hb_cache_id\n    [TARGETING_KEYS.UUID, TARGETING_KEYS.CACHE_ID].forEach(targetingKeyVal => {\n      if (typeof find(adserverTargeting, kvPair => kvPair.key === targetingKeyVal) === 'undefined') {\n        adserverTargeting.push(createKeyVal(targetingKeyVal, 'videoCacheKey'));\n      }\n    });\n\n    // Adding hb_cache_host\n    if (config.getConfig('cache.url') && (!bidderCode || utils.deepAccess(bidderSettings, `${bidderCode}.sendStandardTargeting`) !== false)) {\n      const urlInfo = parseURL(config.getConfig('cache.url'));\n\n      if (typeof find(adserverTargeting, targetingKeyVal => targetingKeyVal.key === TARGETING_KEYS.CACHE_HOST) === 'undefined') {\n        adserverTargeting.push(createKeyVal(TARGETING_KEYS.CACHE_HOST, function(bidResponse) {\n          return utils.deepAccess(bidResponse, `adserverTargeting.${TARGETING_KEYS.CACHE_HOST}`)\n            ? bidResponse.adserverTargeting[TARGETING_KEYS.CACHE_HOST] : urlInfo.hostname;\n        }));\n      }\n    }\n  }\n  return bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD];\n}\n\nexport function getKeyValueTargetingPairs(bidderCode, custBidObj, bidReq) {\n  if (!custBidObj) {\n    return {};\n  }\n\n  var keyValues = {};\n  var bidderSettings = $$PREBID_GLOBAL$$.bidderSettings;\n\n  // 1) set the keys from \"standard\" setting or from prebid defaults\n  if (bidderSettings) {\n    // initialize default if not set\n    const standardSettings = getStandardBidderSettings(custBidObj.mediaType, bidderCode);\n    setKeys(keyValues, standardSettings, custBidObj);\n\n    // 2) set keys from specific bidder setting override if they exist\n    if (bidderCode && bidderSettings[bidderCode] && bidderSettings[bidderCode][CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING]) {\n      setKeys(keyValues, bidderSettings[bidderCode], custBidObj);\n      custBidObj.sendStandardTargeting = bidderSettings[bidderCode].sendStandardTargeting;\n    }\n  }\n\n  // set native key value targeting\n  if (custBidObj['native']) {\n    keyValues = Object.assign({}, keyValues, getNativeTargeting(custBidObj, bidReq));\n  }\n\n  return keyValues;\n}\n\nfunction setKeys(keyValues, bidderSettings, custBidObj) {\n  var targeting = bidderSettings[CONSTANTS.JSON_MAPPING.ADSERVER_TARGETING];\n  custBidObj.size = custBidObj.getSize();\n\n  utils._each(targeting, function (kvPair) {\n    var key = kvPair.key;\n    var value = kvPair.val;\n\n    if (keyValues[key]) {\n      utils.logWarn('The key: ' + key + ' is getting ovewritten');\n    }\n\n    if (utils.isFn(value)) {\n      try {\n        value = value(custBidObj);\n      } catch (e) {\n        utils.logError('bidmanager', 'ERROR', e);\n      }\n    }\n\n    if (\n      ((typeof bidderSettings.suppressEmptyKeys !== 'undefined' && bidderSettings.suppressEmptyKeys === true) ||\n      key === CONSTANTS.TARGETING_KEYS.DEAL) && // hb_deal is suppressed automatically if not set\n      (\n        utils.isEmptyStr(value) ||\n        value === null ||\n        value === undefined\n      )\n    ) {\n      utils.logInfo(\"suppressing empty key '\" + key + \"' from adserver targeting\");\n    } else {\n      keyValues[key] = value;\n    }\n  });\n\n  return keyValues;\n}\n\nexport function adjustBids(bid) {\n  let code = bid.bidderCode;\n  let bidPriceAdjusted = bid.cpm;\n  let bidCpmAdjustment;\n  if ($$PREBID_GLOBAL$$.bidderSettings) {\n    if (code && $$PREBID_GLOBAL$$.bidderSettings[code] && typeof $$PREBID_GLOBAL$$.bidderSettings[code].bidCpmAdjustment === 'function') {\n      bidCpmAdjustment = $$PREBID_GLOBAL$$.bidderSettings[code].bidCpmAdjustment;\n    } else if ($$PREBID_GLOBAL$$.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD] && typeof $$PREBID_GLOBAL$$.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment === 'function') {\n      bidCpmAdjustment = $$PREBID_GLOBAL$$.bidderSettings[CONSTANTS.JSON_MAPPING.BD_SETTING_STANDARD].bidCpmAdjustment;\n    }\n    if (bidCpmAdjustment) {\n      try {\n        bidPriceAdjusted = bidCpmAdjustment(bid.cpm, Object.assign({}, bid));\n      } catch (e) {\n        utils.logError('Error during bid adjustment', 'bidmanager.js', e);\n      }\n    }\n  }\n\n  if (bidPriceAdjusted >= 0) {\n    bid.cpm = bidPriceAdjusted;\n  }\n}\n\n/**\n * groupByPlacement is a reduce function that converts an array of Bid objects\n * to an object with placement codes as keys, with each key representing an object\n * with an array of `Bid` objects for that placement\n * @returns {*} as { [adUnitCode]: { bids: [Bid, Bid, Bid] } }\n */\nfunction groupByPlacement(bidsByPlacement, bid) {\n  if (!bidsByPlacement[bid.adUnitCode]) { bidsByPlacement[bid.adUnitCode] = { bids: [] }; }\n  bidsByPlacement[bid.adUnitCode].bids.push(bid);\n  return bidsByPlacement;\n}\n\n/**\n * Returns a list of bids that we haven't received a response yet where the bidder did not call done\n * @param {BidRequest[]} bidderRequests List of bids requested for auction instance\n * @param {Set} timelyBidders Set of bidders which responded in time\n *\n * @typedef {Object} TimedOutBid\n * @property {string} bidId The id representing the bid\n * @property {string} bidder The string name of the bidder\n * @property {string} adUnitCode The code used to uniquely identify the ad unit on the publisher's page\n * @property {string} auctionId The id representing the auction\n *\n * @return {Array<TimedOutBid>} List of bids that Prebid hasn't received a response for\n */\nfunction getTimedOutBids(bidderRequests, timelyBidders) {\n  const timedOutBids = bidderRequests\n    .map(bid => (bid.bids || []).filter(bid => !timelyBidders.has(bid.bidder)))\n    .reduce(flatten, [])\n    .map(bid => ({\n      bidId: bid.bidId,\n      bidder: bid.bidder,\n      adUnitCode: bid.adUnitCode,\n      auctionId: bid.auctionId,\n    }));\n\n  return timedOutBids;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/auction.js","module.exports = {\"JSON_MAPPING\":{\"PL_CODE\":\"code\",\"PL_SIZE\":\"sizes\",\"PL_BIDS\":\"bids\",\"BD_BIDDER\":\"bidder\",\"BD_ID\":\"paramsd\",\"BD_PL_ID\":\"placementId\",\"ADSERVER_TARGETING\":\"adserverTargeting\",\"BD_SETTING_STANDARD\":\"standard\"},\"DEBUG_MODE\":\"pbjs_debug\",\"STATUS\":{\"GOOD\":1,\"NO_BID\":2},\"CB\":{\"TYPE\":{\"ALL_BIDS_BACK\":\"allRequestedBidsBack\",\"AD_UNIT_BIDS_BACK\":\"adUnitBidsBack\",\"BID_WON\":\"bidWon\",\"REQUEST_BIDS\":\"requestBids\"}},\"EVENTS\":{\"AUCTION_INIT\":\"auctionInit\",\"AUCTION_END\":\"auctionEnd\",\"BID_ADJUSTMENT\":\"bidAdjustment\",\"BID_TIMEOUT\":\"bidTimeout\",\"BID_REQUESTED\":\"bidRequested\",\"BID_RESPONSE\":\"bidResponse\",\"NO_BID\":\"noBid\",\"BID_WON\":\"bidWon\",\"BIDDER_DONE\":\"bidderDone\",\"SET_TARGETING\":\"setTargeting\",\"REQUEST_BIDS\":\"requestBids\",\"ADD_AD_UNITS\":\"addAdUnits\",\"AD_RENDER_FAILED\":\"adRenderFailed\"},\"AD_RENDER_FAILED_REASON\":{\"PREVENT_WRITING_ON_MAIN_DOCUMENT\":\"preventWritingOnMainDocuemnt\",\"NO_AD\":\"noAd\",\"EXCEPTION\":\"exception\",\"CANNOT_FIND_AD\":\"cannotFindAd\",\"MISSING_DOC_OR_ADID\":\"missingDocOrAdid\"},\"EVENT_ID_PATHS\":{\"bidWon\":\"adUnitCode\"},\"GRANULARITY_OPTIONS\":{\"LOW\":\"low\",\"MEDIUM\":\"medium\",\"HIGH\":\"high\",\"AUTO\":\"auto\",\"DENSE\":\"dense\",\"CUSTOM\":\"custom\"},\"TARGETING_KEYS\":{\"BIDDER\":\"hb_bidder\",\"AD_ID\":\"hb_adid\",\"PRICE_BUCKET\":\"hb_pb\",\"SIZE\":\"hb_size\",\"DEAL\":\"hb_deal\",\"SOURCE\":\"hb_source\",\"FORMAT\":\"hb_format\",\"UUID\":\"hb_uuid\",\"CACHE_ID\":\"hb_cache_id\",\"CACHE_HOST\":\"hb_cache_host\"},\"NATIVE_KEYS\":{\"title\":\"hb_native_title\",\"body\":\"hb_native_body\",\"body2\":\"hb_native_body2\",\"privacyLink\":\"hb_native_privacy\",\"privacyIcon\":\"hb_native_privicon\",\"sponsoredBy\":\"hb_native_brand\",\"image\":\"hb_native_image\",\"icon\":\"hb_native_icon\",\"clickUrl\":\"hb_native_linkurl\",\"displayUrl\":\"hb_native_displayurl\",\"cta\":\"hb_native_cta\",\"rating\":\"hb_native_rating\",\"address\":\"hb_native_address\",\"downloads\":\"hb_native_downloads\",\"likes\":\"hb_native_likes\",\"phone\":\"hb_native_phone\",\"price\":\"hb_native_price\",\"salePrice\":\"hb_native_saleprice\"},\"S2S\":{\"SRC\":\"s2s\",\"DEFAULT_ENDPOINT\":\"https://prebid.adnxs.com/pbs/v1/openrtb2/auction\",\"SYNCED_BIDDERS_KEY\":\"pbjsSyncs\"},\"BID_STATUS\":{\"BID_TARGETING_SET\":\"targetingSet\",\"RENDERED\":\"rendered\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/constants.json\n// module id = 4\n// module chunks = 265","var ctx = require('./_ctx');\nvar call = require('./_iter-call');\nvar isArrayIter = require('./_is-array-iter');\nvar anObject = require('./_an-object');\nvar toLength = require('./_to-length');\nvar getIterFn = require('./core.get-iterator-method');\nvar BREAK = {};\nvar RETURN = {};\nvar exports = module.exports = function (iterable, entries, fn, that, ITERATOR) {\n  var iterFn = ITERATOR ? function () { return iterable; } : getIterFn(iterable);\n  var f = ctx(fn, that, entries ? 2 : 1);\n  var index = 0;\n  var length, step, iterator, result;\n  if (typeof iterFn != 'function') throw TypeError(iterable + ' is not iterable!');\n  // fast case for arrays with default iterator\n  if (isArrayIter(iterFn)) for (length = toLength(iterable.length); length > index; index++) {\n    result = entries ? f(anObject(step = iterable[index])[0], step[1]) : f(iterable[index]);\n    if (result === BREAK || result === RETURN) return result;\n  } else for (iterator = iterFn.call(iterable); !(step = iterator.next()).done;) {\n    result = call(iterator, f, step.value, entries);\n    if (result === BREAK || result === RETURN) return result;\n  }\n};\nexports.BREAK = BREAK;\nexports.RETURN = RETURN;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_for-of.js\n// module id = 40\n// module chunks = 265","export default function Adapter(code) {\n  var bidderCode = code;\n\n  function setBidderCode(code) {\n    bidderCode = code;\n  }\n\n  function getBidderCode() {\n    return bidderCode;\n  }\n\n  function callBids() {\n  }\n\n  return {\n    callBids: callBids,\n    setBidderCode: setBidderCode,\n    getBidderCode: getBidderCode\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapter.js","import find from 'core-js/library/fn/array/find';\nconst utils = require('./utils');\n\nconst _defaultPrecision = 2;\nconst _lgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.5\n  }]\n};\nconst _mgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.1\n  }]\n};\nconst _hgPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 20,\n    'increment': 0.01\n  }]\n};\nconst _densePriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 3,\n    'increment': 0.01\n  },\n  {\n    'min': 3,\n    'max': 8,\n    'increment': 0.05\n  },\n  {\n    'min': 8,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\nconst _autoPriceConfig = {\n  'buckets': [{\n    'min': 0,\n    'max': 5,\n    'increment': 0.05\n  },\n  {\n    'min': 5,\n    'max': 10,\n    'increment': 0.1\n  },\n  {\n    'min': 10,\n    'max': 20,\n    'increment': 0.5\n  }]\n};\n\nfunction getPriceBucketString(cpm, customConfig, granularityMultiplier = 1) {\n  let cpmFloat = parseFloat(cpm);\n  if (isNaN(cpmFloat)) {\n    cpmFloat = '';\n  }\n\n  return {\n    low: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _lgPriceConfig, granularityMultiplier),\n    med: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _mgPriceConfig, granularityMultiplier),\n    high: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _hgPriceConfig, granularityMultiplier),\n    auto: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _autoPriceConfig, granularityMultiplier),\n    dense: (cpmFloat === '') ? '' : getCpmStringValue(cpm, _densePriceConfig, granularityMultiplier),\n    custom: (cpmFloat === '') ? '' : getCpmStringValue(cpm, customConfig, granularityMultiplier)\n  };\n}\n\nfunction getCpmStringValue(cpm, config, granularityMultiplier) {\n  let cpmStr = '';\n  if (!isValidPriceConfig(config)) {\n    return cpmStr;\n  }\n  const cap = config.buckets.reduce((prev, curr) => {\n    if (prev.max > curr.max) {\n      return prev;\n    }\n    return curr;\n  }, {\n    'max': 0,\n  });\n  let bucket = find(config.buckets, bucket => {\n    if (cpm > cap.max * granularityMultiplier) {\n      // cpm exceeds cap, just return the cap.\n      let precision = bucket.precision;\n      if (typeof precision === 'undefined') {\n        precision = _defaultPrecision;\n      }\n      cpmStr = (bucket.max * granularityMultiplier).toFixed(precision);\n    } else if (cpm <= bucket.max * granularityMultiplier && cpm >= bucket.min * granularityMultiplier) {\n      return bucket;\n    }\n  });\n  if (bucket) {\n    cpmStr = getCpmTarget(cpm, bucket, granularityMultiplier);\n  }\n  return cpmStr;\n}\n\nfunction isValidPriceConfig(config) {\n  if (utils.isEmpty(config) || !config.buckets || !Array.isArray(config.buckets)) {\n    return false;\n  }\n  let isValid = true;\n  config.buckets.forEach(bucket => {\n    if (typeof bucket.min === 'undefined' || !bucket.max || !bucket.increment) {\n      isValid = false;\n    }\n  });\n  return isValid;\n}\n\nfunction getCpmTarget(cpm, bucket, granularityMultiplier) {\n  const precision = typeof bucket.precision !== 'undefined' ? bucket.precision : _defaultPrecision;\n  const increment = bucket.increment * granularityMultiplier;\n  const bucketMin = bucket.min * granularityMultiplier;\n\n  // start increments at the bucket min and then add bucket min back to arrive at the correct rounding\n  // note - we're padding the values to avoid using decimals in the math prior to flooring\n  // this is done as JS can return values slightly below the expected mark which would skew the price bucket target\n  //   (eg 4.01 / 0.01 = 400.99999999999994)\n  // min precison should be 2 to move decimal place over.\n  let pow = Math.pow(10, precision + 2);\n  let cpmToFloor = ((cpm * pow) - (bucketMin * pow)) / (increment * pow);\n  let cpmTarget = ((Math.floor(cpmToFloor)) * increment) + bucketMin;\n  // force to 10 decimal places to deal with imprecise decimal/binary conversions\n  //    (for example 0.1 * 3 = 0.30000000000000004)\n  cpmTarget = Number(cpmTarget.toFixed(10));\n  return cpmTarget.toFixed(precision);\n}\n\nexport { getPriceBucketString, isValidPriceConfig };\n\n\n\n// WEBPACK FOOTER //\n// ./src/cpmBucketManager.js","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_property-desc.js\n// module id = 43\n// module chunks = 265","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-methods.js\n// module id = 44\n// module chunks = 265","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-object.js\n// module id = 45\n// module chunks = 265","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-integer.js\n// module id = 46\n// module chunks = 265","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_uid.js\n// module id = 47\n// module chunks = 265","// to indexed object, toObject with fallback for non-array-like ES3 strings\nvar IObject = require('./_iobject');\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return IObject(defined(it));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-iobject.js\n// module id = 48\n// module chunks = 265","/**\n * The referer detection module attempts to gather referer information from the current page that prebid.js resides in.\n * The information that it tries to collect includes:\n * The detected top url in the nav bar,\n * Whether it was able to reach the top most window (if for example it was embedded in several iframes),\n * The number of iframes it was embedded in if applicable,\n * A list of the domains of each embedded window if applicable.\n * Canonical URL which refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n */\n\nimport { logWarn } from './utils';\n\nexport function detectReferer(win) {\n  /**\n   * Returns number of frames to reach top from current frame where prebid.js sits\n   * @returns {Array} levels\n   */\n  function getLevels() {\n    let levels = walkUpWindows();\n    let ancestors = getAncestorOrigins();\n\n    if (ancestors) {\n      for (let i = 0, l = ancestors.length; i < l; i++) {\n        levels[i].ancestor = ancestors[i];\n      }\n    }\n    return levels;\n  }\n\n  /**\n   * This function would return a read-only array of hostnames for all the parent frames.\n   * win.location.ancestorOrigins is only supported in webkit browsers. For non-webkit browsers it will return undefined.\n   * @returns {(undefined|Array)} Ancestor origins or undefined\n   */\n  function getAncestorOrigins() {\n    try {\n      if (!win.location.ancestorOrigins) {\n        return;\n      }\n      return win.location.ancestorOrigins;\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  /**\n   * This function would try to get referer and urls for all parent frames in case of win.location.ancestorOrigins undefined.\n   * @param {Array} levels\n   * @returns {Object} urls for all parent frames and top most detected referer url\n   */\n  function getPubUrlStack(levels) {\n    let stack = [];\n    let defUrl = null;\n    let frameLocation = null;\n    let prevFrame = null;\n    let prevRef = null;\n    let ancestor = null;\n    let detectedRefererUrl = null;\n\n    let i;\n    for (i = levels.length - 1; i >= 0; i--) {\n      try {\n        frameLocation = levels[i].location;\n      } catch (e) {\n        // Ignore error\n      }\n\n      if (frameLocation) {\n        stack.push(frameLocation);\n        if (!detectedRefererUrl) {\n          detectedRefererUrl = frameLocation;\n        }\n      } else if (i !== 0) {\n        prevFrame = levels[i - 1];\n        try {\n          prevRef = prevFrame.referrer;\n          ancestor = prevFrame.ancestor;\n        } catch (e) {\n          // Ignore error\n        }\n\n        if (prevRef) {\n          stack.push(prevRef);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = prevRef;\n          }\n        } else if (ancestor) {\n          stack.push(ancestor);\n          if (!detectedRefererUrl) {\n            detectedRefererUrl = ancestor;\n          }\n        } else {\n          stack.push(defUrl);\n        }\n      } else {\n        stack.push(defUrl);\n      }\n    }\n    return {\n      stack,\n      detectedRefererUrl\n    };\n  }\n\n  /**\n   * This function returns canonical URL which refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n   * @param {Object} doc document\n   */\n  function getCanonicalUrl(doc) {\n    try {\n      let element = doc.querySelector(\"link[rel='canonical']\");\n      if (element !== null) {\n        return element.href;\n      }\n    } catch (e) {\n    }\n    return null;\n  }\n\n  /**\n   * Walk up to the top of the window to detect origin, number of iframes, ancestor origins and canonical url\n   */\n  function walkUpWindows() {\n    let acc = [];\n    let currentWindow;\n    do {\n      try {\n        currentWindow = currentWindow ? currentWindow.parent : win;\n        try {\n          let isTop = (currentWindow == win.top);\n          let refData = {\n            referrer: currentWindow.document.referrer || null,\n            location: currentWindow.location.href || null,\n            isTop\n          }\n          if (isTop) {\n            refData = Object.assign(refData, {\n              canonicalUrl: getCanonicalUrl(currentWindow.document)\n            })\n          }\n          acc.push(refData);\n        } catch (e) {\n          acc.push({\n            referrer: null,\n            location: null,\n            isTop: (currentWindow == win.top)\n          });\n          logWarn('Trying to access cross domain iframe. Continuing without referrer and location');\n        }\n      } catch (e) {\n        acc.push({\n          referrer: null,\n          location: null,\n          isTop: false\n        });\n        return acc;\n      }\n    } while (currentWindow != win.top);\n    return acc;\n  }\n\n  /**\n   * Referer info\n   * @typedef {Object} refererInfo\n   * @property {string} referer detected top url\n   * @property {boolean} reachedTop whether prebid was able to walk upto top window or not\n   * @property {number} numIframes number of iframes\n   * @property {string} stack comma separated urls of all origins\n   * @property {string} canonicalUrl canonical URL refers to an HTML link element, with the attribute of rel=\"canonical\", found in the <head> element of your webpage\n   */\n\n  /**\n   * Get referer info\n   * @returns {refererInfo}\n   */\n  function refererInfo() {\n    try {\n      let levels = getLevels();\n      let numIframes = levels.length - 1;\n      let reachedTop = (levels[numIframes].location !== null ||\n        (numIframes > 0 && levels[numIframes - 1].referrer !== null));\n      let stackInfo = getPubUrlStack(levels);\n      let canonicalUrl;\n      if (levels[levels.length - 1].canonicalUrl) {\n        canonicalUrl = levels[levels.length - 1].canonicalUrl;\n      }\n\n      return {\n        referer: stackInfo.detectedRefererUrl,\n        reachedTop,\n        numIframes,\n        stack: stackInfo.stack,\n        canonicalUrl\n      };\n    } catch (e) {\n      // Ignore error\n    }\n  }\n\n  return refererInfo;\n}\n\nexport const getRefererInfo = detectReferer(window);\n\n\n\n// WEBPACK FOOTER //\n// ./src/refererDetection.js","import {parse as parseURL, format as formatURL} from './url';\nimport { config } from './config';\n\nvar utils = require('./utils');\n\nconst XHR_DONE = 4;\n\n/**\n * Simple IE9+ and cross-browser ajax request function\n * Note: x-domain requests in IE9 do not support the use of cookies\n *\n * @param url string url\n * @param callback {object | function} callback\n * @param data mixed data\n * @param options object\n */\nexport const ajax = ajaxBuilder();\n\nexport function ajaxBuilder(timeout = 3000, {request, done} = {}) {\n  return function(url, callback, data, options = {}) {\n    try {\n      let x;\n      let method = options.method || (data ? 'POST' : 'GET');\n      let parser = document.createElement('a');\n      parser.href = url;\n\n      let callbacks = typeof callback === 'object' && callback !== null ? callback : {\n        success: function() {\n          utils.logMessage('xhr success');\n        },\n        error: function(e) {\n          utils.logError('xhr error', null, e);\n        }\n      };\n\n      if (typeof callback === 'function') {\n        callbacks.success = callback;\n      }\n\n      x = new window.XMLHttpRequest();\n\n      x.onreadystatechange = function () {\n        if (x.readyState === XHR_DONE) {\n          if (typeof done === 'function') {\n            done(parser.origin);\n          }\n          let status = x.status;\n          if ((status >= 200 && status < 300) || status === 304) {\n            callbacks.success(x.responseText, x);\n          } else {\n            callbacks.error(x.statusText, x);\n          }\n        }\n      };\n\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.ontimeout = function () {\n          utils.logError('  xhr timeout after ', x.timeout, 'ms');\n        };\n      }\n\n      if (method === 'GET' && data) {\n        let urlInfo = parseURL(url, options);\n        Object.assign(urlInfo.search, data);\n        url = formatURL(urlInfo);\n      }\n\n      x.open(method, url, true);\n      // IE needs timoeut to be set after open - see #1410\n      // Disabled timeout temporarily to avoid xhr failed requests. https://github.com/prebid/Prebid.js/issues/2648\n      if (!config.getConfig('disableAjaxTimeout')) {\n        x.timeout = timeout;\n      }\n\n      if (options.withCredentials) {\n        x.withCredentials = true;\n      }\n      utils._each(options.customHeaders, (value, header) => {\n        x.setRequestHeader(header, value);\n      });\n      if (options.preflight) {\n        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n      }\n      x.setRequestHeader('Content-Type', options.contentType || 'text/plain');\n\n      if (typeof request === 'function') {\n        request(parser.origin);\n      }\n\n      if (method === 'POST' && data) {\n        x.send(data);\n      } else {\n        x.send();\n      }\n    } catch (error) {\n      utils.logError('xhr construction', error);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/ajax.js","import includes from 'core-js/library/fn/array/includes';\nimport * as utils from './utils';\n\nconst _requestCache = {};\nconst _vendorWhitelist = [\n  'criteo',\n]\n\n/**\n * Loads external javascript. Can only be used if external JS is approved by Prebid. See https://github.com/prebid/prebid-js-external-js-template#policy\n * Each unique URL will be loaded at most 1 time.\n * @param {string} url the url to load\n * @param {string} moduleCode bidderCode or module code of the module requesting this resource\n */\nexport function loadExternalScript(url, moduleCode) {\n  if (!moduleCode || !url) {\n    utils.logError('cannot load external script without url and moduleCode');\n    return;\n  }\n  if (!includes(_vendorWhitelist, moduleCode)) {\n    utils.logError(`${moduleCode} not whitelisted for loading external JavaScript`);\n    return;\n  }\n  // only load each asset once\n  if (_requestCache[url]) {\n    return;\n  }\n\n  utils.logWarn(`module ${moduleCode} is loading external JavaScript`);\n  const script = document.createElement('script');\n  script.type = 'text/javascript';\n  script.async = true;\n  script.src = url;\n\n  utils.insertElement(script);\n  _requestCache[url] = true;\n};\n\n/**\n *\n * @deprecated\n * Do not use this function. Will be removed in the next release. If external resources are required, use #loadExternalScript instead.\n */\nexport function loadScript(tagSrc, callback, cacheRequest) {\n  // var noop = () => {};\n  //\n  // callback = callback || noop;\n  if (!tagSrc) {\n    utils.logError('Error attempting to request empty URL', 'adloader.js:loadScript');\n    return;\n  }\n\n  if (cacheRequest) {\n    if (_requestCache[tagSrc]) {\n      if (callback && typeof callback === 'function') {\n        if (_requestCache[tagSrc].loaded) {\n          // invokeCallbacks immediately\n          callback();\n        } else {\n          // queue the callback\n          _requestCache[tagSrc].callbacks.push(callback);\n        }\n      }\n    } else {\n      _requestCache[tagSrc] = {\n        loaded: false,\n        callbacks: []\n      };\n      if (callback && typeof callback === 'function') {\n        _requestCache[tagSrc].callbacks.push(callback);\n      }\n\n      requestResource(tagSrc, function () {\n        _requestCache[tagSrc].loaded = true;\n        try {\n          for (let i = 0; i < _requestCache[tagSrc].callbacks.length; i++) {\n            _requestCache[tagSrc].callbacks[i]();\n          }\n        } catch (e) {\n          utils.logError('Error executing callback', 'adloader.js:loadScript', e);\n        }\n      });\n    }\n  } else {\n    // trigger one time request\n    requestResource(tagSrc, callback);\n  }\n};\n\nfunction requestResource(tagSrc, callback) {\n  var jptScript = document.createElement('script');\n  jptScript.type = 'text/javascript';\n  jptScript.async = true;\n\n  // Execute a callback if necessary\n  if (callback && typeof callback === 'function') {\n    if (jptScript.readyState) {\n      jptScript.onreadystatechange = function () {\n        if (jptScript.readyState === 'loaded' || jptScript.readyState === 'complete') {\n          jptScript.onreadystatechange = null;\n          callback();\n        }\n      };\n    } else {\n      jptScript.onload = function () {\n        callback();\n      };\n    }\n  }\n\n  jptScript.src = tagSrc;\n\n  // add the new script tag to the page\n  var elToAppend = document.getElementsByTagName('head');\n  elToAppend = elToAppend.length ? elToAppend : document.getElementsByTagName('body');\n  if (elToAppend.length) {\n    elToAppend = elToAppend[0];\n    elToAppend.insertBefore(jptScript, elToAppend.firstChild);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adloader.js","'use strict';\nvar LIBRARY = require('./_library');\nvar $export = require('./_export');\nvar redefine = require('./_redefine');\nvar hide = require('./_hide');\nvar Iterators = require('./_iterators');\nvar $iterCreate = require('./_iter-create');\nvar setToStringTag = require('./_set-to-string-tag');\nvar getPrototypeOf = require('./_object-gpo');\nvar ITERATOR = require('./_wks')('iterator');\nvar BUGGY = !([].keys && 'next' in [].keys()); // Safari has buggy iterators w/o `next`\nvar FF_ITERATOR = '@@iterator';\nvar KEYS = 'keys';\nvar VALUES = 'values';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Base, NAME, Constructor, next, DEFAULT, IS_SET, FORCED) {\n  $iterCreate(Constructor, NAME, next);\n  var getMethod = function (kind) {\n    if (!BUGGY && kind in proto) return proto[kind];\n    switch (kind) {\n      case KEYS: return function keys() { return new Constructor(this, kind); };\n      case VALUES: return function values() { return new Constructor(this, kind); };\n    } return function entries() { return new Constructor(this, kind); };\n  };\n  var TAG = NAME + ' Iterator';\n  var DEF_VALUES = DEFAULT == VALUES;\n  var VALUES_BUG = false;\n  var proto = Base.prototype;\n  var $native = proto[ITERATOR] || proto[FF_ITERATOR] || DEFAULT && proto[DEFAULT];\n  var $default = $native || getMethod(DEFAULT);\n  var $entries = DEFAULT ? !DEF_VALUES ? $default : getMethod('entries') : undefined;\n  var $anyNative = NAME == 'Array' ? proto.entries || $native : $native;\n  var methods, key, IteratorPrototype;\n  // Fix native\n  if ($anyNative) {\n    IteratorPrototype = getPrototypeOf($anyNative.call(new Base()));\n    if (IteratorPrototype !== Object.prototype && IteratorPrototype.next) {\n      // Set @@toStringTag to native iterators\n      setToStringTag(IteratorPrototype, TAG, true);\n      // fix for some old engines\n      if (!LIBRARY && typeof IteratorPrototype[ITERATOR] != 'function') hide(IteratorPrototype, ITERATOR, returnThis);\n    }\n  }\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEF_VALUES && $native && $native.name !== VALUES) {\n    VALUES_BUG = true;\n    $default = function values() { return $native.call(this); };\n  }\n  // Define iterator\n  if ((!LIBRARY || FORCED) && (BUGGY || VALUES_BUG || !proto[ITERATOR])) {\n    hide(proto, ITERATOR, $default);\n  }\n  // Plug for library\n  Iterators[NAME] = $default;\n  Iterators[TAG] = returnThis;\n  if (DEFAULT) {\n    methods = {\n      values: DEF_VALUES ? $default : getMethod(VALUES),\n      keys: IS_SET ? $default : getMethod(KEYS),\n      entries: $entries\n    };\n    if (FORCED) for (key in methods) {\n      if (!(key in proto)) redefine(proto, key, methods[key]);\n    } else $export($export.P + $export.F * (BUGGY || VALUES_BUG), NAME, methods);\n  }\n  return methods;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-define.js\n// module id = 51\n// module chunks = 265","var shared = require('./_shared')('keys');\nvar uid = require('./_uid');\nmodule.exports = function (key) {\n  return shared[key] || (shared[key] = uid(key));\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared-key.js\n// module id = 52\n// module chunks = 265","var def = require('./_object-dp').f;\nvar has = require('./_has');\nvar TAG = require('./_wks')('toStringTag');\n\nmodule.exports = function (it, tag, stat) {\n  if (it && !has(it = stat ? it : it.prototype, TAG)) def(it, TAG, { configurable: true, value: tag });\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_set-to-string-tag.js\n// module id = 53\n// module chunks = 265","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_a-function.js\n// module id = 54\n// module chunks = 265","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_dom-create.js\n// module id = 55\n// module chunks = 265","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iobject.js\n// module id = 56\n// module chunks = 265","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: ' 2019 Denis Pushkarev (zloirock.ru)'\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_shared.js\n// module id = 57\n// module chunks = 265","module.exports = true;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_library.js\n// module id = 58\n// module chunks = 265","// false -> Array#indexOf\n// true  -> Array#includes\nvar toIObject = require('./_to-iobject');\nvar toLength = require('./_to-length');\nvar toAbsoluteIndex = require('./_to-absolute-index');\nmodule.exports = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) if (IS_INCLUDES || index in O) {\n      if (O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-includes.js\n// module id = 59\n// module chunks = 265","import { config } from './config';\nimport {logWarn, isPlainObject, deepAccess, deepClone, getWindowTop} from './utils';\nimport includes from 'core-js/library/fn/array/includes';\n\nlet sizeConfig = [];\n\n/**\n * @typedef {object} SizeConfig\n *\n * @property {string} [mediaQuery] A CSS media query string that will to be interpreted by window.matchMedia.  If the\n *  media query matches then the this config will be active and sizesSupported will filter bid and adUnit sizes.  If\n *  this property is not present then this SizeConfig will only be active if triggered manually by a call to\n *  pbjs.setConfig({labels:['label']) specifying one of the labels present on this SizeConfig.\n * @property {Array<Array>} sizesSupported The sizes to be accepted if this SizeConfig is enabled.\n * @property {Array<string>} labels The active labels to match this SizeConfig to an adUnits and/or bidders.\n */\n\n/**\n *\n * @param {Array<SizeConfig>} config\n */\nexport function setSizeConfig(config) {\n  sizeConfig = config;\n}\nconfig.getConfig('sizeConfig', config => setSizeConfig(config.sizeConfig));\n\n/**\n * Returns object describing the status of labels on the adUnit or bidder along with labels passed into requestBids\n * @param bidOrAdUnit the bidder or adUnit to get label info on\n * @param activeLabels the labels passed to requestBids\n * @returns {LabelDescriptor}\n */\nexport function getLabels(bidOrAdUnit, activeLabels) {\n  if (bidOrAdUnit.labelAll) {\n    return {labelAll: true, labels: bidOrAdUnit.labelAll, activeLabels};\n  }\n  return {labelAll: false, labels: bidOrAdUnit.labelAny, activeLabels};\n}\n\n/**\n * Determines whether a single size is valid given configured sizes\n * @param {Array} size [width, height]\n * @param {Array<SizeConfig>} configs\n * @returns {boolean}\n */\nexport function sizeSupported(size, configs = sizeConfig) {\n  let maps = evaluateSizeConfig(configs);\n  if (!maps.shouldFilter) {\n    return true;\n  }\n  return !!maps.sizesSupported[size];\n}\n\n/**\n * Resolves the unique set of the union of all sizes and labels that are active from a SizeConfig.mediaQuery match\n * @param {Array<string>} labels Labels specified on adUnit or bidder\n * @param {boolean} labelAll if true, all labels must match to be enabled\n * @param {Array<string>} activeLabels Labels passed in through requestBids\n * @param {object} mediaTypes A mediaTypes object describing the various media types (banner, video, native)\n * @param {Array<Array<number>>} sizes Sizes specified on adUnit (deprecated)\n * @param {Array<SizeConfig>} configs\n * @returns {{labels: Array<string>, sizes: Array<Array<number>>}}\n */\nexport function resolveStatus({labels = [], labelAll = false, activeLabels = []} = {}, mediaTypes, sizes, configs = sizeConfig) {\n  let maps = evaluateSizeConfig(configs);\n\n  if (!isPlainObject(mediaTypes)) {\n    // add support for deprecated adUnit.sizes by creating correct banner mediaTypes if they don't already exist\n    if (sizes) {\n      mediaTypes = {\n        banner: {\n          sizes\n        }\n      };\n    } else {\n      mediaTypes = {};\n    }\n  } else {\n    mediaTypes = deepClone(mediaTypes);\n  }\n\n  let oldSizes = deepAccess(mediaTypes, 'banner.sizes');\n  if (maps.shouldFilter && oldSizes) {\n    mediaTypes.banner.sizes = oldSizes.filter(size => maps.sizesSupported[size]);\n  }\n\n  let allMediaTypes = Object.keys(mediaTypes);\n\n  let results = {\n    active: (\n      allMediaTypes.every(type => type !== 'banner')\n    ) || (\n      allMediaTypes.some(type => type === 'banner') && deepAccess(mediaTypes, 'banner.sizes.length') > 0 && (\n        labels.length === 0 || (\n          (!labelAll && (\n            labels.some(label => maps.labels[label]) ||\n            labels.some(label => includes(activeLabels, label))\n          )) ||\n          (labelAll && (\n            labels.reduce((result, label) => !result ? result : (\n              maps.labels[label] || includes(activeLabels, label)\n            ), true)\n          ))\n        )\n      )\n    ),\n    mediaTypes\n  };\n\n  if (oldSizes && oldSizes.length !== mediaTypes.banner.sizes.length) {\n    results.filterResults = {\n      before: oldSizes,\n      after: mediaTypes.banner.sizes\n    }\n  }\n\n  return results;\n}\n\nfunction evaluateSizeConfig(configs) {\n  return configs.reduce((results, config) => {\n    if (\n      typeof config === 'object' &&\n      typeof config.mediaQuery === 'string'\n    ) {\n      let ruleMatch = false;\n\n      try {\n        ruleMatch = getWindowTop().matchMedia(config.mediaQuery).matches;\n      } catch (e) {\n        logWarn('Unfriendly iFrame blocks sizeConfig from being correctly evaluated');\n\n        ruleMatch = matchMedia(config.mediaQuery).matches;\n      }\n\n      if (ruleMatch) {\n        if (Array.isArray(config.sizesSupported)) {\n          results.shouldFilter = true;\n        }\n        ['labels', 'sizesSupported'].forEach(\n          type => (config[type] || []).forEach(\n            thing => results[type][thing] = true\n          )\n        );\n      }\n    } else {\n      logWarn('sizeConfig rule missing required property \"mediaQuery\"');\n    }\n    return results;\n  }, {\n    labels: {},\n    sizesSupported: {},\n    shouldFilter: false\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/sizeMapping.js","import { deepAccess } from './utils';\n\nlet adUnits = {};\n\n/**\n * Increments and returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction incrementCounter(adunit) {\n  adUnits[adunit] = adUnits[adunit] || {};\n  adUnits[adunit].counter = (deepAccess(adUnits, `${adunit}.counter`) + 1) || 1;\n  return adUnits[adunit].counter;\n}\n\n/**\n * Returns current Adunit counter\n * @param {string} adunit id\n * @returns {number} current adunit count\n */\nfunction getCounter(adunit) {\n  return deepAccess(adUnits, `${adunit}.counter`) || 0;\n}\n\n/**\n * A module which counts how many times an adunit was called\n * @module adunitCounter\n */\nlet adunitCounter = {\n  incrementCounter,\n  getCounter\n}\n\nexport { adunitCounter };\n\n\n\n// WEBPACK FOOTER //\n// ./src/adUnits.js","/**\n * This module interacts with the server used to cache video ad content to be restored later.\n * At a high level, the expected workflow goes like this:\n *\n *   - Request video ads from Bidders\n *   - Generate IDs for each valid bid, and cache the key/value pair on the server.\n *   - Return these IDs so that publishers can use them to fetch the bids later.\n *\n * This trickery helps integrate with ad servers, which set character limits on request params.\n */\n\nimport { ajax } from './ajax';\nimport { config } from '../src/config';\n\n/**\n * @typedef {object} CacheableUrlBid\n * @property {string} vastUrl A URL which loads some valid VAST XML.\n */\n\n/**\n * @typedef {object} CacheablePayloadBid\n * @property {string} vastXml Some VAST XML which loads an ad in a video player.\n */\n\n/**\n * A CacheableBid describes the types which the videoCache can store.\n *\n * @typedef {CacheableUrlBid|CacheablePayloadBid} CacheableBid\n */\n\n/**\n * Function which wraps a URI that serves VAST XML, so that it can be loaded.\n *\n * @param {string} uri The URI where the VAST content can be found.\n * @param {string} impUrl An impression tracker URL for the delivery of the video ad\n * @return A VAST URL which loads XML from the given URI.\n */\nfunction wrapURI(uri, impUrl) {\n  // Technically, this is vulnerable to cross-script injection by sketchy vastUrl bids.\n  // We could make sure it's a valid URI... but since we're loading VAST XML from the\n  // URL they provide anyway, that's probably not a big deal.\n  let vastImp = (impUrl) ? `<![CDATA[${impUrl}]]>` : ``;\n  return `<VAST version=\"3.0\">\n    <Ad>\n      <Wrapper>\n        <AdSystem>prebid.org wrapper</AdSystem>\n        <VASTAdTagURI><![CDATA[${uri}]]></VASTAdTagURI>\n        <Impression>${vastImp}</Impression>\n        <Creatives></Creatives>\n      </Wrapper>\n    </Ad>\n  </VAST>`;\n}\n\n/**\n * Wraps a bid in the format expected by the prebid-server endpoints, or returns null if\n * the bid can't be converted cleanly.\n *\n * @param {CacheableBid} bid\n */\nfunction toStorageRequest(bid) {\n  const vastValue = bid.vastXml ? bid.vastXml : wrapURI(bid.vastUrl, bid.vastImpUrl);\n  let payload = {\n    type: 'xml',\n    value: vastValue,\n    ttlseconds: Number(bid.ttl)\n  };\n\n  if (typeof bid.customCacheKey === 'string' && bid.customCacheKey !== '') {\n    payload.key = bid.customCacheKey;\n  }\n\n  return payload;\n}\n\n/**\n * A function which should be called with the results of the storage operation.\n *\n * @callback videoCacheStoreCallback\n *\n * @param {Error} [error] The error, if one occurred.\n * @param {?string[]} uuids An array of unique IDs. The array will have one element for each bid we were asked\n *   to store. It may include null elements if some of the bids were malformed, or an error occurred.\n *   Each non-null element in this array is a valid input into the retrieve function, which will fetch\n *   some VAST XML which can be used to render this bid's ad.\n */\n\n/**\n * A function which bridges the APIs between the videoCacheStoreCallback and our ajax function's API.\n *\n * @param {videoCacheStoreCallback} done A callback to the \"store\" function.\n * @return {Function} A callback which interprets the cache server's responses, and makes up the right\n *   arguments for our callback.\n */\nfunction shimStorageCallback(done) {\n  return {\n    success: function(responseBody) {\n      let ids;\n      try {\n        ids = JSON.parse(responseBody).responses\n      } catch (e) {\n        done(e, []);\n        return;\n      }\n\n      if (ids) {\n        done(null, ids);\n      } else {\n        done(new Error(\"The cache server didn't respond with a responses property.\"), []);\n      }\n    },\n    error: function(statusText, responseBody) {\n      done(new Error(`Error storing video ad in the cache: ${statusText}: ${JSON.stringify(responseBody)}`), []);\n    }\n  }\n}\n\n/**\n * If the given bid is for a Video ad, generate a unique ID and cache it somewhere server-side.\n *\n * @param {CacheableBid[]} bids A list of bid objects which should be cached.\n * @param {videoCacheStoreCallback} [done] An optional callback which should be executed after\n * the data has been stored in the cache.\n */\nexport function store(bids, done) {\n  const requestData = {\n    puts: bids.map(toStorageRequest)\n  };\n\n  ajax(config.getConfig('cache.url'), shimStorageCallback(done), JSON.stringify(requestData), {\n    contentType: 'text/plain',\n    withCredentials: true\n  });\n}\n\nexport function getCacheUrl(id) {\n  return `${config.getConfig('cache.url')}?uuid=${id}`;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/videoCache.js","/** @module pbjs */\n\nimport { getGlobal } from './prebidGlobal';\nimport { flatten, uniques, isGptPubadsDefined, adUnitsFilter, getLatestHighestCpmBid, isArrayOfNums } from './utils';\nimport { listenMessagesFromCreative } from './secureCreatives';\nimport { userSync } from './userSync.js';\nimport { loadScript } from './adloader';\nimport { config } from './config';\nimport { auctionManager } from './auctionManager';\nimport { targeting, getHighestCpmBidsFromBidPool } from './targeting';\nimport { hook } from './hook';\nimport { sessionLoader } from './debugging';\nimport includes from 'core-js/library/fn/array/includes';\nimport { adunitCounter } from './adUnits';\nimport { isRendererRequired, executeRenderer } from './Renderer';\nimport { createBid } from './bidfactory';\n\nconst $$PREBID_GLOBAL$$ = getGlobal();\nconst CONSTANTS = require('./constants.json');\nconst utils = require('./utils.js');\nconst adapterManager = require('./adapterManager').default;\nconst events = require('./events');\nconst { triggerUserSyncs } = userSync;\n\n/* private variables */\nconst { ADD_AD_UNITS, BID_WON, REQUEST_BIDS, SET_TARGETING, AD_RENDER_FAILED } = CONSTANTS.EVENTS;\nconst { PREVENT_WRITING_ON_MAIN_DOCUMENT, NO_AD, EXCEPTION, CANNOT_FIND_AD, MISSING_DOC_OR_ADID } = CONSTANTS.AD_RENDER_FAILED_REASON;\n\nconst eventValidators = {\n  bidWon: checkDefinedPlacement\n};\n\n// initialize existing debugging sessions if present\nsessionLoader();\n\n/* Public vars */\n$$PREBID_GLOBAL$$.bidderSettings = $$PREBID_GLOBAL$$.bidderSettings || {};\n\n// let the world know we are loaded\n$$PREBID_GLOBAL$$.libLoaded = true;\n\n// version auto generated from build\n$$PREBID_GLOBAL$$.version = 'v$prebid.version$';\nutils.logInfo('Prebid.js v$prebid.version$ loaded');\n\n// create adUnit array\n$$PREBID_GLOBAL$$.adUnits = $$PREBID_GLOBAL$$.adUnits || [];\n\n// Allow publishers who enable user sync override to trigger their sync\n$$PREBID_GLOBAL$$.triggerUserSyncs = triggerUserSyncs;\n\nfunction checkDefinedPlacement(id) {\n  var adUnitCodes = auctionManager.getBidsRequested().map(bidSet => bidSet.bids.map(bid => bid.adUnitCode))\n    .reduce(flatten)\n    .filter(uniques);\n\n  if (!utils.contains(adUnitCodes, id)) {\n    utils.logError('The \"' + id + '\" placement is not defined.');\n    return;\n  }\n\n  return true;\n}\n\nfunction setRenderSize(doc, width, height) {\n  if (doc.defaultView && doc.defaultView.frameElement) {\n    doc.defaultView.frameElement.width = width;\n    doc.defaultView.frameElement.height = height;\n  }\n}\n\nexport const checkAdUnitSetup = hook('sync', function (adUnits) {\n  adUnits.forEach((adUnit) => {\n    const mediaTypes = adUnit.mediaTypes;\n    const normalizedSize = utils.getAdUnitSizes(adUnit);\n\n    if (mediaTypes && mediaTypes.banner) {\n      const banner = mediaTypes.banner;\n      if (banner.sizes) {\n        // make sure we always send [[h,w]] format\n        banner.sizes = normalizedSize;\n        adUnit.sizes = normalizedSize;\n      } else {\n        utils.logError('Detected a mediaTypes.banner object did not include sizes.  This is a required field for the mediaTypes.banner object.  Removing invalid mediaTypes.banner object from request.');\n        delete adUnit.mediaTypes.banner;\n      }\n    } else if (adUnit.sizes) {\n      utils.logWarn('Usage of adUnits.sizes will eventually be deprecated.  Please define size dimensions within the corresponding area of the mediaTypes.<object> (eg mediaTypes.banner.sizes).');\n      adUnit.sizes = normalizedSize;\n    }\n\n    if (mediaTypes && mediaTypes.video) {\n      const video = mediaTypes.video;\n      if (video.playerSize) {\n        if (Array.isArray(video.playerSize) && video.playerSize.length === 1 && video.playerSize.every(plySize => isArrayOfNums(plySize, 2))) {\n          adUnit.sizes = video.playerSize;\n        } else if (isArrayOfNums(video.playerSize, 2)) {\n          let newPlayerSize = [];\n          newPlayerSize.push(video.playerSize);\n          utils.logInfo(`Transforming video.playerSize from [${video.playerSize}] to [[${newPlayerSize}]] so it's in the proper format.`);\n          adUnit.sizes = video.playerSize = newPlayerSize;\n        } else {\n          utils.logError('Detected incorrect configuration of mediaTypes.video.playerSize.  Please specify only one set of dimensions in a format like: [[640, 480]]. Removing invalid mediaTypes.video.playerSize property from request.');\n          delete adUnit.mediaTypes.video.playerSize;\n        }\n      }\n    }\n\n    if (mediaTypes && mediaTypes.native) {\n      const nativeObj = mediaTypes.native;\n      if (nativeObj.image && nativeObj.image.sizes && !Array.isArray(nativeObj.image.sizes)) {\n        utils.logError('Please use an array of sizes for native.image.sizes field.  Removing invalid mediaTypes.native.image.sizes property from request.');\n        delete adUnit.mediaTypes.native.image.sizes;\n      }\n      if (nativeObj.image && nativeObj.image.aspect_ratios && !Array.isArray(nativeObj.image.aspect_ratios)) {\n        utils.logError('Please use an array of sizes for native.image.aspect_ratios field.  Removing invalid mediaTypes.native.image.aspect_ratios property from request.');\n        delete adUnit.mediaTypes.native.image.aspect_ratios;\n      }\n      if (nativeObj.icon && nativeObj.icon.sizes && !Array.isArray(nativeObj.icon.sizes)) {\n        utils.logError('Please use an array of sizes for native.icon.sizes field.  Removing invalid mediaTypes.native.icon.sizes property from request.');\n        delete adUnit.mediaTypes.native.icon.sizes;\n      }\n    }\n  });\n  return adUnits;\n}, 'checkAdUnitSetup');\n\n/// ///////////////////////////////\n//                              //\n//    Start Public APIs         //\n//                              //\n/// ///////////////////////////////\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param  {string} [adunitCode] adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCodeStr\n * @return {Array}  returnObj return bids array\n */\n$$PREBID_GLOBAL$$.getAdserverTargetingForAdUnitCodeStr = function (adunitCode) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.getAdserverTargetingForAdUnitCodeStr', arguments);\n\n  // call to retrieve bids array\n  if (adunitCode) {\n    var res = $$PREBID_GLOBAL$$.getAdserverTargetingForAdUnitCode(adunitCode);\n    return utils.transformAdServerTargetingObj(res);\n  } else {\n    utils.logMessage('Need to call getAdserverTargetingForAdUnitCodeStr with adunitCode');\n  }\n};\n\n/**\n * This function returns the query string targeting parameters available at this moment for a given ad unit. Note that some bidder's response may not have been received if you call this function too quickly after the requests are sent.\n * @param adUnitCode {string} adUnitCode to get the bid responses for\n * @alias module:pbjs.getAdserverTargetingForAdUnitCode\n * @returns {Object}  returnObj return bids\n */\n$$PREBID_GLOBAL$$.getAdserverTargetingForAdUnitCode = function(adUnitCode) {\n  return $$PREBID_GLOBAL$$.getAdserverTargeting(adUnitCode)[adUnitCode];\n};\n\n/**\n * returns all ad server targeting for all ad units\n * @return {Object} Map of adUnitCodes and targeting values []\n * @alias module:pbjs.getAdserverTargeting\n */\n\n$$PREBID_GLOBAL$$.getAdserverTargeting = function (adUnitCode) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.getAdserverTargeting', arguments);\n  return targeting.getAllTargeting(adUnitCode);\n};\n\nfunction getBids(type) {\n  const responses = auctionManager[type]()\n    .filter(utils.bind.call(adUnitsFilter, this, auctionManager.getAdUnitCodes()));\n\n  // find the last auction id to get responses for most recent auction only\n  const currentAuctionId = auctionManager.getLastAuctionId();\n\n  return responses\n    .map(bid => bid.adUnitCode)\n    .filter(uniques).map(adUnitCode => responses\n      .filter(bid => bid.auctionId === currentAuctionId && bid.adUnitCode === adUnitCode))\n    .filter(bids => bids && bids[0] && bids[0].adUnitCode)\n    .map(bids => {\n      return {\n        [bids[0].adUnitCode]: { bids }\n      };\n    })\n    .reduce((a, b) => Object.assign(a, b), {});\n}\n\n/**\n * This function returns the bids requests involved in an auction but not bid on\n * @alias module:pbjs.getNoBids\n * @return {Object}            map | object that contains the bidRequests\n */\n\n$$PREBID_GLOBAL$$.getNoBids = function () {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.getNoBids', arguments);\n  return getBids('getNoBids');\n};\n\n/**\n * This function returns the bid responses at the given moment.\n * @alias module:pbjs.getBidResponses\n * @return {Object}            map | object that contains the bidResponses\n */\n\n$$PREBID_GLOBAL$$.getBidResponses = function () {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.getBidResponses', arguments);\n  return getBids('getBidsReceived');\n};\n\n/**\n * Returns bidResponses for the specified adUnitCode\n * @param  {string} adUnitCode adUnitCode\n * @alias module:pbjs.getBidResponsesForAdUnitCode\n * @return {Object}            bidResponse object\n */\n\n$$PREBID_GLOBAL$$.getBidResponsesForAdUnitCode = function (adUnitCode) {\n  const bids = auctionManager.getBidsReceived().filter(bid => bid.adUnitCode === adUnitCode);\n  return { bids };\n};\n\n/**\n * Set query string targeting on one or more GPT ad units.\n * @param {(string|string[])} adUnit a single `adUnit.code` or multiple.\n * @param {function(object)} customSlotMatching gets a GoogleTag slot and returns a filter function for adUnitCode, so you can decide to match on either eg. return slot => { return adUnitCode => { return slot.getSlotElementId() === 'myFavoriteDivId'; } };\n * @alias module:pbjs.setTargetingForGPTAsync\n */\n$$PREBID_GLOBAL$$.setTargetingForGPTAsync = function (adUnit, customSlotMatching) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.setTargetingForGPTAsync', arguments);\n  if (!isGptPubadsDefined()) {\n    utils.logError('window.googletag is not defined on the page');\n    return;\n  }\n\n  // get our ad unit codes\n  let targetingSet = targeting.getAllTargeting(adUnit);\n\n  // first reset any old targeting\n  targeting.resetPresetTargeting(adUnit);\n\n  // now set new targeting keys\n  targeting.setTargetingForGPT(targetingSet, customSlotMatching);\n\n  Object.keys(targetingSet).forEach((adUnitCode) => {\n    Object.keys(targetingSet[adUnitCode]).forEach((targetingKey) => {\n      if (targetingKey === 'hb_adid') {\n        auctionManager.setStatusForBids(targetingSet[adUnitCode][targetingKey], CONSTANTS.BID_STATUS.BID_TARGETING_SET);\n      }\n    });\n  });\n\n  // emit event\n  events.emit(SET_TARGETING, targetingSet);\n};\n\n/**\n * Set query string targeting on all AST (AppNexus Seller Tag) ad units. Note that this function has to be called after all ad units on page are defined. For working example code, see [Using Prebid.js with AppNexus Publisher Ad Server](http://prebid.org/dev-docs/examples/use-prebid-with-appnexus-ad-server.html).\n * @param  {(string|string[])} adUnitCode adUnitCode or array of adUnitCodes\n * @alias module:pbjs.setTargetingForAst\n */\n$$PREBID_GLOBAL$$.setTargetingForAst = function(adUnitCodes) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.setTargetingForAn', arguments);\n  if (!targeting.isApntagDefined()) {\n    utils.logError('window.apntag is not defined on the page');\n    return;\n  }\n\n  targeting.setTargetingForAst(adUnitCodes);\n\n  // emit event\n  events.emit(SET_TARGETING, targeting.getAllTargeting());\n};\n\nfunction emitAdRenderFail({ reason, message, bid, id }) {\n  const data = { reason, message };\n  if (bid) data.bid = bid;\n  if (id) data.adId = id;\n\n  utils.logError(message);\n  events.emit(AD_RENDER_FAILED, data);\n}\n\n/**\n * This function will render the ad (based on params) in the given iframe document passed through.\n * Note that doc SHOULD NOT be the parent document page as we can't doc.write() asynchronously\n * @param  {HTMLDocument} doc document\n * @param  {string} id bid id to locate the ad\n * @alias module:pbjs.renderAd\n */\n$$PREBID_GLOBAL$$.renderAd = function (doc, id) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.renderAd', arguments);\n  utils.logMessage('Calling renderAd with adId :' + id);\n\n  if (doc && id) {\n    try {\n      // lookup ad by ad Id\n      const bid = auctionManager.findBidByAdId(id);\n      if (bid) {\n        bid.status = CONSTANTS.BID_STATUS.RENDERED;\n        // replace macros according to openRTB with price paid = bid.cpm\n        bid.ad = utils.replaceAuctionPrice(bid.ad, bid.cpm);\n        bid.adUrl = utils.replaceAuctionPrice(bid.adUrl, bid.cpm);\n        // save winning bids\n        auctionManager.addWinningBid(bid);\n\n        // emit 'bid won' event here\n        events.emit(BID_WON, bid);\n\n        const { height, width, ad, mediaType, adUrl, renderer } = bid;\n\n        const creativeComment = document.createComment(`Creative ${bid.creativeId} served by ${bid.bidder} Prebid.js Header Bidding`);\n        utils.insertElement(creativeComment, doc, 'body');\n\n        if (isRendererRequired(renderer)) {\n          executeRenderer(renderer, bid);\n        } else if ((doc === document && !utils.inIframe()) || mediaType === 'video') {\n          const message = `Error trying to write ad. Ad render call ad id ${id} was prevented from writing to the main document.`;\n          emitAdRenderFail({ reason: PREVENT_WRITING_ON_MAIN_DOCUMENT, message, bid, id });\n        } else if (ad) {\n          // will check if browser is firefox and below version 67, if so execute special doc.open()\n          // for details see: https://github.com/prebid/Prebid.js/pull/3524\n          // TODO remove this browser specific code at later date (when Firefox < 67 usage is mostly gone)\n          if (navigator.userAgent && navigator.userAgent.toLowerCase().indexOf('firefox/') > -1) {\n            const firefoxVerRegx = /firefox\\/([\\d\\.]+)/;\n            let firefoxVer = navigator.userAgent.toLowerCase().match(firefoxVerRegx)[1]; // grabs the text in the 1st matching group\n            if (firefoxVer && parseInt(firefoxVer, 10) < 67) {\n              doc.open('text/html', 'replace');\n            }\n          }\n          doc.write(ad);\n          doc.close();\n          setRenderSize(doc, width, height);\n          utils.callBurl(bid);\n        } else if (adUrl) {\n          const iframe = utils.createInvisibleIframe();\n          iframe.height = height;\n          iframe.width = width;\n          iframe.style.display = 'inline';\n          iframe.style.overflow = 'hidden';\n          iframe.src = adUrl;\n\n          utils.insertElement(iframe, doc, 'body');\n          setRenderSize(doc, width, height);\n          utils.callBurl(bid);\n        } else {\n          const message = `Error trying to write ad. No ad for bid response id: ${id}`;\n          emitAdRenderFail({ reason: NO_AD, message, bid, id });\n        }\n      } else {\n        const message = `Error trying to write ad. Cannot find ad by given id : ${id}`;\n        emitAdRenderFail({ reason: CANNOT_FIND_AD, message, id });\n      }\n    } catch (e) {\n      const message = `Error trying to write ad Id :${id} to the page:${e.message}`;\n      emitAdRenderFail({ reason: EXCEPTION, message, id });\n    }\n  } else {\n    const message = `Error trying to write ad Id :${id} to the page. Missing document or adId`;\n    emitAdRenderFail({ reason: MISSING_DOC_OR_ADID, message, id });\n  }\n};\n\n/**\n * Remove adUnit from the $$PREBID_GLOBAL$$ configuration, if there are no addUnitCode(s) it will remove all\n * @param  {string| Array} adUnitCode the adUnitCode(s) to remove\n * @alias module:pbjs.removeAdUnit\n */\n$$PREBID_GLOBAL$$.removeAdUnit = function (adUnitCode) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.removeAdUnit', arguments);\n\n  if (!adUnitCode) {\n    $$PREBID_GLOBAL$$.adUnits = [];\n    return;\n  }\n\n  let adUnitCodes;\n\n  if (utils.isArray(adUnitCode)) {\n    adUnitCodes = adUnitCode;\n  } else {\n    adUnitCodes = [adUnitCode];\n  }\n\n  adUnitCodes.forEach((adUnitCode) => {\n    for (let i = $$PREBID_GLOBAL$$.adUnits.length - 1; i >= 0; i--) {\n      if ($$PREBID_GLOBAL$$.adUnits[i].code === adUnitCode) {\n        $$PREBID_GLOBAL$$.adUnits.splice(i, 1);\n      }\n    }\n  });\n};\n\n/**\n * @param {Object} requestOptions\n * @param {function} requestOptions.bidsBackHandler\n * @param {number} requestOptions.timeout\n * @param {Array} requestOptions.adUnits\n * @param {Array} requestOptions.adUnitCodes\n * @param {Array} requestOptions.labels\n * @param {String} requestOptions.auctionId\n * @alias module:pbjs.requestBids\n */\n$$PREBID_GLOBAL$$.requestBids = hook('async', function ({ bidsBackHandler, timeout, adUnits, adUnitCodes, labels, auctionId } = {}) {\n  events.emit(REQUEST_BIDS);\n  const cbTimeout = timeout || config.getConfig('bidderTimeout');\n  adUnits = adUnits || $$PREBID_GLOBAL$$.adUnits;\n\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.requestBids', arguments);\n\n  if (adUnitCodes && adUnitCodes.length) {\n    // if specific adUnitCodes supplied filter adUnits for those codes\n    adUnits = adUnits.filter(unit => includes(adUnitCodes, unit.code));\n  } else {\n    // otherwise derive adUnitCodes from adUnits\n    adUnitCodes = adUnits && adUnits.map(unit => unit.code);\n  }\n\n  adUnits = checkAdUnitSetup(adUnits);\n\n  /*\n   * for a given adunit which supports a set of mediaTypes\n   * and a given bidder which supports a set of mediaTypes\n   * a bidder is eligible to participate on the adunit\n   * if it supports at least one of the mediaTypes on the adunit\n   */\n  adUnits.forEach(adUnit => {\n    // get the adunit's mediaTypes, defaulting to banner if mediaTypes isn't present\n    const adUnitMediaTypes = Object.keys(adUnit.mediaTypes || {'banner': 'banner'});\n\n    // get the bidder's mediaTypes\n    const allBidders = adUnit.bids.map(bid => bid.bidder);\n    const bidderRegistry = adapterManager.bidderRegistry;\n\n    const s2sConfig = config.getConfig('s2sConfig');\n    const s2sBidders = s2sConfig && s2sConfig.bidders;\n    const bidders = (s2sBidders) ? allBidders.filter(bidder => {\n      return !includes(s2sBidders, bidder);\n    }) : allBidders;\n\n    adUnit.transactionId = utils.generateUUID();\n\n    bidders.forEach(bidder => {\n      const adapter = bidderRegistry[bidder];\n      const spec = adapter && adapter.getSpec && adapter.getSpec();\n      // banner is default if not specified in spec\n      const bidderMediaTypes = (spec && spec.supportedMediaTypes) || ['banner'];\n\n      // check if the bidder's mediaTypes are not in the adUnit's mediaTypes\n      const bidderEligible = adUnitMediaTypes.some(type => includes(bidderMediaTypes, type));\n      if (!bidderEligible) {\n        // drop the bidder from the ad unit if it's not compatible\n        utils.logWarn(utils.unsupportedBidderMessage(adUnit, bidder));\n        adUnit.bids = adUnit.bids.filter(bid => bid.bidder !== bidder);\n      }\n    });\n    adunitCounter.incrementCounter(adUnit.code);\n  });\n\n  if (!adUnits || adUnits.length === 0) {\n    utils.logMessage('No adUnits configured. No bids requested.');\n    if (typeof bidsBackHandler === 'function') {\n      // executeCallback, this will only be called in case of first request\n      try {\n        bidsBackHandler();\n      } catch (e) {\n        utils.logError('Error executing bidsBackHandler', null, e);\n      }\n    }\n    return;\n  }\n\n  const auction = auctionManager.createAuction({adUnits, adUnitCodes, callback: bidsBackHandler, cbTimeout, labels, auctionId});\n\n  let adUnitsLen = adUnits.length;\n  if (adUnitsLen > 15) {\n    utils.logInfo(`Current auction ${auction.getAuctionId()} contains ${adUnitsLen} adUnits.`, adUnits);\n  }\n\n  adUnitCodes.forEach(code => targeting.setLatestAuctionForAdUnit(code, auction.getAuctionId()));\n  auction.callBids();\n  return auction;\n});\n\n/**\n *\n * Add adunit(s)\n * @param {Array|Object} adUnitArr Array of adUnits or single adUnit Object.\n * @alias module:pbjs.addAdUnits\n */\n$$PREBID_GLOBAL$$.addAdUnits = function (adUnitArr) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.addAdUnits', arguments);\n  if (utils.isArray(adUnitArr)) {\n    $$PREBID_GLOBAL$$.adUnits.push.apply($$PREBID_GLOBAL$$.adUnits, adUnitArr);\n  } else if (typeof adUnitArr === 'object') {\n    $$PREBID_GLOBAL$$.adUnits.push(adUnitArr);\n  }\n  // emit event\n  events.emit(ADD_AD_UNITS);\n};\n\n/**\n * @param {string} event the name of the event\n * @param {Function} handler a callback to set on event\n * @param {string} id an identifier in the context of the event\n * @alias module:pbjs.onEvent\n *\n * This API call allows you to register a callback to handle a Prebid.js event.\n * An optional `id` parameter provides more finely-grained event callback registration.\n * This makes it possible to register callback events for a specific item in the\n * event context. For example, `bidWon` events will accept an `id` for ad unit code.\n * `bidWon` callbacks registered with an ad unit code id will be called when a bid\n * for that ad unit code wins the auction. Without an `id` this method registers the\n * callback for every `bidWon` event.\n *\n * Currently `bidWon` is the only event that accepts an `id` parameter.\n */\n$$PREBID_GLOBAL$$.onEvent = function (event, handler, id) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.onEvent', arguments);\n  if (!utils.isFn(handler)) {\n    utils.logError('The event handler provided is not a function and was not set on event \"' + event + '\".');\n    return;\n  }\n\n  if (id && !eventValidators[event].call(null, id)) {\n    utils.logError('The id provided is not valid for event \"' + event + '\" and no handler was set.');\n    return;\n  }\n\n  events.on(event, handler, id);\n};\n\n/**\n * @param {string} event the name of the event\n * @param {Function} handler a callback to remove from the event\n * @param {string} id an identifier in the context of the event (see `$$PREBID_GLOBAL$$.onEvent`)\n * @alias module:pbjs.offEvent\n */\n$$PREBID_GLOBAL$$.offEvent = function (event, handler, id) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.offEvent', arguments);\n  if (id && !eventValidators[event].call(null, id)) {\n    return;\n  }\n\n  events.off(event, handler, id);\n};\n\n/*\n * Wrapper to register bidderAdapter externally (adapterManager.registerBidAdapter())\n * @param  {Function} bidderAdaptor [description]\n * @param  {string} bidderCode [description]\n * @alias module:pbjs.registerBidAdapter\n */\n$$PREBID_GLOBAL$$.registerBidAdapter = function (bidderAdaptor, bidderCode) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.registerBidAdapter', arguments);\n  try {\n    adapterManager.registerBidAdapter(bidderAdaptor(), bidderCode);\n  } catch (e) {\n    utils.logError('Error registering bidder adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to register analyticsAdapter externally (adapterManager.registerAnalyticsAdapter())\n * @param  {Object} options [description]\n * @alias module:pbjs.registerAnalyticsAdapter\n */\n$$PREBID_GLOBAL$$.registerAnalyticsAdapter = function (options) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.registerAnalyticsAdapter', arguments);\n  try {\n    adapterManager.registerAnalyticsAdapter(options);\n  } catch (e) {\n    utils.logError('Error registering analytics adapter : ' + e.message);\n  }\n};\n\n/**\n * Wrapper to bidfactory.createBid()\n * @param  {string} statusCode [description]\n * @alias module:pbjs.createBid\n * @return {Object} bidResponse [description]\n */\n$$PREBID_GLOBAL$$.createBid = function (statusCode) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.createBid', arguments);\n  return createBid(statusCode);\n};\n\n/**\n * @deprecated this function will be removed in the next release. Prebid has deprected external JS loading.\n * @param  {string} tagSrc [description]\n * @param  {Function} callback [description]\n * @alias module:pbjs.loadScript\n */\n$$PREBID_GLOBAL$$.loadScript = function (tagSrc, callback, useCache) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.loadScript', arguments);\n  loadScript(tagSrc, callback, useCache);\n};\n\n/**\n * Enable sending analytics data to the analytics provider of your\n * choice.\n *\n * For usage, see [Integrate with the Prebid Analytics\n * API](http://prebid.org/dev-docs/integrate-with-the-prebid-analytics-api.html).\n *\n * For a list of analytics adapters, see [Analytics for\n * Prebid](http://prebid.org/overview/analytics.html).\n * @param  {Object} config\n * @param {string} config.provider The name of the provider, e.g., `\"ga\"` for Google Analytics.\n * @param {Object} config.options The options for this particular analytics adapter.  This will likely vary between adapters.\n * @alias module:pbjs.enableAnalytics\n */\n$$PREBID_GLOBAL$$.enableAnalytics = function (config) {\n  if (config && !utils.isEmpty(config)) {\n    utils.logInfo('Invoking $$PREBID_GLOBAL$$.enableAnalytics for: ', config);\n    adapterManager.enableAnalytics(config);\n  } else {\n    utils.logError('$$PREBID_GLOBAL$$.enableAnalytics should be called with option {}');\n  }\n};\n\n/**\n * @alias module:pbjs.aliasBidder\n */\n$$PREBID_GLOBAL$$.aliasBidder = function (bidderCode, alias) {\n  utils.logInfo('Invoking $$PREBID_GLOBAL$$.aliasBidder', arguments);\n  if (bidderCode && alias) {\n    adapterManager.aliasBidAdapter(bidderCode, alias);\n  } else {\n    utils.logError('bidderCode and alias must be passed as arguments', '$$PREBID_GLOBAL$$.aliasBidder');\n  }\n};\n\n/**\n * The bid response object returned by an external bidder adapter during the auction.\n * @typedef {Object} AdapterBidResponse\n * @property {string} pbAg Auto granularity price bucket; CPM <= 5 ? increment = 0.05 : CPM > 5 && CPM <= 10 ? increment = 0.10 : CPM > 10 && CPM <= 20 ? increment = 0.50 : CPM > 20 ? priceCap = 20.00.  Example: `\"0.80\"`.\n * @property {string} pbCg Custom price bucket.  For example setup, see {@link setPriceGranularity}.  Example: `\"0.84\"`.\n * @property {string} pbDg Dense granularity price bucket; CPM <= 3 ? increment = 0.01 : CPM > 3 && CPM <= 8 ? increment = 0.05 : CPM > 8 && CPM <= 20 ? increment = 0.50 : CPM > 20? priceCap = 20.00.  Example: `\"0.84\"`.\n * @property {string} pbLg Low granularity price bucket; $0.50 increment, capped at $5, floored to two decimal places.  Example: `\"0.50\"`.\n * @property {string} pbMg Medium granularity price bucket; $0.10 increment, capped at $20, floored to two decimal places.  Example: `\"0.80\"`.\n * @property {string} pbHg High granularity price bucket; $0.01 increment, capped at $20, floored to two decimal places.  Example: `\"0.84\"`.\n *\n * @property {string} bidder The string name of the bidder.  This *may* be the same as the `bidderCode`.  For For a list of all bidders and their codes, see [Bidders' Params](http://prebid.org/dev-docs/bidders.html).\n * @property {string} bidderCode The unique string that identifies this bidder.  For a list of all bidders and their codes, see [Bidders' Params](http://prebid.org/dev-docs/bidders.html).\n *\n * @property {string} requestId The [UUID](https://en.wikipedia.org/wiki/Universally_unique_identifier) representing the bid request.\n * @property {number} requestTimestamp The time at which the bid request was sent out, expressed in milliseconds.\n * @property {number} responseTimestamp The time at which the bid response was received, expressed in milliseconds.\n * @property {number} timeToRespond How long it took for the bidder to respond with this bid, expressed in milliseconds.\n *\n * @property {string} size The size of the ad creative, expressed in `\"AxB\"` format, where A and B are numbers of pixels.  Example: `\"320x50\"`.\n * @property {string} width The width of the ad creative in pixels.  Example: `\"320\"`.\n * @property {string} height The height of the ad creative in pixels.  Example: `\"50\"`.\n *\n * @property {string} ad The actual ad creative content, often HTML with CSS, JavaScript, and/or links to additional content.  Example: `\"<div id='beacon_-YQbipJtdxmMCgEPHExLhmqzEm' style='position: absolute; left: 0px; top: 0px; visibility: hidden;'><img src='http://aplus-...'/></div><iframe src=\\\"http://aax-us-east.amazon-adsystem.com/e/is/8dcfcd...\" width=\\\"728\\\" height=\\\"90\\\" frameborder=\\\"0\\\" ...></iframe>\",`.\n * @property {number} ad_id The ad ID of the creative, as understood by the bidder's system.  Used by the line item's [creative in the ad server](http://prebid.org/adops/send-all-bids-adops.html#step-3-add-a-creative).\n * @property {string} adUnitCode The code used to uniquely identify the ad unit on the publisher's page.\n *\n * @property {string} statusMessage The status of the bid.  Allowed values: `\"Bid available\"` or `\"Bid returned empty or error response\"`.\n * @property {number} cpm The exact bid price from the bidder, expressed to the thousandths place.  Example: `\"0.849\"`.\n *\n * @property {Object} adserverTargeting An object whose values represent the ad server's targeting on the bid.\n * @property {string} adserverTargeting.hb_adid The ad ID of the creative, as understood by the ad server.\n * @property {string} adserverTargeting.hb_pb The price paid to show the creative, as logged in the ad server.\n * @property {string} adserverTargeting.hb_bidder The winning bidder whose ad creative will be served by the ad server.\n*/\n\n/**\n * Get all of the bids that have been rendered.  Useful for [troubleshooting your integration](http://prebid.org/dev-docs/prebid-troubleshooting-guide.html).\n * @return {Array<AdapterBidResponse>} A list of bids that have been rendered.\n*/\n$$PREBID_GLOBAL$$.getAllWinningBids = function () {\n  return auctionManager.getAllWinningBids();\n};\n\n/**\n * Get all of the bids that have won their respective auctions.\n * @return {Array<AdapterBidResponse>} A list of bids that have won their respective auctions.\n */\n$$PREBID_GLOBAL$$.getAllPrebidWinningBids = function () {\n  return auctionManager.getBidsReceived()\n    .filter(bid => bid.status === CONSTANTS.BID_STATUS.BID_TARGETING_SET);\n};\n\n/**\n * Get array of highest cpm bids for all adUnits, or highest cpm bid\n * object for the given adUnit\n * @param {string} adUnitCode - optional ad unit code\n * @alias module:pbjs.getHighestCpmBids\n * @return {Array} array containing highest cpm bid object(s)\n */\n$$PREBID_GLOBAL$$.getHighestCpmBids = function (adUnitCode) {\n  let bidsReceived = getHighestCpmBidsFromBidPool(auctionManager.getBidsReceived(), getLatestHighestCpmBid);\n  return targeting.getWinningBids(adUnitCode, bidsReceived);\n};\n\n/**\n * Mark the winning bid as used, should only be used in conjunction with video\n * @typedef {Object} MarkBidRequest\n * @property {string} adUnitCode The ad unit code\n * @property {string} adId The id representing the ad we want to mark\n *\n * @alias module:pbjs.markWinningBidAsUsed\n*/\n$$PREBID_GLOBAL$$.markWinningBidAsUsed = function (markBidRequest) {\n  let bids = [];\n\n  if (markBidRequest.adUnitCode && markBidRequest.adId) {\n    bids = auctionManager.getBidsReceived()\n      .filter(bid => bid.adId === markBidRequest.adId && bid.adUnitCode === markBidRequest.adUnitCode);\n  } else if (markBidRequest.adUnitCode) {\n    bids = targeting.getWinningBids(markBidRequest.adUnitCode);\n  } else if (markBidRequest.adId) {\n    bids = auctionManager.getBidsReceived().filter(bid => bid.adId === markBidRequest.adId);\n  } else {\n    utils.logWarn('Inproper usage of markWinningBidAsUsed. It\\'ll need an adUnitCode and/or adId to function.');\n  }\n\n  if (bids.length > 0) {\n    bids[0].status = CONSTANTS.BID_STATUS.RENDERED;\n  }\n};\n\n/**\n * Get Prebid config options\n * @param {Object} options\n * @alias module:pbjs.getConfig\n */\n$$PREBID_GLOBAL$$.getConfig = config.getConfig;\n\n/**\n * Set Prebid config options.\n * (Added in version 0.27.0).\n *\n * `setConfig` is designed to allow for advanced configuration while\n * reducing the surface area of the public API.  For more information\n * about the move to `setConfig` (and the resulting deprecations of\n * some other public methods), see [the Prebid 1.0 public API\n * proposal](https://gist.github.com/mkendall07/51ee5f6b9f2df01a89162cf6de7fe5b6).\n *\n * #### Troubleshooting your configuration\n *\n * If you call `pbjs.setConfig` without an object, e.g.,\n *\n * `pbjs.setConfig('debug', 'true'))`\n *\n * then Prebid.js will print an error to the console that says:\n *\n * ```\n * ERROR: setConfig options must be an object\n * ```\n *\n * If you don't see that message, you can assume the config object is valid.\n *\n * @param {Object} options Global Prebid configuration object. Must be JSON - no JavaScript functions are allowed.\n * @param {string} options.bidderSequence The order in which bidders are called.  Example: `pbjs.setConfig({ bidderSequence: \"fixed\" })`.  Allowed values: `\"fixed\"` (order defined in `adUnit.bids` array on page), `\"random\"`.\n * @param {boolean} options.debug Turn debug logging on/off. Example: `pbjs.setConfig({ debug: true })`.\n * @param {string} options.priceGranularity The bid price granularity to use.  Example: `pbjs.setConfig({ priceGranularity: \"medium\" })`. Allowed values: `\"low\"` ($0.50), `\"medium\"` ($0.10), `\"high\"` ($0.01), `\"auto\"` (sliding scale), `\"dense\"` (like `\"auto\"`, with smaller increments at lower CPMs), or a custom price bucket object, e.g., `{ \"buckets\" : [{\"min\" : 0,\"max\" : 20,\"increment\" : 0.1,\"cap\" : true}]}`.\n * @param {boolean} options.enableSendAllBids Turn \"send all bids\" mode on/off.  Example: `pbjs.setConfig({ enableSendAllBids: true })`.\n * @param {number} options.bidderTimeout Set a global bidder timeout, in milliseconds.  Example: `pbjs.setConfig({ bidderTimeout: 3000 })`.  Note that it's still possible for a bid to get into the auction that responds after this timeout. This is due to how [`setTimeout`](https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout) works in JS: it queues the callback in the event loop in an approximate location that should execute after this time but it is not guaranteed.  For more information about the asynchronous event loop and `setTimeout`, see [How JavaScript Timers Work](https://johnresig.com/blog/how-javascript-timers-work/).\n * @param {string} options.publisherDomain The publisher's domain where Prebid is running, for cross-domain iFrame communication.  Example: `pbjs.setConfig({ publisherDomain: \"https://www.theverge.com\" })`.\n * @param {Object} options.s2sConfig The configuration object for [server-to-server header bidding](http://prebid.org/dev-docs/get-started-with-prebid-server.html).  Example:\n * @alias module:pbjs.setConfig\n * ```\n * pbjs.setConfig({\n *     s2sConfig: {\n *         accountId: '1',\n *         enabled: true,\n *         bidders: ['appnexus', 'pubmatic'],\n *         timeout: 1000,\n *         adapter: 'prebidServer',\n *         endpoint: 'https://prebid.adnxs.com/pbs/v1/auction'\n *     }\n * })\n * ```\n */\n$$PREBID_GLOBAL$$.setConfig = config.setConfig;\n\n$$PREBID_GLOBAL$$.que.push(() => listenMessagesFromCreative());\n\n/**\n * This queue lets users load Prebid asynchronously, but run functions the same way regardless of whether it gets loaded\n * before or after their script executes. For example, given the code:\n *\n * <script src=\"url/to/Prebid.js\" async></script>\n * <script>\n *   var pbjs = pbjs || {};\n *   pbjs.cmd = pbjs.cmd || [];\n *   pbjs.cmd.push(functionToExecuteOncePrebidLoads);\n * </script>\n *\n * If the page's script runs before prebid loads, then their function gets added to the queue, and executed\n * by prebid once it's done loading. If it runs after prebid loads, then this monkey-patch causes their\n * function to execute immediately.\n *\n * @memberof pbjs\n * @param  {function} command A function which takes no arguments. This is guaranteed to run exactly once, and only after\n *                            the Prebid script has been fully loaded.\n * @alias module:pbjs.cmd.push\n */\n$$PREBID_GLOBAL$$.cmd.push = function(command) {\n  if (typeof command === 'function') {\n    try {\n      command.call();\n    } catch (e) {\n      utils.logError('Error processing command :', e.message, e.stack);\n    }\n  } else {\n    utils.logError('Commands written into $$PREBID_GLOBAL$$.cmd.push must be wrapped in a function');\n  }\n};\n\n$$PREBID_GLOBAL$$.que.push = $$PREBID_GLOBAL$$.cmd.push;\n\nfunction processQueue(queue) {\n  queue.forEach(function(cmd) {\n    if (typeof cmd.called === 'undefined') {\n      try {\n        cmd.call();\n        cmd.called = true;\n      } catch (e) {\n        utils.logError('Error processing command :', 'prebid.js', e);\n      }\n    }\n  });\n}\n\n/**\n * @alias module:pbjs.processQueue\n */\n$$PREBID_GLOBAL$$.processQueue = function() {\n  hook.ready();\n  processQueue($$PREBID_GLOBAL$$.que);\n  processQueue($$PREBID_GLOBAL$$.cmd);\n};\n\nexport default $$PREBID_GLOBAL$$;\n\n\n\n// WEBPACK FOOTER //\n// ./src/prebid.js","import { uniques, isGptPubadsDefined, getHighestCpm, getOldestHighestCpmBid, groupBy, isAdUnitCodeMatchingSlot, timestamp, deepAccess, deepClone, logError, logWarn, logInfo } from './utils';\nimport { config } from './config';\nimport { NATIVE_TARGETING_KEYS } from './native';\nimport { auctionManager } from './auctionManager';\nimport { sizeSupported } from './sizeMapping';\nimport { ADPOD } from './mediaTypes';\nimport includes from 'core-js/library/fn/array/includes';\n\nconst utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\n\nvar pbTargetingKeys = [];\n\nconst MAX_DFP_KEYLENGTH = 20;\nconst TTL_BUFFER = 1000;\n\nexport const TARGETING_KEYS = Object.keys(CONSTANTS.TARGETING_KEYS).map(\n  key => CONSTANTS.TARGETING_KEYS[key]\n);\n\n// return unexpired bids\nconst isBidNotExpired = (bid) => (bid.responseTimestamp + bid.ttl * 1000 + TTL_BUFFER) > timestamp();\n\n// return bids whose status is not set. Winning bid can have status `targetingSet` or `rendered`.\nconst isUnusedBid = (bid) => bid && ((bid.status && !includes([CONSTANTS.BID_STATUS.BID_TARGETING_SET, CONSTANTS.BID_STATUS.RENDERED], bid.status)) || !bid.status);\n\nexport let filters = {\n  isBidNotExpired,\n  isUnusedBid\n};\n\n// If two bids are found for same adUnitCode, we will use the highest one to take part in auction\n// This can happen in case of concurrent auctions\nexport function getHighestCpmBidsFromBidPool(bidsReceived, highestCpmCallback) {\n  const bids = [];\n  // bucket by adUnitcode\n  let buckets = groupBy(bidsReceived, 'adUnitCode');\n  // filter top bid for each bucket by bidder\n  Object.keys(buckets).forEach(bucketKey => {\n    let bidsByBidder = groupBy(buckets[bucketKey], 'bidderCode');\n    Object.keys(bidsByBidder).forEach(key => bids.push(bidsByBidder[key].reduce(highestCpmCallback)));\n  });\n  return bids;\n}\n\n/**\n* A descending sort function that will sort the list of objects based on the following two dimensions:\n*  - bids with a deal are sorted before bids w/o a deal\n*  - then sort bids in each grouping based on the hb_pb value\n* eg: the following list of bids would be sorted like:\n*  [{\n*    \"hb_adid\": \"vwx\",\n*    \"hb_pb\": \"28\",\n*    \"hb_deal\": \"7747\"\n*  }, {\n*    \"hb_adid\": \"jkl\",\n*    \"hb_pb\": \"10\",\n*    \"hb_deal\": \"9234\"\n*  }, {\n*    \"hb_adid\": \"stu\",\n*    \"hb_pb\": \"50\"\n*  }, {\n*    \"hb_adid\": \"def\",\n*    \"hb_pb\": \"2\"\n*  }]\n*/\nexport function sortByDealAndPriceBucket(a, b) {\n  if (a.adUnitTargeting.hb_deal !== undefined && b.adUnitTargeting.hb_deal === undefined) {\n    return -1;\n  }\n\n  if ((a.adUnitTargeting.hb_deal === undefined && b.adUnitTargeting.hb_deal !== undefined)) {\n    return 1;\n  }\n\n  // assuming both values either have a deal or don't have a deal - sort by the hb_pb param\n  return b.adUnitTargeting.hb_pb - a.adUnitTargeting.hb_pb;\n}\n\n/**\n * @typedef {Object.<string,string>} targeting\n * @property {string} targeting_key\n */\n\n/**\n * @typedef {Object.<string,Object.<string,string[]>[]>[]} targetingArray\n */\n\nexport function newTargeting(auctionManager) {\n  let targeting = {};\n  let latestAuctionForAdUnit = {};\n\n  targeting.setLatestAuctionForAdUnit = function(adUnitCode, auctionId) {\n    latestAuctionForAdUnit[adUnitCode] = auctionId;\n  };\n\n  targeting.resetPresetTargeting = function(adUnitCode) {\n    if (isGptPubadsDefined()) {\n      const adUnitCodes = getAdUnitCodes(adUnitCode);\n      const adUnits = auctionManager.getAdUnits().filter(adUnit => includes(adUnitCodes, adUnit.code));\n      window.googletag.pubads().getSlots().forEach(slot => {\n        pbTargetingKeys.forEach(function(key) {\n          // reset only registered adunits\n          adUnits.forEach(function(unit) {\n            if (unit.code === slot.getAdUnitPath() ||\n                unit.code === slot.getSlotElementId()) {\n              slot.setTargeting(key, null);\n            }\n          });\n        });\n      });\n    }\n  };\n\n  targeting.resetPresetTargetingAST = function(adUnitCode) {\n    const adUnitCodes = getAdUnitCodes(adUnitCode);\n    adUnitCodes.forEach(function(unit) {\n      const astTag = window.apntag.getTag(unit);\n      if (astTag && astTag.keywords) {\n        const currentKeywords = Object.keys(astTag.keywords);\n        const newKeywords = {};\n        currentKeywords.forEach((key) => {\n          if (!includes(pbTargetingKeys, key.toLowerCase())) {\n            newKeywords[key] = astTag.keywords[key];\n          }\n        })\n        window.apntag.modifyTag(unit, { keywords: newKeywords })\n      }\n    });\n  };\n\n  /**\n   * checks if bid has targeting set and belongs based on matching ad unit codes\n   * @return {boolean} true or false\n   */\n  function bidShouldBeAddedToTargeting(bid, adUnitCodes) {\n    return bid.adserverTargeting && adUnitCodes &&\n      ((utils.isArray(adUnitCodes) && includes(adUnitCodes, bid.adUnitCode)) ||\n      (typeof adUnitCodes === 'string' && bid.adUnitCode === adUnitCodes));\n  };\n\n  /**\n   * Returns targeting for any bids which have deals if alwaysIncludeDeals === true\n   */\n  function getDealBids(adUnitCodes, bidsReceived) {\n    if (config.getConfig('targetingControls.alwaysIncludeDeals') === true) {\n      const standardKeys = TARGETING_KEYS.concat(NATIVE_TARGETING_KEYS);\n\n      // we only want the top bid from bidders who have multiple entries per ad unit code\n      const bids = getHighestCpmBidsFromBidPool(bidsReceived, getHighestCpm);\n\n      // populate targeting keys for the remaining bids if they have a dealId\n      return bids.map(bid => {\n        if (bid.dealId && bidShouldBeAddedToTargeting(bid, adUnitCodes)) {\n          return {\n            [bid.adUnitCode]: getTargetingMap(bid, standardKeys.filter(\n              key => typeof bid.adserverTargeting[key] !== 'undefined')\n            )\n          };\n        }\n      }).filter(bid => bid); // removes empty elements in array\n    }\n    return [];\n  };\n\n  /**\n   * Returns all ad server targeting for all ad units.\n   * @param {string=} adUnitCode\n   * @return {Object.<string,targeting>} targeting\n   */\n  targeting.getAllTargeting = function(adUnitCode, bidsReceived = getBidsReceived()) {\n    const adUnitCodes = getAdUnitCodes(adUnitCode);\n\n    // Get targeting for the winning bid. Add targeting for any bids that have\n    // `alwaysUseBid=true`. If sending all bids is enabled, add targeting for losing bids.\n    var targeting = getWinningBidTargeting(adUnitCodes, bidsReceived)\n      .concat(getCustomBidTargeting(adUnitCodes, bidsReceived))\n      .concat(config.getConfig('enableSendAllBids') ? getBidLandscapeTargeting(adUnitCodes, bidsReceived) : getDealBids(adUnitCodes, bidsReceived));\n\n    // store a reference of the targeting keys\n    targeting.map(adUnitCode => {\n      Object.keys(adUnitCode).map(key => {\n        adUnitCode[key].map(targetKey => {\n          if (pbTargetingKeys.indexOf(Object.keys(targetKey)[0]) === -1) {\n            pbTargetingKeys = Object.keys(targetKey).concat(pbTargetingKeys);\n          }\n        });\n      });\n    });\n\n    targeting = flattenTargeting(targeting);\n\n    const auctionKeysThreshold = config.getConfig('targetingControls.auctionKeyMaxChars');\n    if (auctionKeysThreshold) {\n      logInfo(`Detected 'targetingControls.auctionKeyMaxChars' was active for this auction; set with a limit of ${auctionKeysThreshold} characters.  Running checks on auction keys...`);\n      targeting = filterTargetingKeys(targeting, auctionKeysThreshold);\n    }\n\n    // make sure at least there is a entry per adUnit code in the targetingSet so receivers of SET_TARGETING call's can know what ad units are being invoked\n    adUnitCodes.forEach(code => {\n      if (!targeting[code]) {\n        targeting[code] = {};\n      }\n    });\n\n    return targeting;\n  };\n\n  // create an encoded string variant based on the keypairs of the provided object\n  //  - note this will encode the characters between the keys (ie = and &)\n  function convertKeysToQueryForm(keyMap) {\n    return Object.keys(keyMap).reduce(function (queryString, key) {\n      let encodedKeyPair = `${key}%3d${encodeURIComponent(keyMap[key])}%26`;\n      return queryString += encodedKeyPair;\n    }, '');\n  }\n\n  function filterTargetingKeys(targeting, auctionKeysThreshold) {\n    // read each targeting.adUnit object and sort the adUnits into a list of adUnitCodes based on priorization setting (eg CPM)\n    let targetingCopy = deepClone(targeting);\n\n    let targetingMap = Object.keys(targetingCopy).map(adUnitCode => {\n      return {\n        adUnitCode,\n        adUnitTargeting: targetingCopy[adUnitCode]\n      };\n    }).sort(sortByDealAndPriceBucket);\n\n    // iterate through the targeting based on above list and transform the keys into the query-equivalent and count characters\n    return targetingMap.reduce(function (accMap, currMap, index, arr) {\n      let adUnitQueryString = convertKeysToQueryForm(currMap.adUnitTargeting);\n\n      // for the last adUnit - trim last encoded ampersand from the converted query string\n      if ((index + 1) === arr.length) {\n        adUnitQueryString = adUnitQueryString.slice(0, -3);\n      }\n\n      // if under running threshold add to result\n      let code = currMap.adUnitCode;\n      let querySize = adUnitQueryString.length;\n      if (querySize <= auctionKeysThreshold) {\n        auctionKeysThreshold -= querySize;\n        logInfo(`AdUnit '${code}' auction keys comprised of ${querySize} characters.  Deducted from running threshold; new limit is ${auctionKeysThreshold}`, targetingCopy[code]);\n\n        accMap[code] = targetingCopy[code];\n      } else {\n        logWarn(`The following keys for adUnitCode '${code}' exceeded the current limit of the 'auctionKeyMaxChars' setting.\\nThe key-set size was ${querySize}, the current allotted amount was ${auctionKeysThreshold}.\\n`, targetingCopy[code]);\n      }\n\n      if ((index + 1) === arr.length && Object.keys(accMap).length === 0) {\n        logError('No auction targeting keys were permitted due to the setting in setConfig(targetingControls.auctionKeyMaxChars).  Please review setup and consider adjusting.');\n      }\n      return accMap;\n    }, {});\n  }\n\n  /**\n   * Converts targeting array and flattens to make it easily iteratable\n   * e.g: Sample input to this function\n   * ```\n   * [\n   *    {\n   *      \"div-gpt-ad-1460505748561-0\": [{\"hb_bidder\": [\"appnexusAst\"]}]\n   *    },\n   *    {\n   *      \"div-gpt-ad-1460505748561-0\": [{\"hb_bidder_appnexusAs\": [\"appnexusAst\"]}]\n   *    }\n   * ]\n   * ```\n   * Resulting array\n   * ```\n   * {\n   *  \"div-gpt-ad-1460505748561-0\": {\n   *    \"hb_bidder\": \"appnexusAst\",\n   *    \"hb_bidder_appnexusAs\": \"appnexusAst\"\n   *  }\n   * }\n   * ```\n   *\n   * @param {targetingArray}  targeting\n   * @return {Object.<string,targeting>}  targeting\n   */\n  function flattenTargeting(targeting) {\n    let targetingObj = targeting.map(targeting => {\n      return {\n        [Object.keys(targeting)[0]]: targeting[Object.keys(targeting)[0]]\n          .map(target => {\n            return {\n              [Object.keys(target)[0]]: target[Object.keys(target)[0]].join(', ')\n            };\n          }).reduce((p, c) => Object.assign(c, p), {})\n      };\n    }).reduce(function (accumulator, targeting) {\n      var key = Object.keys(targeting)[0];\n      accumulator[key] = Object.assign({}, accumulator[key], targeting[key]);\n      return accumulator;\n    }, {});\n    return targetingObj;\n  }\n\n  /**\n   * Sets targeting for DFP\n   * @param {Object.<string,Object.<string,string>>} targetingConfig\n   */\n  targeting.setTargetingForGPT = function(targetingConfig, customSlotMatching) {\n    window.googletag.pubads().getSlots().forEach(slot => {\n      Object.keys(targetingConfig).filter(customSlotMatching ? customSlotMatching(slot) : isAdUnitCodeMatchingSlot(slot))\n        .forEach(targetId =>\n          Object.keys(targetingConfig[targetId]).forEach(key => {\n            let valueArr = targetingConfig[targetId][key].split(',');\n            valueArr = (valueArr.length > 1) ? [valueArr] : valueArr;\n            valueArr.map((value) => {\n              utils.logMessage(`Attempting to set key value for slot: ${slot.getSlotElementId()} key: ${key} value: ${value}`);\n              return value;\n            }).forEach(value => {\n              slot.setTargeting(key, value);\n            });\n          })\n        )\n    })\n  };\n\n  /**\n   * normlizes input to a `adUnit.code` array\n   * @param  {(string|string[])} adUnitCode [description]\n   * @return {string[]}     AdUnit code array\n   */\n  function getAdUnitCodes(adUnitCode) {\n    if (typeof adUnitCode === 'string') {\n      return [adUnitCode];\n    } else if (utils.isArray(adUnitCode)) {\n      return adUnitCode;\n    }\n    return auctionManager.getAdUnitCodes() || [];\n  }\n\n  function getBidsReceived() {\n    let bidsReceived = auctionManager.getBidsReceived();\n\n    if (!config.getConfig('useBidCache')) {\n      bidsReceived = bidsReceived.filter(bid => latestAuctionForAdUnit[bid.adUnitCode] === bid.auctionId)\n    }\n\n    bidsReceived = bidsReceived\n      .filter(bid => deepAccess(bid, 'video.context') !== ADPOD)\n      .filter(bid => bid.mediaType !== 'banner' || sizeSupported([bid.width, bid.height]))\n      .filter(filters.isUnusedBid)\n      .filter(filters.isBidNotExpired)\n    ;\n\n    return getHighestCpmBidsFromBidPool(bidsReceived, getOldestHighestCpmBid);\n  }\n\n  /**\n   * Returns top bids for a given adUnit or set of adUnits.\n   * @param  {(string|string[])} adUnitCode adUnitCode or array of adUnitCodes\n   * @return {[type]}            [description]\n   */\n  targeting.getWinningBids = function(adUnitCode, bidsReceived = getBidsReceived()) {\n    const adUnitCodes = getAdUnitCodes(adUnitCode);\n    return bidsReceived\n      .filter(bid => includes(adUnitCodes, bid.adUnitCode))\n      .filter(bid => bid.cpm > 0)\n      .map(bid => bid.adUnitCode)\n      .filter(uniques)\n      .map(adUnitCode => bidsReceived\n        .filter(bid => bid.adUnitCode === adUnitCode ? bid : null)\n        .reduce(getHighestCpm));\n  };\n\n  /**\n   * @param  {(string|string[])} adUnitCode adUnitCode or array of adUnitCodes\n   * Sets targeting for AST\n   */\n  targeting.setTargetingForAst = function(adUnitCodes) {\n    let astTargeting = targeting.getAllTargeting(adUnitCodes);\n\n    try {\n      targeting.resetPresetTargetingAST(adUnitCodes);\n    } catch (e) {\n      utils.logError('unable to reset targeting for AST' + e)\n    }\n\n    Object.keys(astTargeting).forEach(targetId =>\n      Object.keys(astTargeting[targetId]).forEach(key => {\n        utils.logMessage(`Attempting to set targeting for targetId: ${targetId} key: ${key} value: ${astTargeting[targetId][key]}`);\n        // setKeywords supports string and array as value\n        if (utils.isStr(astTargeting[targetId][key]) || utils.isArray(astTargeting[targetId][key])) {\n          let keywordsObj = {};\n          let regex = /pt[0-9]/;\n          if (key.search(regex) < 0) {\n            keywordsObj[key.toUpperCase()] = astTargeting[targetId][key];\n          } else {\n            // pt${n} keys should not be uppercased\n            keywordsObj[key] = astTargeting[targetId][key];\n          }\n          window.apntag.setKeywords(targetId, keywordsObj, { overrideKeyValue: true });\n        }\n      })\n    );\n  };\n\n  /**\n   * Get targeting key value pairs for winning bid.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   winning bids targeting\n   */\n  function getWinningBidTargeting(adUnitCodes, bidsReceived) {\n    let winners = targeting.getWinningBids(adUnitCodes, bidsReceived);\n    let standardKeys = getStandardKeys();\n\n    winners = winners.map(winner => {\n      return {\n        [winner.adUnitCode]: Object.keys(winner.adserverTargeting)\n          .filter(key =>\n            typeof winner.sendStandardTargeting === 'undefined' ||\n            winner.sendStandardTargeting ||\n            standardKeys.indexOf(key) === -1)\n          .reduce((acc, key) => {\n            const targetingValue = [winner.adserverTargeting[key]];\n            const targeting = { [key.substring(0, MAX_DFP_KEYLENGTH)]: targetingValue };\n            if (key === CONSTANTS.TARGETING_KEYS.DEAL) {\n              const bidderCodeTargetingKey = `${key}_${winner.bidderCode}`.substring(0, MAX_DFP_KEYLENGTH);\n              const bidderCodeTargeting = { [bidderCodeTargetingKey]: targetingValue };\n              return [...acc, targeting, bidderCodeTargeting];\n            }\n            return [...acc, targeting];\n          }, [])\n      };\n    });\n\n    return winners;\n  }\n\n  function getStandardKeys() {\n    return auctionManager.getStandardBidderAdServerTargeting() // in case using a custom standard key set\n      .map(targeting => targeting.key)\n      .concat(TARGETING_KEYS).filter(uniques); // standard keys defined in the library.\n  }\n\n  /**\n   * Merge custom adserverTargeting with same key name for same adUnitCode.\n   * e.g: Appnexus defining custom keyvalue pair foo:bar and Rubicon defining custom keyvalue pair foo:baz will be merged to foo: ['bar','baz']\n   *\n   * @param {Object[]} acc Accumulator for reducer. It will store updated bidResponse objects\n   * @param {Object} bid BidResponse\n   * @param {number} index current index\n   * @param {Array} arr original array\n   */\n  function mergeAdServerTargeting(acc, bid, index, arr) {\n    function concatTargetingValue(key) {\n      return function(currentBidElement) {\n        if (!utils.isArray(currentBidElement.adserverTargeting[key])) {\n          currentBidElement.adserverTargeting[key] = [currentBidElement.adserverTargeting[key]];\n        }\n        currentBidElement.adserverTargeting[key] = currentBidElement.adserverTargeting[key].concat(bid.adserverTargeting[key]).filter(uniques);\n        delete bid.adserverTargeting[key];\n      }\n    }\n\n    function hasSameAdunitCodeAndKey(key) {\n      return function(currentBidElement) {\n        return currentBidElement.adUnitCode === bid.adUnitCode && currentBidElement.adserverTargeting[key]\n      }\n    }\n\n    Object.keys(bid.adserverTargeting)\n      .filter(getCustomKeys())\n      .forEach(key => {\n        if (acc.length) {\n          acc.filter(hasSameAdunitCodeAndKey(key))\n            .forEach(concatTargetingValue(key));\n        }\n      });\n    acc.push(bid);\n    return acc;\n  }\n\n  function getCustomKeys() {\n    let standardKeys = getStandardKeys().concat(NATIVE_TARGETING_KEYS);\n    return function(key) {\n      return standardKeys.indexOf(key) === -1;\n    }\n  }\n\n  function truncateCustomKeys(bid) {\n    return {\n      [bid.adUnitCode]: Object.keys(bid.adserverTargeting)\n        // Get only the non-standard keys of the losing bids, since we\n        // don't want to override the standard keys of the winning bid.\n        .filter(getCustomKeys())\n        .map(key => {\n          return {\n            [key.substring(0, MAX_DFP_KEYLENGTH)]: [bid.adserverTargeting[key]]\n          };\n        })\n    }\n  }\n\n  /**\n   * Get custom targeting key value pairs for bids.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   bids with custom targeting defined in bidderSettings\n   */\n  function getCustomBidTargeting(adUnitCodes, bidsReceived) {\n    return bidsReceived\n      .filter(bid => includes(adUnitCodes, bid.adUnitCode))\n      .map(bid => Object.assign({}, bid))\n      .reduce(mergeAdServerTargeting, [])\n      .map(truncateCustomKeys)\n      .filter(bid => bid); // removes empty elements in array;\n  }\n\n  /**\n   * Get targeting key value pairs for non-winning bids.\n   * @param {string[]}    AdUnit code array\n   * @return {targetingArray}   all non-winning bids targeting\n   */\n  function getBidLandscapeTargeting(adUnitCodes, bidsReceived) {\n    const standardKeys = TARGETING_KEYS.concat(NATIVE_TARGETING_KEYS);\n\n    const bids = getHighestCpmBidsFromBidPool(bidsReceived, getHighestCpm);\n\n    // populate targeting keys for the remaining bids\n    return bids.map(bid => {\n      if (bidShouldBeAddedToTargeting(bid, adUnitCodes)) {\n        return {\n          [bid.adUnitCode]: getTargetingMap(bid, standardKeys.filter(\n            key => typeof bid.adserverTargeting[key] !== 'undefined')\n          )\n        };\n      }\n    }).filter(bid => bid); // removes empty elements in array\n  }\n\n  function getTargetingMap(bid, keys) {\n    return keys.map(key => {\n      return {\n        [`${key}_${bid.bidderCode}`.substring(0, MAX_DFP_KEYLENGTH)]: [bid.adserverTargeting[key]]\n      };\n    });\n  }\n\n  targeting.isApntagDefined = function() {\n    if (window.apntag && utils.isFn(window.apntag.setKeywords)) {\n      return true;\n    }\n  };\n\n  return targeting;\n}\n\nexport const targeting = newTargeting(auctionManager);\n\n\n\n// WEBPACK FOOTER //\n// ./src/targeting.js","'use strict';\nvar $at = require('./_string-at')(true);\n\n// 21.1.3.27 String.prototype[@@iterator]()\nrequire('./_iter-define')(String, 'String', function (iterated) {\n  this._t = String(iterated); // target\n  this._i = 0;                // next index\n// 21.1.5.2.1 %StringIteratorPrototype%.next()\n}, function () {\n  var O = this._t;\n  var index = this._i;\n  var point;\n  if (index >= O.length) return { value: undefined, done: true };\n  point = $at(O, index);\n  this._i += point.length;\n  return { value: point, done: false };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.string.iterator.js\n// module id = 65\n// module chunks = 265","// 19.1.2.2 / 15.2.3.5 Object.create(O [, Properties])\nvar anObject = require('./_an-object');\nvar dPs = require('./_object-dps');\nvar enumBugKeys = require('./_enum-bug-keys');\nvar IE_PROTO = require('./_shared-key')('IE_PROTO');\nvar Empty = function () { /* empty */ };\nvar PROTOTYPE = 'prototype';\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar createDict = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = require('./_dom-create')('iframe');\n  var i = enumBugKeys.length;\n  var lt = '<';\n  var gt = '>';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  require('./_html').appendChild(iframe);\n  iframe.src = 'javascript:'; // eslint-disable-line no-script-url\n  // createDict = iframe.contentWindow.Object;\n  // html.removeChild(iframe);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(lt + 'script' + gt + 'document.F=Object' + lt + '/script' + gt);\n  iframeDocument.close();\n  createDict = iframeDocument.F;\n  while (i--) delete createDict[PROTOTYPE][enumBugKeys[i]];\n  return createDict();\n};\n\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    Empty[PROTOTYPE] = anObject(O);\n    result = new Empty();\n    Empty[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = createDict();\n  return Properties === undefined ? result : dPs(result, Properties);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_object-create.js\n// module id = 66\n// module chunks = 265","// IE 8- don't enum bug keys\nmodule.exports = (\n  'constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf'\n).split(',');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_enum-bug-keys.js\n// module id = 67\n// module chunks = 265","module.exports = function (done, value) {\n  return { value: value, done: !!done };\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-step.js\n// module id = 68\n// module chunks = 265","var hide = require('./_hide');\nmodule.exports = function (target, src, safe) {\n  for (var key in src) {\n    if (safe && target[key]) target[key] = src[key];\n    else hide(target, key, src[key]);\n  } return target;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_redefine-all.js\n// module id = 69\n// module chunks = 265","/** @module adaptermanger */\n\nimport { flatten, getBidderCodes, getDefinedParams, shuffle, timestamp, getBidderRequest } from './utils';\nimport { getLabels, resolveStatus } from './sizeMapping';\nimport { processNativeAdUnitParams, nativeAdapters } from './native';\nimport { newBidder } from './adapters/bidderFactory';\nimport { ajaxBuilder } from './ajax';\nimport { config, RANDOM } from './config';\nimport includes from 'core-js/library/fn/array/includes';\nimport find from 'core-js/library/fn/array/find';\nimport { adunitCounter } from './adUnits';\nimport { getRefererInfo } from './refererDetection';\n\nvar utils = require('./utils.js');\nvar CONSTANTS = require('./constants.json');\nvar events = require('./events');\nlet s2sTestingModule; // store s2sTesting module if it's loaded\n\nlet adapterManager = {};\n\nlet _bidderRegistry = adapterManager.bidderRegistry = {};\nlet _aliasRegistry = adapterManager.aliasRegistry = {};\n\nlet _s2sConfig = {};\nconfig.getConfig('s2sConfig', config => {\n  _s2sConfig = config.s2sConfig;\n});\n\nvar _analyticsRegistry = {};\n\n/**\n * @typedef {object} LabelDescriptor\n * @property {boolean} labelAll describes whether or not this object expects all labels to match, or any label to match\n * @property {Array<string>} labels the labels listed on the bidder or adUnit\n * @property {Array<string>} activeLabels the labels specified as being active by requestBids\n */\n\nfunction getBids({bidderCode, auctionId, bidderRequestId, adUnits, labels, src}) {\n  return adUnits.reduce((result, adUnit) => {\n    let {\n      active,\n      mediaTypes: filteredMediaTypes,\n      filterResults\n    } = resolveStatus(\n      getLabels(adUnit, labels),\n      adUnit.mediaTypes,\n      adUnit.sizes\n    );\n\n    if (!active) {\n      utils.logInfo(`Size mapping disabled adUnit \"${adUnit.code}\"`);\n    } else if (filterResults) {\n      utils.logInfo(`Size mapping filtered adUnit \"${adUnit.code}\" banner sizes from `, filterResults.before, 'to ', filterResults.after);\n    }\n\n    if (active) {\n      result.push(adUnit.bids.filter(bid => bid.bidder === bidderCode)\n        .reduce((bids, bid) => {\n          const nativeParams =\n            adUnit.nativeParams || utils.deepAccess(adUnit, 'mediaTypes.native');\n          if (nativeParams) {\n            bid = Object.assign({}, bid, {\n              nativeParams: processNativeAdUnitParams(nativeParams),\n            });\n          }\n\n          bid = Object.assign({}, bid, getDefinedParams(adUnit, [\n            'mediaType',\n            'renderer'\n          ]));\n\n          let {\n            active,\n            mediaTypes,\n            filterResults\n          } = resolveStatus(getLabels(bid, labels), filteredMediaTypes);\n\n          if (!active) {\n            utils.logInfo(`Size mapping deactivated adUnit \"${adUnit.code}\" bidder \"${bid.bidder}\"`);\n          } else if (filterResults) {\n            utils.logInfo(`Size mapping filtered adUnit \"${adUnit.code}\" bidder \"${bid.bidder}\" banner sizes from `, filterResults.before, 'to ', filterResults.after);\n          }\n\n          if (utils.isValidMediaTypes(mediaTypes)) {\n            bid = Object.assign({}, bid, {\n              mediaTypes\n            });\n          } else {\n            utils.logError(\n              `mediaTypes is not correctly configured for adunit ${adUnit.code}`\n            );\n          }\n\n          if (active) {\n            bids.push(Object.assign({}, bid, {\n              adUnitCode: adUnit.code,\n              transactionId: adUnit.transactionId,\n              sizes: utils.deepAccess(mediaTypes, 'banner.sizes') || utils.deepAccess(mediaTypes, 'video.playerSize') || [],\n              bidId: bid.bid_id || utils.getUniqueIdentifierStr(),\n              bidderRequestId,\n              auctionId,\n              src,\n              bidRequestsCount: adunitCounter.getCounter(adUnit.code),\n            }));\n          }\n          return bids;\n        }, [])\n      );\n    }\n    return result;\n  }, []).reduce(flatten, []).filter(val => val !== '');\n}\n\nfunction getAdUnitCopyForPrebidServer(adUnits) {\n  let adaptersServerSide = _s2sConfig.bidders;\n  let adUnitsCopy = utils.deepClone(adUnits);\n\n  adUnitsCopy.forEach((adUnit) => {\n    // filter out client side bids\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return includes(adaptersServerSide, bid.bidder) &&\n        (!doingS2STesting() || bid.finalSource !== s2sTestingModule.CLIENT);\n    }).map((bid) => {\n      bid.bid_id = utils.getUniqueIdentifierStr();\n      return bid;\n    });\n  });\n\n  // don't send empty requests\n  adUnitsCopy = adUnitsCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n  return adUnitsCopy;\n}\n\nfunction getAdUnitCopyForClientAdapters(adUnits) {\n  let adUnitsClientCopy = utils.deepClone(adUnits);\n  // filter out s2s bids\n  adUnitsClientCopy.forEach((adUnit) => {\n    adUnit.bids = adUnit.bids.filter((bid) => {\n      return !doingS2STesting() || bid.finalSource !== s2sTestingModule.SERVER;\n    })\n  });\n\n  // don't send empty requests\n  adUnitsClientCopy = adUnitsClientCopy.filter(adUnit => {\n    return adUnit.bids.length !== 0;\n  });\n\n  return adUnitsClientCopy;\n}\n\nexport let gdprDataHandler = {\n  consentData: null,\n  setConsentData: function(consentInfo) {\n    gdprDataHandler.consentData = consentInfo;\n  },\n  getConsentData: function() {\n    return gdprDataHandler.consentData;\n  }\n};\n\nadapterManager.makeBidRequests = function(adUnits, auctionStart, auctionId, cbTimeout, labels) {\n  let bidRequests = [];\n\n  let bidderCodes = getBidderCodes(adUnits);\n  if (config.getConfig('bidderSequence') === RANDOM) {\n    bidderCodes = shuffle(bidderCodes);\n  }\n  const refererInfo = getRefererInfo();\n\n  let clientBidderCodes = bidderCodes;\n  let clientTestAdapters = [];\n\n  if (_s2sConfig.enabled) {\n    // if s2sConfig.bidderControl testing is turned on\n    if (doingS2STesting()) {\n      // get all adapters doing client testing\n      const bidderMap = s2sTestingModule.getSourceBidderMap(adUnits);\n      clientTestAdapters = bidderMap[s2sTestingModule.CLIENT];\n    }\n\n    // these are called on the s2s adapter\n    let adaptersServerSide = _s2sConfig.bidders;\n\n    // don't call these client side (unless client request is needed for testing)\n    clientBidderCodes = bidderCodes.filter(elm =>\n      !includes(adaptersServerSide, elm) || includes(clientTestAdapters, elm)\n    );\n\n    const adUnitsContainServerRequests = adUnits => Boolean(\n      find(adUnits, adUnit => find(adUnit.bids, bid => (\n        bid.bidSource ||\n        (_s2sConfig.bidderControl && _s2sConfig.bidderControl[bid.bidder])\n      ) && bid.finalSource === s2sTestingModule.SERVER))\n    );\n\n    if (isTestingServerOnly() && adUnitsContainServerRequests(adUnits)) {\n      clientBidderCodes.length = 0;\n    }\n\n    let adUnitsS2SCopy = getAdUnitCopyForPrebidServer(adUnits);\n    let tid = utils.generateUUID();\n    adaptersServerSide.forEach(bidderCode => {\n      const bidderRequestId = utils.getUniqueIdentifierStr();\n      const bidderRequest = {\n        bidderCode,\n        auctionId,\n        bidderRequestId,\n        tid,\n        bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': utils.deepClone(adUnitsS2SCopy), labels, src: CONSTANTS.S2S.SRC}),\n        auctionStart: auctionStart,\n        timeout: _s2sConfig.timeout,\n        src: CONSTANTS.S2S.SRC,\n        refererInfo\n      };\n      if (bidderRequest.bids.length !== 0) {\n        bidRequests.push(bidderRequest);\n      }\n    });\n\n    // update the s2sAdUnits object and remove all bids that didn't pass sizeConfig/label checks from getBids()\n    // this is to keep consistency and only allow bids/adunits that passed the checks to go to pbs\n    adUnitsS2SCopy.forEach((adUnitCopy) => {\n      let validBids = adUnitCopy.bids.filter((adUnitBid) => {\n        return find(bidRequests, request => {\n          return find(request.bids, (reqBid) => reqBid.bidId === adUnitBid.bid_id);\n        });\n      });\n      adUnitCopy.bids = validBids;\n    });\n\n    bidRequests.forEach(request => {\n      request.adUnitsS2SCopy = adUnitsS2SCopy.filter(adUnitCopy => adUnitCopy.bids.length > 0);\n    });\n  }\n\n  // client adapters\n  let adUnitsClientCopy = getAdUnitCopyForClientAdapters(adUnits);\n  clientBidderCodes.forEach(bidderCode => {\n    const bidderRequestId = utils.getUniqueIdentifierStr();\n    const bidderRequest = {\n      bidderCode,\n      auctionId,\n      bidderRequestId,\n      bids: getBids({bidderCode, auctionId, bidderRequestId, 'adUnits': utils.deepClone(adUnitsClientCopy), labels, src: 'client'}),\n      auctionStart: auctionStart,\n      timeout: cbTimeout,\n      refererInfo\n    };\n    const adapter = _bidderRegistry[bidderCode];\n    if (!adapter) {\n      utils.logError(`Trying to make a request for bidder that does not exist: ${bidderCode}`);\n    }\n\n    if (adapter && bidderRequest.bids && bidderRequest.bids.length !== 0) {\n      bidRequests.push(bidderRequest);\n    }\n  });\n\n  if (gdprDataHandler.getConsentData()) {\n    bidRequests.forEach(bidRequest => {\n      bidRequest['gdprConsent'] = gdprDataHandler.getConsentData();\n    });\n  }\n  return bidRequests;\n};\n\nadapterManager.callBids = (adUnits, bidRequests, addBidResponse, doneCb, requestCallbacks, requestBidsTimeout, onTimelyResponse) => {\n  if (!bidRequests.length) {\n    utils.logWarn('callBids executed with no bidRequests.  Were they filtered by labels or sizing?');\n    return;\n  }\n\n  let [clientBidRequests, serverBidRequests] = bidRequests.reduce((partitions, bidRequest) => {\n    partitions[Number(typeof bidRequest.src !== 'undefined' && bidRequest.src === CONSTANTS.S2S.SRC)].push(bidRequest);\n    return partitions;\n  }, [[], []]);\n\n  if (serverBidRequests.length) {\n    // s2s should get the same client side timeout as other client side requests.\n    const s2sAjax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, 's2s'),\n      done: requestCallbacks.done\n    } : undefined);\n    let adaptersServerSide = _s2sConfig.bidders;\n    const s2sAdapter = _bidderRegistry[_s2sConfig.adapter];\n    let tid = serverBidRequests[0].tid;\n    let adUnitsS2SCopy = serverBidRequests[0].adUnitsS2SCopy;\n\n    if (s2sAdapter) {\n      let s2sBidRequest = {tid, 'ad_units': adUnitsS2SCopy};\n      if (s2sBidRequest.ad_units.length) {\n        let doneCbs = serverBidRequests.map(bidRequest => {\n          bidRequest.start = timestamp();\n          return doneCb.bind(bidRequest);\n        });\n\n        // only log adapters that actually have adUnit bids\n        let allBidders = s2sBidRequest.ad_units.reduce((adapters, adUnit) => {\n          return adapters.concat((adUnit.bids || []).reduce((adapters, bid) => { return adapters.concat(bid.bidder) }, []));\n        }, []);\n        utils.logMessage(`CALLING S2S HEADER BIDDERS ==== ${adaptersServerSide.filter(adapter => {\n          return includes(allBidders, adapter);\n        }).join(',')}`);\n\n        // fire BID_REQUESTED event for each s2s bidRequest\n        serverBidRequests.forEach(bidRequest => {\n          events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n        });\n\n        // make bid requests\n        s2sAdapter.callBids(\n          s2sBidRequest,\n          serverBidRequests,\n          function(adUnitCode, bid) {\n            let bidderRequest = getBidderRequest(serverBidRequests, bid.bidderCode, adUnitCode);\n            if (bidderRequest) {\n              addBidResponse.call(bidderRequest, adUnitCode, bid)\n            }\n          },\n          () => doneCbs.forEach(done => done()),\n          s2sAjax\n        );\n      }\n    }\n  }\n\n  // handle client adapter requests\n  clientBidRequests.forEach(bidRequest => {\n    bidRequest.start = timestamp();\n    // TODO : Do we check for bid in pool from here and skip calling adapter again ?\n    const adapter = _bidderRegistry[bidRequest.bidderCode];\n    utils.logMessage(`CALLING BIDDER ======= ${bidRequest.bidderCode}`);\n    events.emit(CONSTANTS.EVENTS.BID_REQUESTED, bidRequest);\n    let ajax = ajaxBuilder(requestBidsTimeout, requestCallbacks ? {\n      request: requestCallbacks.request.bind(null, bidRequest.bidderCode),\n      done: requestCallbacks.done\n    } : undefined);\n    adapter.callBids(bidRequest, addBidResponse.bind(bidRequest), doneCb.bind(bidRequest), ajax, onTimelyResponse);\n  });\n}\n\nfunction doingS2STesting() {\n  return _s2sConfig && _s2sConfig.enabled && _s2sConfig.testing && s2sTestingModule;\n}\n\nfunction isTestingServerOnly() {\n  return Boolean(doingS2STesting() && _s2sConfig.testServerOnly);\n};\n\nfunction getSupportedMediaTypes(bidderCode) {\n  let result = [];\n  if (includes(adapterManager.videoAdapters, bidderCode)) result.push('video');\n  if (includes(nativeAdapters, bidderCode)) result.push('native');\n  return result;\n}\n\nadapterManager.videoAdapters = []; // added by adapterLoader for now\n\nadapterManager.registerBidAdapter = function (bidAdaptor, bidderCode, {supportedMediaTypes = []} = {}) {\n  if (bidAdaptor && bidderCode) {\n    if (typeof bidAdaptor.callBids === 'function') {\n      _bidderRegistry[bidderCode] = bidAdaptor;\n\n      if (includes(supportedMediaTypes, 'video')) {\n        adapterManager.videoAdapters.push(bidderCode);\n      }\n      if (includes(supportedMediaTypes, 'native')) {\n        nativeAdapters.push(bidderCode);\n      }\n    } else {\n      utils.logError('Bidder adaptor error for bidder code: ' + bidderCode + 'bidder must implement a callBids() function');\n    }\n  } else {\n    utils.logError('bidAdaptor or bidderCode not specified');\n  }\n};\n\nadapterManager.aliasBidAdapter = function (bidderCode, alias) {\n  let existingAlias = _bidderRegistry[alias];\n\n  if (typeof existingAlias === 'undefined') {\n    let bidAdaptor = _bidderRegistry[bidderCode];\n    if (typeof bidAdaptor === 'undefined') {\n      // check if alias is part of s2sConfig and allow them to register if so (as base bidder may be s2s-only)\n      const s2sConfig = config.getConfig('s2sConfig');\n      const s2sBidders = s2sConfig && s2sConfig.bidders;\n\n      if (!(s2sBidders && includes(s2sBidders, alias))) {\n        utils.logError('bidderCode \"' + bidderCode + '\" is not an existing bidder.', 'adapterManager.aliasBidAdapter');\n      } else {\n        _aliasRegistry[alias] = bidderCode;\n      }\n    } else {\n      try {\n        let newAdapter;\n        let supportedMediaTypes = getSupportedMediaTypes(bidderCode);\n        // Have kept old code to support backward compatibilitiy.\n        // Remove this if loop when all adapters are supporting bidderFactory. i.e When Prebid.js is 1.0\n        if (bidAdaptor.constructor.prototype != Object.prototype) {\n          newAdapter = new bidAdaptor.constructor();\n          newAdapter.setBidderCode(alias);\n        } else {\n          let spec = bidAdaptor.getSpec();\n          newAdapter = newBidder(Object.assign({}, spec, { code: alias }));\n          _aliasRegistry[alias] = bidderCode;\n        }\n        adapterManager.registerBidAdapter(newAdapter, alias, {\n          supportedMediaTypes\n        });\n      } catch (e) {\n        utils.logError(bidderCode + ' bidder does not currently support aliasing.', 'adapterManager.aliasBidAdapter');\n      }\n    }\n  } else {\n    utils.logMessage('alias name \"' + alias + '\" has been already specified.');\n  }\n};\n\nadapterManager.registerAnalyticsAdapter = function ({adapter, code}) {\n  if (adapter && code) {\n    if (typeof adapter.enableAnalytics === 'function') {\n      adapter.code = code;\n      _analyticsRegistry[code] = adapter;\n    } else {\n      utils.logError(`Prebid Error: Analytics adaptor error for analytics \"${code}\"\n        analytics adapter must implement an enableAnalytics() function`);\n    }\n  } else {\n    utils.logError('Prebid Error: analyticsAdapter or analyticsCode not specified');\n  }\n};\n\nadapterManager.enableAnalytics = function (config) {\n  if (!utils.isArray(config)) {\n    config = [config];\n  }\n\n  utils._each(config, adapterConfig => {\n    var adapter = _analyticsRegistry[adapterConfig.provider];\n    if (adapter) {\n      adapter.enableAnalytics(adapterConfig);\n    } else {\n      utils.logError(`Prebid Error: no analytics adapter found in registry for\n        ${adapterConfig.provider}.`);\n    }\n  });\n};\n\nadapterManager.getBidAdapter = function(bidder) {\n  return _bidderRegistry[bidder];\n};\n\n// the s2sTesting module is injected when it's loaded rather than being imported\n// importing it causes the packager to include it even when it's not explicitly included in the build\nexport function setS2STestingModule(module) {\n  s2sTestingModule = module;\n}\n\nfunction tryCallBidderMethod(bidder, method, param) {\n  try {\n    const adapter = _bidderRegistry[bidder];\n    const spec = adapter.getSpec();\n    if (spec && spec[method] && typeof spec[method] === 'function') {\n      utils.logInfo(`Invoking ${bidder}.${method}`);\n      spec[method](param);\n    }\n  } catch (e) {\n    utils.logWarn(`Error calling ${method} of ${bidder}`);\n  }\n}\n\nadapterManager.callTimedOutBidders = function(adUnits, timedOutBidders, cbTimeout) {\n  timedOutBidders = timedOutBidders.map((timedOutBidder) => {\n    // Adding user configured params & timeout to timeout event data\n    timedOutBidder.params = utils.getUserConfiguredParams(adUnits, timedOutBidder.adUnitCode, timedOutBidder.bidder);\n    timedOutBidder.timeout = cbTimeout;\n    return timedOutBidder;\n  });\n  timedOutBidders = utils.groupBy(timedOutBidders, 'bidder');\n\n  Object.keys(timedOutBidders).forEach((bidder) => {\n    tryCallBidderMethod(bidder, 'onTimeout', timedOutBidders[bidder]);\n  });\n}\n\nadapterManager.callBidWonBidder = function(bidder, bid, adUnits) {\n  // Adding user configured params to bidWon event data\n  bid.params = utils.getUserConfiguredParams(adUnits, bid.adUnitCode, bid.bidder);\n  tryCallBidderMethod(bidder, 'onBidWon', bid);\n};\n\nadapterManager.callSetTargetingBidder = function(bidder, bid) {\n  tryCallBidderMethod(bidder, 'onSetTargeting', bid);\n};\n\nexport default adapterManager;\n\n\n\n// WEBPACK FOOTER //\n// ./src/adapterManager.js","module.exports = function (it, Constructor, name, forbiddenField) {\n  if (!(it instanceof Constructor) || (forbiddenField !== undefined && forbiddenField in it)) {\n    throw TypeError(name + ': incorrect invocation!');\n  } return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_an-instance.js\n// module id = 70\n// module chunks = 265","// call something on iterator step with safe closing on error\nvar anObject = require('./_an-object');\nmodule.exports = function (iterator, fn, value, entries) {\n  try {\n    return entries ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (e) {\n    var ret = iterator['return'];\n    if (ret !== undefined) anObject(ret.call(iterator));\n    throw e;\n  }\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_iter-call.js\n// module id = 71\n// module chunks = 265","// check on default Array iterator\nvar Iterators = require('./_iterators');\nvar ITERATOR = require('./_wks')('iterator');\nvar ArrayProto = Array.prototype;\n\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayProto[ITERATOR] === it);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array-iter.js\n// module id = 72\n// module chunks = 265","var classof = require('./_classof');\nvar ITERATOR = require('./_wks')('iterator');\nvar Iterators = require('./_iterators');\nmodule.exports = require('./_core').getIteratorMethod = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/core.get-iterator-method.js\n// module id = 73\n// module chunks = 265","// getting tag from 19.1.3.6 Object.prototype.toString()\nvar cof = require('./_cof');\nvar TAG = require('./_wks')('toStringTag');\n// ES3 wrong here\nvar ARG = cof(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (e) { /* empty */ }\n};\n\nmodule.exports = function (it) {\n  var O, T, B;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (T = tryGet(O = Object(it), TAG)) == 'string' ? T\n    // builtinTag case\n    : ARG ? cof(O)\n    // ES3 arguments fallback\n    : (B = cof(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : B;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_classof.js\n// module id = 74\n// module chunks = 265","var META = require('./_uid')('meta');\nvar isObject = require('./_is-object');\nvar has = require('./_has');\nvar setDesc = require('./_object-dp').f;\nvar id = 0;\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\nvar FREEZE = !require('./_fails')(function () {\n  return isExtensible(Object.preventExtensions({}));\n});\nvar setMeta = function (it) {\n  setDesc(it, META, { value: {\n    i: 'O' + ++id, // object ID\n    w: {}          // weak collections IDs\n  } });\n};\nvar fastKey = function (it, create) {\n  // return primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMeta(it);\n  // return object ID\n  } return it[META].i;\n};\nvar getWeak = function (it, create) {\n  if (!has(it, META)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMeta(it);\n  // return hash weak collections IDs\n  } return it[META].w;\n};\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZE && meta.NEED && isExtensible(it) && !has(it, META)) setMeta(it);\n  return it;\n};\nvar meta = module.exports = {\n  KEY: META,\n  NEED: false,\n  fastKey: fastKey,\n  getWeak: getWeak,\n  onFreeze: onFreeze\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_meta.js\n// module id = 75\n// module chunks = 265","var isObject = require('./_is-object');\nmodule.exports = function (it, TYPE) {\n  if (!isObject(it) || it._t !== TYPE) throw TypeError('Incompatible receiver, ' + TYPE + ' required!');\n  return it;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_validate-collection.js\n// module id = 76\n// module chunks = 265","import { getGlobal } from './prebidGlobal';\nimport { logWarn } from './utils';\n\nconst prebid = getGlobal();\n\n/**\n * This file defines the plugin points in prebid-core for AdServer-specific functionality.\n *\n * Its main job is to expose functions for AdServer modules to append functionality to the Prebid public API.\n * For a given Ad Server with name \"adServerName\", these functions will only change the API in the\n * $$PREBID_GLOBAL$$.adServers[adServerName] namespace.\n */\n\n/**\n * @typedef {Object} CachedVideoBid\n *\n * @property {string} videoCacheId The ID which can be used to retrieve this video from prebid-server.\n *   This is the same ID given to the callback in the videoCache's store function.\n */\n\n/**\n * @function VideoAdUrlBuilder\n *\n * @param {CachedVideoBid} bid The winning Bid which the ad server should show, assuming it beats out\n *   the competition.\n *\n * @param {Object} options Options required by the Ad Server to make a valid AdServer URL.\n *   This object will have different properties depending on the specific ad server supported.\n *   For more information, see the docs inside the ad server module you're supporting.\n *\n * @return {string} A URL which can be passed into the Video player to play an ad.\n */\n\n/**\n * @typedef {Object} VideoSupport\n *\n * @function {VideoAdUrlBuilder} buildVideoAdUrl\n */\n\n/**\n * Enable video support for the Ad Server.\n *\n * @property {string} name The identifying name for this adserver.\n * @property {VideoSupport} videoSupport An object with the functions needed to support video in Prebid.\n */\nexport function registerVideoSupport(name, videoSupport) {\n  prebid.adServers = prebid.adServers || { };\n  prebid.adServers[name] = prebid.adServers[name] || { };\n  Object.keys(videoSupport).forEach((key) => {\n    if (prebid.adServers[name][key]) {\n      logWarn(`Attempting to add an already registered function property ${key} for AdServer ${name}.`);\n      return;\n    }\n    prebid.adServers[name][key] = videoSupport[key];\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/adServerManager.js","/**\n * events.js\n */\nvar utils = require('./utils');\nvar CONSTANTS = require('./constants');\nvar slice = Array.prototype.slice;\nvar push = Array.prototype.push;\n\n// define entire events\n// var allEvents = ['bidRequested','bidResponse','bidWon','bidTimeout'];\nvar allEvents = utils._map(CONSTANTS.EVENTS, function (v) {\n  return v;\n});\n\nvar idPaths = CONSTANTS.EVENT_ID_PATHS;\n\n// keep a record of all events fired\nvar eventsFired = [];\n\nmodule.exports = (function () {\n  var _handlers = {};\n  var _public = {};\n\n  /**\n   *\n   * @param {String} eventString  The name of the event.\n   * @param {Array} args  The payload emitted with the event.\n   * @private\n   */\n  function _dispatch(eventString, args) {\n    utils.logMessage('Emitting event for: ' + eventString);\n\n    var eventPayload = args[0] || {};\n    var idPath = idPaths[eventString];\n    var key = eventPayload[idPath];\n    var event = _handlers[eventString] || { que: [] };\n    var eventKeys = utils._map(event, function (v, k) {\n      return k;\n    });\n\n    var callbacks = [];\n\n    // record the event:\n    eventsFired.push({\n      eventType: eventString,\n      args: eventPayload,\n      id: key\n    });\n\n    /** Push each specific callback to the `callbacks` array.\n     * If the `event` map has a key that matches the value of the\n     * event payload id path, e.g. `eventPayload[idPath]`, then apply\n     * each function in the `que` array as an argument to push to the\n     * `callbacks` array\n     * */\n    if (key && utils.contains(eventKeys, key)) {\n      push.apply(callbacks, event[key].que);\n    }\n\n    /** Push each general callback to the `callbacks` array. */\n    push.apply(callbacks, event.que);\n\n    /** call each of the callbacks */\n    utils._each(callbacks, function (fn) {\n      if (!fn) return;\n      try {\n        fn.apply(null, args);\n      } catch (e) {\n        utils.logError('Error executing handler:', 'events.js', e);\n      }\n    });\n  }\n\n  function _checkAvailableEvent(event) {\n    return utils.contains(allEvents, event);\n  }\n\n  _public.on = function (eventString, handler, id) {\n    // check whether available event or not\n    if (_checkAvailableEvent(eventString)) {\n      var event = _handlers[eventString] || { que: [] };\n\n      if (id) {\n        event[id] = event[id] || { que: [] };\n        event[id].que.push(handler);\n      } else {\n        event.que.push(handler);\n      }\n\n      _handlers[eventString] = event;\n    } else {\n      utils.logError('Wrong event name : ' + eventString + ' Valid event names :' + allEvents);\n    }\n  };\n\n  _public.emit = function (event) {\n    var args = slice.call(arguments, 1);\n    _dispatch(event, args);\n  };\n\n  _public.off = function (eventString, handler, id) {\n    var event = _handlers[eventString];\n\n    if (utils.isEmpty(event) || (utils.isEmpty(event.que) && utils.isEmpty(event[id]))) {\n      return;\n    }\n\n    if (id && (utils.isEmpty(event[id]) || utils.isEmpty(event[id].que))) {\n      return;\n    }\n\n    if (id) {\n      utils._each(event[id].que, function (_handler) {\n        var que = event[id].que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    } else {\n      utils._each(event.que, function (_handler) {\n        var que = event.que;\n        if (_handler === handler) {\n          que.splice(utils.indexOf.call(que, _handler), 1);\n        }\n      });\n    }\n\n    _handlers[eventString] = event;\n  };\n\n  _public.get = function () {\n    return _handlers;\n  };\n\n  /**\n   * This method can return a copy of all the events fired\n   * @return {Array} array of events fired\n   */\n  _public.getEvents = function () {\n    var arrayCopy = [];\n    utils._each(eventsFired, function (value) {\n      var newProp = Object.assign({}, value);\n      arrayCopy.push(newProp);\n    });\n\n    return arrayCopy;\n  };\n\n  return _public;\n}());\n\n\n\n// WEBPACK FOOTER //\n// ./src/events.js","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es6.array.find.js\n// module id = 80\n// module chunks = 265","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_ie8-dom-define.js\n// module id = 81\n// module chunks = 265","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-primitive.js\n// module id = 82\n// module chunks = 265","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-create.js\n// module id = 83\n// module chunks = 265","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_array-species-constructor.js\n// module id = 84\n// module chunks = 265","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_is-array.js\n// module id = 85\n// module chunks = 265","'use strict';\n// https://github.com/tc39/Array.prototype.includes\nvar $export = require('./_export');\nvar $includes = require('./_array-includes')(true);\n\n$export($export.P, 'Array', {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\nrequire('./_add-to-unscopables')('includes');\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/es7.array.includes.js\n// module id = 86\n// module chunks = 265","var toInteger = require('./_to-integer');\nvar max = Math.max;\nvar min = Math.min;\nmodule.exports = function (index, length) {\n  index = toInteger(index);\n  return index < 0 ? max(index + length, 0) : min(index, length);\n};\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/modules/_to-absolute-index.js\n// module id = 87\n// module chunks = 265","module.exports = clone;\n\n/*\n  Identical to `just-extend(true, {}, obj1)`\n\n  var arr = [1, 2, 3];\n  var subObj = {aa: 1};\n  var obj = {a: 3, b: 5, c: arr, d: subObj};\n  var objClone = clone(obj);\n  arr.push(4);\n  subObj.bb = 2;\n  obj; // {a: 3, b: 5, c: [1, 2, 3, 4], d: {aa: 1}}  \n  objClone; // {a: 3, b: 5, c: [1, 2, 3], d: {aa: 1, bb: 2}}\n*/\n\nfunction clone(obj) {\n  var result = Array.isArray(obj) ? [] : {};\n  for (var key in obj) {\n    // include prototype properties\n    var value = obj[key];\n    if (value && typeof value == 'object') {\n      result[key] = clone(value);\n    } else {\n      result[key] = value;\n    }\n  }\n  return result;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/just-clone/index.js\n// module id = 88\n// module chunks = 265","export default function dlv(obj, key, def, p, undef) {\n\tkey = key.split ? key.split('.') : key;\n\tfor (p = 0; p < key.length; p++) {\n\t\tobj = obj ? obj[key[p]] : undef;\n\t}\n\treturn obj === undef ? def : obj;\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dlv/index.js\n// module id = 89\n// module chunks = 265","require('../../modules/es7.array.includes');\nmodule.exports = require('../../modules/_core').Array.includes;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/core-js/library/fn/array/includes.js\n// module id = 9\n// module chunks = 265","export default function (obj, keys, val) {\n\tkeys.split && (keys=keys.split('.'));\n\tvar i=0, l=keys.length, t=obj, x;\n\tfor (; i < l; ++i) {\n\t\tx = t[keys[i]];\n\t\tt = t[keys[i]] = (i === l - 1 ? val : (x != null ? x : (!!~keys[i+1].indexOf('.') || !(+keys[i+1] > -1)) ? {} : []));\n\t}\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/dset/dist/dset.es.js\n// module id = 90\n// module chunks = 265","/*\n* @license MIT\n* Fun Hooks v0.9.6\n* (c) @snapwich\n*/\ncreate.SYNC = 1;\ncreate.ASYNC = 2;\ncreate.QUEUE = 4;\n\nvar packageName = \"fun-hooks\";\n\nfunction hasProxy() {\n  return !!(typeof Proxy === \"function\" && Proxy.revocable);\n}\n\nvar defaults = Object.freeze({\n  useProxy: true,\n  ready: 0\n});\n\nvar hookableMap = new WeakMap();\n\n// detect incorrectly implemented reduce and if found use polyfill\n// https://github.com/prebid/Prebid.js/issues/3576\n// polyfill from: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce\nvar reduce =\n  [1]\n    .reduce(function(a, b, c) {\n      return [a, b, c];\n    }, 2)\n    .toString() === \"2,1,0\"\n    ? Array.prototype.reduce\n    : function(callback, initial) {\n        var o = Object(this);\n        var len = o.length >>> 0;\n        var k = 0;\n        var value;\n        if (initial) {\n          value = initial;\n        } else {\n          while (k < len && !(k in o)) {\n            k++;\n          }\n          value = o[k++];\n        }\n        while (k < len) {\n          if (k in o) {\n            value = callback(value, o[k], k, o);\n          }\n          k++;\n        }\n        return value;\n      };\n\nfunction rest(args, skip) {\n  return Array.prototype.slice.call(args, skip);\n}\n\nvar assign =\n  Object.assign ||\n  function assign(target) {\n    return reduce.call(\n      rest(arguments, 1),\n      function(target, obj) {\n        if (obj) {\n          Object.keys(obj).forEach(function(prop) {\n            target[prop] = obj[prop];\n          });\n        }\n        return target;\n      },\n      target\n    );\n  };\n\nfunction runAll(queue) {\n  var queued;\n  // eslint-disable-next-line no-cond-assign\n  while ((queued = queue.shift())) {\n    queued();\n  }\n}\n\nfunction create(config) {\n  var hooks = {};\n  var postReady = [];\n\n  config = assign({}, defaults, config);\n\n  function dispatch(arg1, arg2) {\n    if (typeof arg1 === \"function\") {\n      return hookFn.call(null, \"sync\", arg1, arg2);\n    } else if (typeof arg1 === \"string\" && typeof arg2 === \"function\") {\n      return hookFn.apply(null, arguments);\n    } else if (typeof arg1 === \"object\") {\n      return hookObj.apply(null, arguments);\n    }\n  }\n\n  var ready;\n  if (config.ready) {\n    dispatch.ready = function() {\n      ready = true;\n      runAll(postReady);\n    };\n  } else {\n    ready = true;\n  }\n\n  function hookObj(obj, props, objName) {\n    var walk = true;\n    if (typeof props === \"undefined\") {\n      props = Object.getOwnPropertyNames(obj);\n      walk = false;\n    }\n    var objHooks = {};\n    var doNotHook = [\"constructor\"];\n    do {\n      props = props.filter(function(prop) {\n        return (\n          typeof obj[prop] === \"function\" &&\n          !(doNotHook.indexOf(prop) !== -1) &&\n          !prop.match(/^_/)\n        );\n      });\n      props.forEach(function(prop) {\n        var parts = prop.split(\":\");\n        var name = parts[0];\n        var type = parts[1] || \"sync\";\n        if (!objHooks[name]) {\n          var fn = obj[name];\n          objHooks[name] = obj[name] = hookFn(\n            type,\n            fn,\n            objName ? [objName, name] : undefined\n          );\n        }\n      });\n      obj = Object.getPrototypeOf(obj);\n    } while (walk && obj);\n    return objHooks;\n  }\n\n  /**\n   * Navigates a string path to return a hookable function.  If not found, creates a placeholder for hooks.\n   * @param {(Array<string> | string)} path\n   */\n  function get(path) {\n    var parts = Array.isArray(path) ? path : path.split(\".\");\n    return reduce.call(\n      parts,\n      function(memo, part, i) {\n        var item = memo[part];\n        var installed = false;\n        if (item) {\n          return item;\n        } else if (i === parts.length - 1) {\n          if (!ready) {\n            postReady.push(function() {\n              if (!installed) {\n                // eslint-disable-next-line no-console\n                console.warn(\n                  packageName +\n                    \": referenced '\" +\n                    path +\n                    \"' but it was never created\"\n                );\n              }\n            });\n          }\n          return (memo[part] = newHookable(function(fn) {\n            memo[part] = fn;\n            installed = true;\n          }));\n        }\n        return (memo[part] = {});\n      },\n      hooks\n    );\n  }\n\n  function newHookable(onInstall) {\n    var before = [];\n    var after = [];\n    var generateTrap = function() {};\n\n    var api = {\n      before: function(hook, priority) {\n        return add.call(this, before, \"before\", hook, priority);\n      },\n      after: function(hook, priority) {\n        return add.call(this, after, \"after\", hook, priority);\n      },\n      getHooks: function(match) {\n        var hooks = before.concat(after);\n        if (typeof match === \"object\") {\n          hooks = hooks.filter(function(entry) {\n            return Object.keys(match).every(function(prop) {\n              return entry[prop] === match[prop];\n            });\n          });\n        }\n        return assign(hooks, {\n          remove: function() {\n            hooks.forEach(function(entry) {\n              entry.remove();\n            });\n            return this;\n          }\n        });\n      },\n      removeAll: function() {\n        return this.getHooks().remove();\n      }\n    };\n\n    var meta = {\n      install: function(type, fn, generate) {\n        this.type = type;\n        generateTrap = generate;\n        generate(before, after);\n        onInstall && onInstall(fn);\n      }\n    };\n\n    // store meta data related to hookable. use `api.after` since `api` reference is not available on our proxy.\n    hookableMap.set(api.after, meta);\n\n    return api;\n\n    function add(store, type, hook, priority) {\n      var entry = {\n        hook: hook,\n        type: type,\n        priority: priority || 10,\n        remove: function() {\n          var index = store.indexOf(entry);\n          if (index !== -1) {\n            store.splice(index, 1);\n            generateTrap(before, after);\n          }\n        }\n      };\n      store.push(entry);\n      store.sort(function(a, b) {\n        return b.priority - a.priority;\n      });\n      generateTrap(before, after);\n      return this;\n    }\n  }\n\n  function hookFn(type, fn, name) {\n    // check if function has already been wrapped\n    var meta = fn.after && hookableMap.get(fn.after);\n    if (meta) {\n      if (meta.type !== type) {\n        throw packageName + \": recreated hookable with different type\";\n      } else {\n        return fn;\n      }\n    }\n\n    var hookable = name ? get(name) : newHookable();\n\n    var trap;\n    var hookedFn;\n    var handlers = {\n      get: function(target, prop) {\n        return hookable[prop] || Reflect.get.apply(Reflect, arguments);\n      }\n    };\n\n    if (!ready) {\n      postReady.push(setTrap);\n    }\n\n    if (config.useProxy && hasProxy()) {\n      hookedFn = new Proxy(fn, handlers);\n    } else {\n      hookedFn = function() {\n        return handlers.apply\n          ? handlers.apply(fn, this, rest(arguments))\n          : fn.apply(this, arguments);\n      };\n      assign(hookedFn, hookable);\n    }\n\n    hookableMap.get(hookedFn.after).install(type, hookedFn, generateTrap);\n\n    return hookedFn;\n\n    // eslint-disable-next-line no-redeclare\n    function generateTrap(before, after) {\n      var order = [];\n      var targetIndex;\n      if (before.length || after.length) {\n        before.forEach(addToOrder);\n        // placeholder for target function wrapper\n        targetIndex = order.push(undefined) - 1;\n        after.forEach(addToOrder);\n        trap = function(target, thisArg, args) {\n          var curr = 0;\n          var result;\n          var callback =\n            type === \"async\" &&\n            typeof args[args.length - 1] === \"function\" &&\n            args.pop();\n          function bail(value) {\n            if (type === \"sync\") {\n              result = value;\n            } else if (callback) {\n              callback.apply(null, arguments);\n            }\n          }\n          function next(value) {\n            if (order[curr]) {\n              var args = rest(arguments);\n              next.bail = bail;\n              args.unshift(next);\n              return order[curr++].apply(thisArg, args);\n            }\n            if (type === \"sync\") {\n              result = value;\n            } else if (callback) {\n              callback.apply(null, arguments);\n            }\n          }\n          order[targetIndex] = function() {\n            var args = rest(arguments, 1);\n            if (type === \"async\" && callback) {\n              delete next.bail;\n              args.push(next);\n            }\n            var result = target.apply(thisArg, args);\n            if (type === \"sync\") {\n              next(result);\n            }\n          };\n          next.apply(null, args);\n          return result;\n        };\n      } else {\n        trap = undefined;\n      }\n      setTrap();\n\n      function addToOrder(entry) {\n        order.push(entry.hook);\n      }\n    }\n\n    function setTrap() {\n      if (\n        ready ||\n        (type === \"sync\" && !(config.ready & create.SYNC)) ||\n        (type === \"async\" && !(config.ready & create.ASYNC))\n      ) {\n        handlers.apply = trap;\n      } else if (type === \"sync\" || !(config.ready & create.QUEUE)) {\n        handlers.apply = function() {\n          throw packageName + \": hooked function not ready\";\n        };\n      } else {\n        handlers.apply = function() {\n          var args = arguments;\n          postReady.push(function() {\n            hookedFn.apply(args[1], args[2]);\n          });\n        };\n      }\n    }\n  }\n\n  dispatch.get = get;\n  return dispatch;\n}\n\n/* global module */\nmodule.exports = create;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/fun-hooks/no-eval/index.js\n// module id = 91\n// module chunks = 265"],"sourceRoot":""}